{
    "componentChunkName": "component---src-pages-page-js",
    "path": "/page/0",
    "result": {"data":{"allMdx":{"nodes":[{"id":"d63399ea-7e7a-57d8-aa49-cc64f48c2f6a","slug":"posts/code/centos-yum-update-git","rawBody":"---\ntitle: \"CentOS使用Yum升级Git到2.1x新版本\"\ndate: 2020-12-08T21:13:54+08:00\ncategories: [\"code\"]\ntags: [\"linux\", \"centos\", \"git\", \"update\", \"yum\"]\ndraft: false\n---\n\n使用yum最多只能安装到1.8，版本太旧了，下载源码手动编译安装？先不说国内下载官网包2kB/s的速度，就是下载下来了编译也麻烦啊，包管理是吃干饭的嘛？\n\n其实只要换个源，重新下载就好了\n\n先卸载旧版\n\n```cmd\nyum remove git\n```\n\n添加新源后安装新版\n\n```cmd\nyum install -y https://centos7.iuscommunity.org/ius-release.rpm\nyum install -y git2u\n```\n\n检验\n\n```cmd\ngit version    \n```\n\n最后附带我的安装过程\n\n```cmd\nroot@izwz957qhjacaocedubzjjz /tmp/installGit   [20:43:53] \n> # yum install -y https://centos7.iuscommunity.org/ius-release.rpm\n已加载插件：fastestmirror\nius-release.rpm                    | 8.2 kB     00:00     \n正在检查 /var/tmp/yum-root-6VAioA/ius-release.rpm: ius-release-2-1.el7.ius.noarch\n/var/tmp/yum-root-6VAioA/ius-release.rpm 将被安装\n正在解决依赖关系\n--> 正在检查事务\n---> 软件包 ius-release.noarch.0.2-1.el7.ius 将被 安装\n--> 正在处理依赖关系 epel-release = 7，它被软件包 ius-release-2-1.el7.ius.noarch 需要\nLoading mirror speeds from cached hostfile\n--> 正在检查事务\n---> 软件包 epel-release.noarch.0.7-12 将被 安装\n--> 解决依赖关系完成\n\n依赖关系解决\n\n==========================================================\n Package       架构    版本           源             大小\n==========================================================\n正在安装:\n ius-release   noarch  2-1.el7.ius    /ius-release  4.5 k\n为依赖而安装:\n epel-release  noarch  7-12           epel           15 k\n\n事务概要\n==========================================================\n安装  1 软件包 (+1 依赖软件包)\n\n总计：19 k\n总下载量：15 k\n安装大小：29 k\nDownloading packages:\nepel-release-7-12.noarch.rpm         |  15 kB   00:00     \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  正在安装    : epel-release-7-12.noarch              1/2 \n警告：/etc/yum.repos.d/epel.repo 已建立为 /etc/yum.repos.d/epel.repo.rpmnew \n  正在安装    : ius-release-2-1.el7.ius.noarch        2/2 \n  验证中      : ius-release-2-1.el7.ius.noarch        1/2 \n  验证中      : epel-release-7-12.noarch              2/2 \n\n已安装:\n  ius-release.noarch 0:2-1.el7.ius                        \n\n作为依赖被安装:\n  epel-release.noarch 0:7-12                              \n\n完毕！\n                                                          \nroot@izwz957qhjacaocedubzjjz /tmp/installGit   [20:44:05] \n> # yum install -y git2u                                 \n已加载插件：fastestmirror\nius                                | 1.3 kB     00:00     \nius/x86_64/primary                   | 129 kB   00:01     \nLoading mirror speeds from cached hostfile\nius                                               538/538\n正在解决依赖关系\n--> 正在检查事务\n---> 软件包 git2u.x86_64.0.2.16.5-1.ius.el7 将被 安装\n--> 正在处理依赖关系 git2u-perl-Git = 2.16.5-1.ius.el7，它被软件包 git2u-2.16.5-1.ius.el7.x86_64 需要\n--> 正在处理依赖关系 git2u-core-doc = 2.16.5-1.ius.el7，它被软件包 git2u-2.16.5-1.ius.el7.x86_64 需要\n--> 正在处理依赖关系 git2u-core = 2.16.5-1.ius.el7，它被软件包 git2u-2.16.5-1.ius.el7.x86_64 需要\n--> 正在处理依赖关系 perl(Git::I18N)，它被软件包 git2u-2.16.5-1.ius.el7.x86_64 需要\n--> 正在处理依赖关系 perl(Git)，它被软件包 git2u-2.16.5-1.ius.el7.x86_64 需要\n--> 正在处理依赖关系 libsecret-1.so.0()(64bit)，它被软件包 git2u-2.16.5-1.ius.el7.x86_64 需要\n--> 正在检查事务\n---> 软件包 git2u-core.x86_64.0.2.16.5-1.ius.el7 将被 安装\n---> 软件包 git2u-core-doc.noarch.0.2.16.5-1.ius.el7 将被 安装\n---> 软件包 git2u-perl-Git.noarch.0.2.16.5-1.ius.el7 将被 安装\n---> 软件包 libsecret.x86_64.0.0.18.6-1.el7 将被 安装\n--> 解决依赖关系完成\n\n依赖关系解决\n\n==========================================================\n Package         架构    版本                 源     大小\n==========================================================\n正在安装:\n git2u           x86_64  2.16.5-1.ius.el7     ius   1.1 M\n为依赖而安装:\n git2u-core      x86_64  2.16.5-1.ius.el7     ius   5.5 M\n git2u-core-doc  noarch  2.16.5-1.ius.el7     ius   2.4 M\n git2u-perl-Git  noarch  2.16.5-1.ius.el7     ius    68 k\n libsecret       x86_64  0.18.6-1.el7         base  153 k\n\n事务概要\n==========================================================\n安装  1 软件包 (+4 依赖软件包)\n\n总下载量：9.2 M\n安装大小：42 M\nDownloading packages:\n警告：/var/cache/yum/x86_64/7/ius/packages/git2u-2.16.5-1.ius.el7.x86_64.rpm: 头V4 RSA/SHA256 Signature, 密钥 ID 4b274df2: NOKEY\ngit2u-2.16.5-1.ius.el7.x86_64.rpm 的公钥尚未安装\n(1/5): git2u-2.16.5-1.ius.el7.x86_64 | 1.1 MB   00:02     \n(2/5): git2u-core-doc-2.16.5-1.ius.e | 2.4 MB   00:00     \n(3/5): git2u-core-2.16.5-1.ius.el7.x | 5.5 MB   00:03     \n(4/5): libsecret-0.18.6-1.el7.x86_64 | 153 kB   00:00     \n(5/5): git2u-perl-Git-2.16.5-1.ius.e |  68 kB   00:00     \n----------------------------------------------------------\n总计                         2.6 MB/s | 9.2 MB  00:03     \n从 file:///etc/pki/rpm-gpg/RPM-GPG-KEY-IUS-7 检索密钥\n导入 GPG key 0x4B274DF2:\n 用户ID     : \"IUS (7) <dev@ius.io>\"\n 指纹       : c958 7a09 a11f d706 4f0c a0f4 e558 0725 4b27 4df2\n 软件包     : ius-release-2-1.el7.ius.noarch (installed)\n 来自       : /etc/pki/rpm-gpg/RPM-GPG-KEY-IUS-7\nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  正在安装    : git2u-core-2.16.5-1.ius.el7.x86_64    1/5 \n  正在安装    : git2u-core-doc-2.16.5-1.ius.el7.noa   2/5 \n  正在安装    : libsecret-0.18.6-1.el7.x86_64         3/5 \n  正在安装    : git2u-perl-Git-2.16.5-1.ius.el7.noa   4/5 \n  正在安装    : git2u-2.16.5-1.ius.el7.x86_64         5/5 \n  验证中      : git2u-2.16.5-1.ius.el7.x86_64         1/5 \n  验证中      : git2u-core-doc-2.16.5-1.ius.el7.noa   2/5 \n  验证中      : git2u-core-2.16.5-1.ius.el7.x86_64    3/5 \n  验证中      : git2u-perl-Git-2.16.5-1.ius.el7.noa   4/5 \n  验证中      : libsecret-0.18.6-1.el7.x86_64         5/5 \n\n已安装:\n  git2u.x86_64 0:2.16.5-1.ius.el7                         \n\n作为依赖被安装:\n  git2u-core.x86_64 0:2.16.5-1.ius.el7                    \n  git2u-core-doc.noarch 0:2.16.5-1.ius.el7                \n  git2u-perl-Git.noarch 0:2.16.5-1.ius.el7                \n  libsecret.x86_64 0:0.18.6-1.el7                         \n\n完毕！\n                                                          \nroot@izwz957qhjacaocedubzjjz /tmp/installGit   [20:44:22] \n> # git version                                       \n\ngit version 2.16.5\n```\n\n> 感谢[https://www.cnblogs.com/jhxxb/p/10571227.html](https://www.cnblogs.com/jhxxb/p/10571227.html)\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"CentOS使用Yum升级Git到2.1x新版本\",\n  \"date\": \"2020-12-08T13:13:54.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"linux\", \"centos\", \"git\", \"update\", \"yum\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u4F7F\\u7528yum\\u6700\\u591A\\u53EA\\u80FD\\u5B89\\u88C5\\u52301.8\\uFF0C\\u7248\\u672C\\u592A\\u65E7\\u4E86\\uFF0C\\u4E0B\\u8F7D\\u6E90\\u7801\\u624B\\u52A8\\u7F16\\u8BD1\\u5B89\\u88C5\\uFF1F\\u5148\\u4E0D\\u8BF4\\u56FD\\u5185\\u4E0B\\u8F7D\\u5B98\\u7F51\\u53052kB/s\\u7684\\u901F\\u5EA6\\uFF0C\\u5C31\\u662F\\u4E0B\\u8F7D\\u4E0B\\u6765\\u4E86\\u7F16\\u8BD1\\u4E5F\\u9EBB\\u70E6\\u554A\\uFF0C\\u5305\\u7BA1\\u7406\\u662F\\u5403\\u5E72\\u996D\\u7684\\u561B\\uFF1F\"), mdx(\"p\", null, \"\\u5176\\u5B9E\\u53EA\\u8981\\u6362\\u4E2A\\u6E90\\uFF0C\\u91CD\\u65B0\\u4E0B\\u8F7D\\u5C31\\u597D\\u4E86\"), mdx(\"p\", null, \"\\u5148\\u5378\\u8F7D\\u65E7\\u7248\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"yum remove git\\n\")), mdx(\"p\", null, \"\\u6DFB\\u52A0\\u65B0\\u6E90\\u540E\\u5B89\\u88C5\\u65B0\\u7248\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"yum install -y https://centos7.iuscommunity.org/ius-release.rpm\\nyum install -y git2u\\n\")), mdx(\"p\", null, \"\\u68C0\\u9A8C\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"git version    \\n\")), mdx(\"p\", null, \"\\u6700\\u540E\\u9644\\u5E26\\u6211\\u7684\\u5B89\\u88C5\\u8FC7\\u7A0B\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"root@izwz957qhjacaocedubzjjz /tmp/installGit   [20:43:53] \\n> # yum install -y https://centos7.iuscommunity.org/ius-release.rpm\\n\\u5DF2\\u52A0\\u8F7D\\u63D2\\u4EF6\\uFF1Afastestmirror\\nius-release.rpm                    | 8.2 kB     00:00     \\n\\u6B63\\u5728\\u68C0\\u67E5 /var/tmp/yum-root-6VAioA/ius-release.rpm: ius-release-2-1.el7.ius.noarch\\n/var/tmp/yum-root-6VAioA/ius-release.rpm \\u5C06\\u88AB\\u5B89\\u88C5\\n\\u6B63\\u5728\\u89E3\\u51B3\\u4F9D\\u8D56\\u5173\\u7CFB\\n--> \\u6B63\\u5728\\u68C0\\u67E5\\u4E8B\\u52A1\\n---> \\u8F6F\\u4EF6\\u5305 ius-release.noarch.0.2-1.el7.ius \\u5C06\\u88AB \\u5B89\\u88C5\\n--> \\u6B63\\u5728\\u5904\\u7406\\u4F9D\\u8D56\\u5173\\u7CFB epel-release = 7\\uFF0C\\u5B83\\u88AB\\u8F6F\\u4EF6\\u5305 ius-release-2-1.el7.ius.noarch \\u9700\\u8981\\nLoading mirror speeds from cached hostfile\\n--> \\u6B63\\u5728\\u68C0\\u67E5\\u4E8B\\u52A1\\n---> \\u8F6F\\u4EF6\\u5305 epel-release.noarch.0.7-12 \\u5C06\\u88AB \\u5B89\\u88C5\\n--> \\u89E3\\u51B3\\u4F9D\\u8D56\\u5173\\u7CFB\\u5B8C\\u6210\\n\\n\\u4F9D\\u8D56\\u5173\\u7CFB\\u89E3\\u51B3\\n\\n==========================================================\\n Package       \\u67B6\\u6784    \\u7248\\u672C           \\u6E90             \\u5927\\u5C0F\\n==========================================================\\n\\u6B63\\u5728\\u5B89\\u88C5:\\n ius-release   noarch  2-1.el7.ius    /ius-release  4.5 k\\n\\u4E3A\\u4F9D\\u8D56\\u800C\\u5B89\\u88C5:\\n epel-release  noarch  7-12           epel           15 k\\n\\n\\u4E8B\\u52A1\\u6982\\u8981\\n==========================================================\\n\\u5B89\\u88C5  1 \\u8F6F\\u4EF6\\u5305 (+1 \\u4F9D\\u8D56\\u8F6F\\u4EF6\\u5305)\\n\\n\\u603B\\u8BA1\\uFF1A19 k\\n\\u603B\\u4E0B\\u8F7D\\u91CF\\uFF1A15 k\\n\\u5B89\\u88C5\\u5927\\u5C0F\\uFF1A29 k\\nDownloading packages:\\nepel-release-7-12.noarch.rpm         |  15 kB   00:00     \\nRunning transaction check\\nRunning transaction test\\nTransaction test succeeded\\nRunning transaction\\n  \\u6B63\\u5728\\u5B89\\u88C5    : epel-release-7-12.noarch              1/2 \\n\\u8B66\\u544A\\uFF1A/etc/yum.repos.d/epel.repo \\u5DF2\\u5EFA\\u7ACB\\u4E3A /etc/yum.repos.d/epel.repo.rpmnew \\n  \\u6B63\\u5728\\u5B89\\u88C5    : ius-release-2-1.el7.ius.noarch        2/2 \\n  \\u9A8C\\u8BC1\\u4E2D      : ius-release-2-1.el7.ius.noarch        1/2 \\n  \\u9A8C\\u8BC1\\u4E2D      : epel-release-7-12.noarch              2/2 \\n\\n\\u5DF2\\u5B89\\u88C5:\\n  ius-release.noarch 0:2-1.el7.ius                        \\n\\n\\u4F5C\\u4E3A\\u4F9D\\u8D56\\u88AB\\u5B89\\u88C5:\\n  epel-release.noarch 0:7-12                              \\n\\n\\u5B8C\\u6BD5\\uFF01\\n                                                          \\nroot@izwz957qhjacaocedubzjjz /tmp/installGit   [20:44:05] \\n> # yum install -y git2u                                 \\n\\u5DF2\\u52A0\\u8F7D\\u63D2\\u4EF6\\uFF1Afastestmirror\\nius                                | 1.3 kB     00:00     \\nius/x86_64/primary                   | 129 kB   00:01     \\nLoading mirror speeds from cached hostfile\\nius                                               538/538\\n\\u6B63\\u5728\\u89E3\\u51B3\\u4F9D\\u8D56\\u5173\\u7CFB\\n--> \\u6B63\\u5728\\u68C0\\u67E5\\u4E8B\\u52A1\\n---> \\u8F6F\\u4EF6\\u5305 git2u.x86_64.0.2.16.5-1.ius.el7 \\u5C06\\u88AB \\u5B89\\u88C5\\n--> \\u6B63\\u5728\\u5904\\u7406\\u4F9D\\u8D56\\u5173\\u7CFB git2u-perl-Git = 2.16.5-1.ius.el7\\uFF0C\\u5B83\\u88AB\\u8F6F\\u4EF6\\u5305 git2u-2.16.5-1.ius.el7.x86_64 \\u9700\\u8981\\n--> \\u6B63\\u5728\\u5904\\u7406\\u4F9D\\u8D56\\u5173\\u7CFB git2u-core-doc = 2.16.5-1.ius.el7\\uFF0C\\u5B83\\u88AB\\u8F6F\\u4EF6\\u5305 git2u-2.16.5-1.ius.el7.x86_64 \\u9700\\u8981\\n--> \\u6B63\\u5728\\u5904\\u7406\\u4F9D\\u8D56\\u5173\\u7CFB git2u-core = 2.16.5-1.ius.el7\\uFF0C\\u5B83\\u88AB\\u8F6F\\u4EF6\\u5305 git2u-2.16.5-1.ius.el7.x86_64 \\u9700\\u8981\\n--> \\u6B63\\u5728\\u5904\\u7406\\u4F9D\\u8D56\\u5173\\u7CFB perl(Git::I18N)\\uFF0C\\u5B83\\u88AB\\u8F6F\\u4EF6\\u5305 git2u-2.16.5-1.ius.el7.x86_64 \\u9700\\u8981\\n--> \\u6B63\\u5728\\u5904\\u7406\\u4F9D\\u8D56\\u5173\\u7CFB perl(Git)\\uFF0C\\u5B83\\u88AB\\u8F6F\\u4EF6\\u5305 git2u-2.16.5-1.ius.el7.x86_64 \\u9700\\u8981\\n--> \\u6B63\\u5728\\u5904\\u7406\\u4F9D\\u8D56\\u5173\\u7CFB libsecret-1.so.0()(64bit)\\uFF0C\\u5B83\\u88AB\\u8F6F\\u4EF6\\u5305 git2u-2.16.5-1.ius.el7.x86_64 \\u9700\\u8981\\n--> \\u6B63\\u5728\\u68C0\\u67E5\\u4E8B\\u52A1\\n---> \\u8F6F\\u4EF6\\u5305 git2u-core.x86_64.0.2.16.5-1.ius.el7 \\u5C06\\u88AB \\u5B89\\u88C5\\n---> \\u8F6F\\u4EF6\\u5305 git2u-core-doc.noarch.0.2.16.5-1.ius.el7 \\u5C06\\u88AB \\u5B89\\u88C5\\n---> \\u8F6F\\u4EF6\\u5305 git2u-perl-Git.noarch.0.2.16.5-1.ius.el7 \\u5C06\\u88AB \\u5B89\\u88C5\\n---> \\u8F6F\\u4EF6\\u5305 libsecret.x86_64.0.0.18.6-1.el7 \\u5C06\\u88AB \\u5B89\\u88C5\\n--> \\u89E3\\u51B3\\u4F9D\\u8D56\\u5173\\u7CFB\\u5B8C\\u6210\\n\\n\\u4F9D\\u8D56\\u5173\\u7CFB\\u89E3\\u51B3\\n\\n==========================================================\\n Package         \\u67B6\\u6784    \\u7248\\u672C                 \\u6E90     \\u5927\\u5C0F\\n==========================================================\\n\\u6B63\\u5728\\u5B89\\u88C5:\\n git2u           x86_64  2.16.5-1.ius.el7     ius   1.1 M\\n\\u4E3A\\u4F9D\\u8D56\\u800C\\u5B89\\u88C5:\\n git2u-core      x86_64  2.16.5-1.ius.el7     ius   5.5 M\\n git2u-core-doc  noarch  2.16.5-1.ius.el7     ius   2.4 M\\n git2u-perl-Git  noarch  2.16.5-1.ius.el7     ius    68 k\\n libsecret       x86_64  0.18.6-1.el7         base  153 k\\n\\n\\u4E8B\\u52A1\\u6982\\u8981\\n==========================================================\\n\\u5B89\\u88C5  1 \\u8F6F\\u4EF6\\u5305 (+4 \\u4F9D\\u8D56\\u8F6F\\u4EF6\\u5305)\\n\\n\\u603B\\u4E0B\\u8F7D\\u91CF\\uFF1A9.2 M\\n\\u5B89\\u88C5\\u5927\\u5C0F\\uFF1A42 M\\nDownloading packages:\\n\\u8B66\\u544A\\uFF1A/var/cache/yum/x86_64/7/ius/packages/git2u-2.16.5-1.ius.el7.x86_64.rpm: \\u5934V4 RSA/SHA256 Signature, \\u5BC6\\u94A5 ID 4b274df2: NOKEY\\ngit2u-2.16.5-1.ius.el7.x86_64.rpm \\u7684\\u516C\\u94A5\\u5C1A\\u672A\\u5B89\\u88C5\\n(1/5): git2u-2.16.5-1.ius.el7.x86_64 | 1.1 MB   00:02     \\n(2/5): git2u-core-doc-2.16.5-1.ius.e | 2.4 MB   00:00     \\n(3/5): git2u-core-2.16.5-1.ius.el7.x | 5.5 MB   00:03     \\n(4/5): libsecret-0.18.6-1.el7.x86_64 | 153 kB   00:00     \\n(5/5): git2u-perl-Git-2.16.5-1.ius.e |  68 kB   00:00     \\n----------------------------------------------------------\\n\\u603B\\u8BA1                         2.6 MB/s | 9.2 MB  00:03     \\n\\u4ECE file:///etc/pki/rpm-gpg/RPM-GPG-KEY-IUS-7 \\u68C0\\u7D22\\u5BC6\\u94A5\\n\\u5BFC\\u5165 GPG key 0x4B274DF2:\\n \\u7528\\u6237ID     : \\\"IUS (7) <dev@ius.io>\\\"\\n \\u6307\\u7EB9       : c958 7a09 a11f d706 4f0c a0f4 e558 0725 4b27 4df2\\n \\u8F6F\\u4EF6\\u5305     : ius-release-2-1.el7.ius.noarch (installed)\\n \\u6765\\u81EA       : /etc/pki/rpm-gpg/RPM-GPG-KEY-IUS-7\\nRunning transaction check\\nRunning transaction test\\nTransaction test succeeded\\nRunning transaction\\n  \\u6B63\\u5728\\u5B89\\u88C5    : git2u-core-2.16.5-1.ius.el7.x86_64    1/5 \\n  \\u6B63\\u5728\\u5B89\\u88C5    : git2u-core-doc-2.16.5-1.ius.el7.noa   2/5 \\n  \\u6B63\\u5728\\u5B89\\u88C5    : libsecret-0.18.6-1.el7.x86_64         3/5 \\n  \\u6B63\\u5728\\u5B89\\u88C5    : git2u-perl-Git-2.16.5-1.ius.el7.noa   4/5 \\n  \\u6B63\\u5728\\u5B89\\u88C5    : git2u-2.16.5-1.ius.el7.x86_64         5/5 \\n  \\u9A8C\\u8BC1\\u4E2D      : git2u-2.16.5-1.ius.el7.x86_64         1/5 \\n  \\u9A8C\\u8BC1\\u4E2D      : git2u-core-doc-2.16.5-1.ius.el7.noa   2/5 \\n  \\u9A8C\\u8BC1\\u4E2D      : git2u-core-2.16.5-1.ius.el7.x86_64    3/5 \\n  \\u9A8C\\u8BC1\\u4E2D      : git2u-perl-Git-2.16.5-1.ius.el7.noa   4/5 \\n  \\u9A8C\\u8BC1\\u4E2D      : libsecret-0.18.6-1.el7.x86_64         5/5 \\n\\n\\u5DF2\\u5B89\\u88C5:\\n  git2u.x86_64 0:2.16.5-1.ius.el7                         \\n\\n\\u4F5C\\u4E3A\\u4F9D\\u8D56\\u88AB\\u5B89\\u88C5:\\n  git2u-core.x86_64 0:2.16.5-1.ius.el7                    \\n  git2u-core-doc.noarch 0:2.16.5-1.ius.el7                \\n  git2u-perl-Git.noarch 0:2.16.5-1.ius.el7                \\n  libsecret.x86_64 0:0.18.6-1.el7                         \\n\\n\\u5B8C\\u6BD5\\uFF01\\n                                                          \\nroot@izwz957qhjacaocedubzjjz /tmp/installGit   [20:44:22] \\n> # git version                                       \\n\\ngit version 2.16.5\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u611F\\u8C22\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.cnblogs.com/jhxxb/p/10571227.html\"\n  }, \"https://www.cnblogs.com/jhxxb/p/10571227.html\"))));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"使用yum最多只能安装到1.8，版本太旧了，下载源码手动编译安装？先不说国内下载官网包2kB/s的速度，就是下载下来了编译也麻烦啊，包管理是吃干饭的嘛？ 其实只要换个源，重新下载就好了 先卸载旧版 添加新源后安装新版 检验 最后附带我的安装过程 感谢 https://www.cnblogs.com/jhxxb/p…","frontmatter":{"date":"2020-12-08 13:13","title":"CentOS使用Yum升级Git到2.1x新版本","draft":false}},{"id":"1090ca10-35e7-5042-8f26-3f89086ccdfb","slug":"posts/code/cookie-session-login","rawBody":"---\ntitle: \"Cookie、Session是如何保持登录状态的？\"\ndate: 2020-12-08T21:05:07+08:00\ncategories: [\"code\"]\ntags: [\"cookie\",\"session\",\"login\",\"http\"]\ndraft: false\n---\n\n> 无论是web应用还是原生app应用，只要涉及网络连接，基本就离不开登录注册，我们注册完成后登录，这个状态就被保持下来了，我们下次打开app，应用就已经处于登录状态了，不需要我们重复登录，非常人性化，感觉服务器好像会“记得”我们每一个人一样，“记得”你来过，就不再要求你登录了。但其实计算机在这方面是很傻的，他不是自发“记得”我们的，这篇文章就来聊聊登录状态的保持是怎么实现的。\n\n### HTTP协议\n\n要弄明白下面说的东西，就得先了解一下HTTP协议，繁琐的概念就不多赘述了，这里主要注意一点，**HTTP协议是无状态的**，什么叫无状态？我们从一个故事讲起：\n>你去一家水果店买水果，你看到他们的桃子很鲜美，于是你大赞了老板的桃子后并买了一斤。你回家尝了桃子后觉得非常好吃，你决定第二天继续购买。当你第二天开开心心的过来找老板，跟他说“你家的水果真的很好吃，再来一斤我昨天买的那个水果”，但是发现老板并不知道你昨天买过什么，于是你非常生气，跟老板说“我昨天还夸了很久你的水果，你怎么就不记得了？”一顿理论后你发现老板始终不记得你昨天干过什么事，最后你只好跟老板表明要买一斤桃子，交易后灰溜溜地离开。\n\n这个故事中的老板就是无状态的，对他来说，他只知道某个人要买什么东西，给了多少钱，要买什么水果，要找多少钱，对于过程中的其它信息如是“谁”来买，他不会记得，他只会针对买卖本身进行处理。\n\n### HTTP为什么无状态？\n\n- 首先什么是无状态？\n无状态就意味着每个请求之间的不会直接地相互影响，对于每个请求，同样的请求参数就会得到同样的结果。\n\n- 回到HTTP协议中：\n最初的需求是请求HTML界面显示出静态网站，并不如现在那么复杂丰富，用户A点击某个网址浏览到的页面和用户B点击同样网址浏览到的页面是完全一模一样的，也就是服务器并不会对每个不同的人有特殊处理，服务器只对请求负责，不对发起请求的人负责。因此在HTTP设计中，每个请求都是独立的，每个请求中都包含了请求的所有数据，服务器只对请求和请求中携带的信息进行处理后返回特定结果。就如上面的那个水果店，老板只根据要买什么水果，水果多少钱，给了多少钱，进行处理，如果你跟他说你昨天与他交谈如何，他无动于衷，因为他完全不会记得这些事情，他完全不记得你曾来过。\n\n### HTTP如何保存登录状态？\n\n>前面说到，HTTP是无状态的，每个请求之间的不会直接地相互影响。\n\n当我**第一次调用用户名密码验证接口**的时候，我需要输入账号、密码，服务器收到请求之后，就会根据账号去数据库取你的密码和你输入的密码进行比对，然后返回一个“密码正确”或“密码错误”。而问题在于当我**第二次访问这个接口**的时候，服务器依旧会执行他的职能：收到我发送的账号和密码，然后去数据库取数据进行比对后返回比对结果，对于服务器来说，**每个请求不过是做了类似1+1是否等于2的判断然后返回结果而已**。\n\n**我想要服务器能够记住我已经调用过一次登录接口并且以及成功了这个状态，应该怎么办？**\n\n我们可以很自然的想到，服务器不知道我们登录过的原因是因为没有**记下来**，要保持登录状态，只要让服务器记下来就可以了。我们可以在服务器专门设置一个存储，每次只要我验证账号和密码成功，就在这个存储里面存下“JabinGP登录成功”（这个JabinGP是用户名），这样我们服务器就记得JabinGP登录过了。\n\n现在服务器已经知道JabinGP登录过了，但是这就够了吗？不够，因为HTTP请求并不会自动标明“这是JabinGP发起的请求”，所以我们还要做点工作让服务器能知道“这是JabinGP发起的请求”，然后服务器才好去存储下来的登录状态里面找“JabinGP登录成功”这个标志。怎么做？我们可以在调用请求的时候把自己的用户名加进请求的参数中，比如Get请求的URl参数、Post请求的请求Body中，这样服务器就可以根据我们的用户名判断我们有没有登录过了。\n\n_这样我们就初步的把登录状态保存了下来，其实这样的验证非常粗糙，所以基于这个思想，产生了下面的技术。_\n\n### 什么是Cookie？\n\n有很多品牌的Cookie，比如说蓝罐，广州酒家......什么？哦哦不好意思我搞错了，这个才是Cookie：Cookie就是存储在客户端的一小段数据，它可以存在硬盘中（永久Cookie），也可以存在内存中（临时Cookie）\n\n### 什么是Session？\n\nSession是指服务器为某个会话开启的一段独特的存储空间（会话是指一个终端用户与交互系统进行通讯的过程，比如说我先登录，再查看我的邮箱内容，这个过程就是一个会话），一个Session用唯一的SessionId对应一段存储空间。\n\n### Cookie和Session是怎么用的？\n\n首先从概念上，Cookie和Session都是用来存东西的，问题在于它们都用来存什么，以及它们都做了什么？\n结合前面分析：\n\n- Cookie的出现，代替了手动设置标识的步骤，因为我们可以把标识设置在Cookie里面，设置了Cookie后，Cookie就存在了，下次请求Cookie就会自动发送给服务器，这样我们就不用给每个请求都很麻烦地手动设置一个标识（比如前面分析中的用户名）。\n- Session其实就是代替了在服务器存储状态的步骤，SessionId可以对应一段存储空间，这段空间对每个会话都是唯一的（比如我登录后，就产生了一个会话，也产生了一段存储空间，这段存储空间只被我当前的登录状态下的活动所使用，别人是用不到的），这样就可以确保每个登录状态都有对应的一小段存储空间来写入一些中间过程的数据。\n\n### Cookie和Session的关系？\n\n看了上面的Cookie和Session的解释，以及Cookie和Session的使用，就可以发现它们两个其实完全不冲突，甚至这两者是需要相互配合的，因为Cookie是在客户端的存储，Session是在服务端的存储，Session的存储需要SessionId来一一对应，这样才不会出现xxx获得了JabinGP的登录状态然后用JabinGP的钱买东西这样的情况，SessionId则需要通过Cookie保存在用户客户端中，客户端通过保存在Cookie的SessionId来标识自己，表明“我就是JabinGP”。\n\n到这里差不多就简单介绍完Cookie和Session以及登录状态的保持了，以上都是个人理解，用于个人学习记录，如有错误，请评论指正。\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Cookie、Session是如何保持登录状态的？\",\n  \"date\": \"2020-12-08T13:05:07.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"cookie\", \"session\", \"login\", \"http\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u65E0\\u8BBA\\u662Fweb\\u5E94\\u7528\\u8FD8\\u662F\\u539F\\u751Fapp\\u5E94\\u7528\\uFF0C\\u53EA\\u8981\\u6D89\\u53CA\\u7F51\\u7EDC\\u8FDE\\u63A5\\uFF0C\\u57FA\\u672C\\u5C31\\u79BB\\u4E0D\\u5F00\\u767B\\u5F55\\u6CE8\\u518C\\uFF0C\\u6211\\u4EEC\\u6CE8\\u518C\\u5B8C\\u6210\\u540E\\u767B\\u5F55\\uFF0C\\u8FD9\\u4E2A\\u72B6\\u6001\\u5C31\\u88AB\\u4FDD\\u6301\\u4E0B\\u6765\\u4E86\\uFF0C\\u6211\\u4EEC\\u4E0B\\u6B21\\u6253\\u5F00app\\uFF0C\\u5E94\\u7528\\u5C31\\u5DF2\\u7ECF\\u5904\\u4E8E\\u767B\\u5F55\\u72B6\\u6001\\u4E86\\uFF0C\\u4E0D\\u9700\\u8981\\u6211\\u4EEC\\u91CD\\u590D\\u767B\\u5F55\\uFF0C\\u975E\\u5E38\\u4EBA\\u6027\\u5316\\uFF0C\\u611F\\u89C9\\u670D\\u52A1\\u5668\\u597D\\u50CF\\u4F1A\\u201C\\u8BB0\\u5F97\\u201D\\u6211\\u4EEC\\u6BCF\\u4E00\\u4E2A\\u4EBA\\u4E00\\u6837\\uFF0C\\u201C\\u8BB0\\u5F97\\u201D\\u4F60\\u6765\\u8FC7\\uFF0C\\u5C31\\u4E0D\\u518D\\u8981\\u6C42\\u4F60\\u767B\\u5F55\\u4E86\\u3002\\u4F46\\u5176\\u5B9E\\u8BA1\\u7B97\\u673A\\u5728\\u8FD9\\u65B9\\u9762\\u662F\\u5F88\\u50BB\\u7684\\uFF0C\\u4ED6\\u4E0D\\u662F\\u81EA\\u53D1\\u201C\\u8BB0\\u5F97\\u201D\\u6211\\u4EEC\\u7684\\uFF0C\\u8FD9\\u7BC7\\u6587\\u7AE0\\u5C31\\u6765\\u804A\\u804A\\u767B\\u5F55\\u72B6\\u6001\\u7684\\u4FDD\\u6301\\u662F\\u600E\\u4E48\\u5B9E\\u73B0\\u7684\\u3002\")), mdx(\"h3\", null, \"HTTP\\u534F\\u8BAE\"), mdx(\"p\", null, \"\\u8981\\u5F04\\u660E\\u767D\\u4E0B\\u9762\\u8BF4\\u7684\\u4E1C\\u897F\\uFF0C\\u5C31\\u5F97\\u5148\\u4E86\\u89E3\\u4E00\\u4E0BHTTP\\u534F\\u8BAE\\uFF0C\\u7E41\\u7410\\u7684\\u6982\\u5FF5\\u5C31\\u4E0D\\u591A\\u8D58\\u8FF0\\u4E86\\uFF0C\\u8FD9\\u91CC\\u4E3B\\u8981\\u6CE8\\u610F\\u4E00\\u70B9\\uFF0C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"HTTP\\u534F\\u8BAE\\u662F\\u65E0\\u72B6\\u6001\\u7684\"), \"\\uFF0C\\u4EC0\\u4E48\\u53EB\\u65E0\\u72B6\\u6001\\uFF1F\\u6211\\u4EEC\\u4ECE\\u4E00\\u4E2A\\u6545\\u4E8B\\u8BB2\\u8D77\\uFF1A\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u4F60\\u53BB\\u4E00\\u5BB6\\u6C34\\u679C\\u5E97\\u4E70\\u6C34\\u679C\\uFF0C\\u4F60\\u770B\\u5230\\u4ED6\\u4EEC\\u7684\\u6843\\u5B50\\u5F88\\u9C9C\\u7F8E\\uFF0C\\u4E8E\\u662F\\u4F60\\u5927\\u8D5E\\u4E86\\u8001\\u677F\\u7684\\u6843\\u5B50\\u540E\\u5E76\\u4E70\\u4E86\\u4E00\\u65A4\\u3002\\u4F60\\u56DE\\u5BB6\\u5C1D\\u4E86\\u6843\\u5B50\\u540E\\u89C9\\u5F97\\u975E\\u5E38\\u597D\\u5403\\uFF0C\\u4F60\\u51B3\\u5B9A\\u7B2C\\u4E8C\\u5929\\u7EE7\\u7EED\\u8D2D\\u4E70\\u3002\\u5F53\\u4F60\\u7B2C\\u4E8C\\u5929\\u5F00\\u5F00\\u5FC3\\u5FC3\\u7684\\u8FC7\\u6765\\u627E\\u8001\\u677F\\uFF0C\\u8DDF\\u4ED6\\u8BF4\\u201C\\u4F60\\u5BB6\\u7684\\u6C34\\u679C\\u771F\\u7684\\u5F88\\u597D\\u5403\\uFF0C\\u518D\\u6765\\u4E00\\u65A4\\u6211\\u6628\\u5929\\u4E70\\u7684\\u90A3\\u4E2A\\u6C34\\u679C\\u201D\\uFF0C\\u4F46\\u662F\\u53D1\\u73B0\\u8001\\u677F\\u5E76\\u4E0D\\u77E5\\u9053\\u4F60\\u6628\\u5929\\u4E70\\u8FC7\\u4EC0\\u4E48\\uFF0C\\u4E8E\\u662F\\u4F60\\u975E\\u5E38\\u751F\\u6C14\\uFF0C\\u8DDF\\u8001\\u677F\\u8BF4\\u201C\\u6211\\u6628\\u5929\\u8FD8\\u5938\\u4E86\\u5F88\\u4E45\\u4F60\\u7684\\u6C34\\u679C\\uFF0C\\u4F60\\u600E\\u4E48\\u5C31\\u4E0D\\u8BB0\\u5F97\\u4E86\\uFF1F\\u201D\\u4E00\\u987F\\u7406\\u8BBA\\u540E\\u4F60\\u53D1\\u73B0\\u8001\\u677F\\u59CB\\u7EC8\\u4E0D\\u8BB0\\u5F97\\u4F60\\u6628\\u5929\\u5E72\\u8FC7\\u4EC0\\u4E48\\u4E8B\\uFF0C\\u6700\\u540E\\u4F60\\u53EA\\u597D\\u8DDF\\u8001\\u677F\\u8868\\u660E\\u8981\\u4E70\\u4E00\\u65A4\\u6843\\u5B50\\uFF0C\\u4EA4\\u6613\\u540E\\u7070\\u6E9C\\u6E9C\\u5730\\u79BB\\u5F00\\u3002\")), mdx(\"p\", null, \"\\u8FD9\\u4E2A\\u6545\\u4E8B\\u4E2D\\u7684\\u8001\\u677F\\u5C31\\u662F\\u65E0\\u72B6\\u6001\\u7684\\uFF0C\\u5BF9\\u4ED6\\u6765\\u8BF4\\uFF0C\\u4ED6\\u53EA\\u77E5\\u9053\\u67D0\\u4E2A\\u4EBA\\u8981\\u4E70\\u4EC0\\u4E48\\u4E1C\\u897F\\uFF0C\\u7ED9\\u4E86\\u591A\\u5C11\\u94B1\\uFF0C\\u8981\\u4E70\\u4EC0\\u4E48\\u6C34\\u679C\\uFF0C\\u8981\\u627E\\u591A\\u5C11\\u94B1\\uFF0C\\u5BF9\\u4E8E\\u8FC7\\u7A0B\\u4E2D\\u7684\\u5176\\u5B83\\u4FE1\\u606F\\u5982\\u662F\\u201C\\u8C01\\u201D\\u6765\\u4E70\\uFF0C\\u4ED6\\u4E0D\\u4F1A\\u8BB0\\u5F97\\uFF0C\\u4ED6\\u53EA\\u4F1A\\u9488\\u5BF9\\u4E70\\u5356\\u672C\\u8EAB\\u8FDB\\u884C\\u5904\\u7406\\u3002\"), mdx(\"h3\", null, \"HTTP\\u4E3A\\u4EC0\\u4E48\\u65E0\\u72B6\\u6001\\uFF1F\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u9996\\u5148\\u4EC0\\u4E48\\u662F\\u65E0\\u72B6\\u6001\\uFF1F\\n\\u65E0\\u72B6\\u6001\\u5C31\\u610F\\u5473\\u7740\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u4E4B\\u95F4\\u7684\\u4E0D\\u4F1A\\u76F4\\u63A5\\u5730\\u76F8\\u4E92\\u5F71\\u54CD\\uFF0C\\u5BF9\\u4E8E\\u6BCF\\u4E2A\\u8BF7\\u6C42\\uFF0C\\u540C\\u6837\\u7684\\u8BF7\\u6C42\\u53C2\\u6570\\u5C31\\u4F1A\\u5F97\\u5230\\u540C\\u6837\\u7684\\u7ED3\\u679C\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u56DE\\u5230HTTP\\u534F\\u8BAE\\u4E2D\\uFF1A\\n\\u6700\\u521D\\u7684\\u9700\\u6C42\\u662F\\u8BF7\\u6C42HTML\\u754C\\u9762\\u663E\\u793A\\u51FA\\u9759\\u6001\\u7F51\\u7AD9\\uFF0C\\u5E76\\u4E0D\\u5982\\u73B0\\u5728\\u90A3\\u4E48\\u590D\\u6742\\u4E30\\u5BCC\\uFF0C\\u7528\\u6237A\\u70B9\\u51FB\\u67D0\\u4E2A\\u7F51\\u5740\\u6D4F\\u89C8\\u5230\\u7684\\u9875\\u9762\\u548C\\u7528\\u6237B\\u70B9\\u51FB\\u540C\\u6837\\u7F51\\u5740\\u6D4F\\u89C8\\u5230\\u7684\\u9875\\u9762\\u662F\\u5B8C\\u5168\\u4E00\\u6A21\\u4E00\\u6837\\u7684\\uFF0C\\u4E5F\\u5C31\\u662F\\u670D\\u52A1\\u5668\\u5E76\\u4E0D\\u4F1A\\u5BF9\\u6BCF\\u4E2A\\u4E0D\\u540C\\u7684\\u4EBA\\u6709\\u7279\\u6B8A\\u5904\\u7406\\uFF0C\\u670D\\u52A1\\u5668\\u53EA\\u5BF9\\u8BF7\\u6C42\\u8D1F\\u8D23\\uFF0C\\u4E0D\\u5BF9\\u53D1\\u8D77\\u8BF7\\u6C42\\u7684\\u4EBA\\u8D1F\\u8D23\\u3002\\u56E0\\u6B64\\u5728HTTP\\u8BBE\\u8BA1\\u4E2D\\uFF0C\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u90FD\\u662F\\u72EC\\u7ACB\\u7684\\uFF0C\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u4E2D\\u90FD\\u5305\\u542B\\u4E86\\u8BF7\\u6C42\\u7684\\u6240\\u6709\\u6570\\u636E\\uFF0C\\u670D\\u52A1\\u5668\\u53EA\\u5BF9\\u8BF7\\u6C42\\u548C\\u8BF7\\u6C42\\u4E2D\\u643A\\u5E26\\u7684\\u4FE1\\u606F\\u8FDB\\u884C\\u5904\\u7406\\u540E\\u8FD4\\u56DE\\u7279\\u5B9A\\u7ED3\\u679C\\u3002\\u5C31\\u5982\\u4E0A\\u9762\\u7684\\u90A3\\u4E2A\\u6C34\\u679C\\u5E97\\uFF0C\\u8001\\u677F\\u53EA\\u6839\\u636E\\u8981\\u4E70\\u4EC0\\u4E48\\u6C34\\u679C\\uFF0C\\u6C34\\u679C\\u591A\\u5C11\\u94B1\\uFF0C\\u7ED9\\u4E86\\u591A\\u5C11\\u94B1\\uFF0C\\u8FDB\\u884C\\u5904\\u7406\\uFF0C\\u5982\\u679C\\u4F60\\u8DDF\\u4ED6\\u8BF4\\u4F60\\u6628\\u5929\\u4E0E\\u4ED6\\u4EA4\\u8C08\\u5982\\u4F55\\uFF0C\\u4ED6\\u65E0\\u52A8\\u4E8E\\u8877\\uFF0C\\u56E0\\u4E3A\\u4ED6\\u5B8C\\u5168\\u4E0D\\u4F1A\\u8BB0\\u5F97\\u8FD9\\u4E9B\\u4E8B\\u60C5\\uFF0C\\u4ED6\\u5B8C\\u5168\\u4E0D\\u8BB0\\u5F97\\u4F60\\u66FE\\u6765\\u8FC7\\u3002\"))), mdx(\"h3\", null, \"HTTP\\u5982\\u4F55\\u4FDD\\u5B58\\u767B\\u5F55\\u72B6\\u6001\\uFF1F\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u524D\\u9762\\u8BF4\\u5230\\uFF0CHTTP\\u662F\\u65E0\\u72B6\\u6001\\u7684\\uFF0C\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u4E4B\\u95F4\\u7684\\u4E0D\\u4F1A\\u76F4\\u63A5\\u5730\\u76F8\\u4E92\\u5F71\\u54CD\\u3002\")), mdx(\"p\", null, \"\\u5F53\\u6211\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u7B2C\\u4E00\\u6B21\\u8C03\\u7528\\u7528\\u6237\\u540D\\u5BC6\\u7801\\u9A8C\\u8BC1\\u63A5\\u53E3\"), \"\\u7684\\u65F6\\u5019\\uFF0C\\u6211\\u9700\\u8981\\u8F93\\u5165\\u8D26\\u53F7\\u3001\\u5BC6\\u7801\\uFF0C\\u670D\\u52A1\\u5668\\u6536\\u5230\\u8BF7\\u6C42\\u4E4B\\u540E\\uFF0C\\u5C31\\u4F1A\\u6839\\u636E\\u8D26\\u53F7\\u53BB\\u6570\\u636E\\u5E93\\u53D6\\u4F60\\u7684\\u5BC6\\u7801\\u548C\\u4F60\\u8F93\\u5165\\u7684\\u5BC6\\u7801\\u8FDB\\u884C\\u6BD4\\u5BF9\\uFF0C\\u7136\\u540E\\u8FD4\\u56DE\\u4E00\\u4E2A\\u201C\\u5BC6\\u7801\\u6B63\\u786E\\u201D\\u6216\\u201C\\u5BC6\\u7801\\u9519\\u8BEF\\u201D\\u3002\\u800C\\u95EE\\u9898\\u5728\\u4E8E\\u5F53\\u6211\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u7B2C\\u4E8C\\u6B21\\u8BBF\\u95EE\\u8FD9\\u4E2A\\u63A5\\u53E3\"), \"\\u7684\\u65F6\\u5019\\uFF0C\\u670D\\u52A1\\u5668\\u4F9D\\u65E7\\u4F1A\\u6267\\u884C\\u4ED6\\u7684\\u804C\\u80FD\\uFF1A\\u6536\\u5230\\u6211\\u53D1\\u9001\\u7684\\u8D26\\u53F7\\u548C\\u5BC6\\u7801\\uFF0C\\u7136\\u540E\\u53BB\\u6570\\u636E\\u5E93\\u53D6\\u6570\\u636E\\u8FDB\\u884C\\u6BD4\\u5BF9\\u540E\\u8FD4\\u56DE\\u6BD4\\u5BF9\\u7ED3\\u679C\\uFF0C\\u5BF9\\u4E8E\\u670D\\u52A1\\u5668\\u6765\\u8BF4\\uFF0C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u4E0D\\u8FC7\\u662F\\u505A\\u4E86\\u7C7B\\u4F3C1+1\\u662F\\u5426\\u7B49\\u4E8E2\\u7684\\u5224\\u65AD\\u7136\\u540E\\u8FD4\\u56DE\\u7ED3\\u679C\\u800C\\u5DF2\"), \"\\u3002\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u6211\\u60F3\\u8981\\u670D\\u52A1\\u5668\\u80FD\\u591F\\u8BB0\\u4F4F\\u6211\\u5DF2\\u7ECF\\u8C03\\u7528\\u8FC7\\u4E00\\u6B21\\u767B\\u5F55\\u63A5\\u53E3\\u5E76\\u4E14\\u4EE5\\u53CA\\u6210\\u529F\\u4E86\\u8FD9\\u4E2A\\u72B6\\u6001\\uFF0C\\u5E94\\u8BE5\\u600E\\u4E48\\u529E\\uFF1F\")), mdx(\"p\", null, \"\\u6211\\u4EEC\\u53EF\\u4EE5\\u5F88\\u81EA\\u7136\\u7684\\u60F3\\u5230\\uFF0C\\u670D\\u52A1\\u5668\\u4E0D\\u77E5\\u9053\\u6211\\u4EEC\\u767B\\u5F55\\u8FC7\\u7684\\u539F\\u56E0\\u662F\\u56E0\\u4E3A\\u6CA1\\u6709\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u8BB0\\u4E0B\\u6765\"), \"\\uFF0C\\u8981\\u4FDD\\u6301\\u767B\\u5F55\\u72B6\\u6001\\uFF0C\\u53EA\\u8981\\u8BA9\\u670D\\u52A1\\u5668\\u8BB0\\u4E0B\\u6765\\u5C31\\u53EF\\u4EE5\\u4E86\\u3002\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\\u670D\\u52A1\\u5668\\u4E13\\u95E8\\u8BBE\\u7F6E\\u4E00\\u4E2A\\u5B58\\u50A8\\uFF0C\\u6BCF\\u6B21\\u53EA\\u8981\\u6211\\u9A8C\\u8BC1\\u8D26\\u53F7\\u548C\\u5BC6\\u7801\\u6210\\u529F\\uFF0C\\u5C31\\u5728\\u8FD9\\u4E2A\\u5B58\\u50A8\\u91CC\\u9762\\u5B58\\u4E0B\\u201CJabinGP\\u767B\\u5F55\\u6210\\u529F\\u201D\\uFF08\\u8FD9\\u4E2AJabinGP\\u662F\\u7528\\u6237\\u540D\\uFF09\\uFF0C\\u8FD9\\u6837\\u6211\\u4EEC\\u670D\\u52A1\\u5668\\u5C31\\u8BB0\\u5F97JabinGP\\u767B\\u5F55\\u8FC7\\u4E86\\u3002\"), mdx(\"p\", null, \"\\u73B0\\u5728\\u670D\\u52A1\\u5668\\u5DF2\\u7ECF\\u77E5\\u9053JabinGP\\u767B\\u5F55\\u8FC7\\u4E86\\uFF0C\\u4F46\\u662F\\u8FD9\\u5C31\\u591F\\u4E86\\u5417\\uFF1F\\u4E0D\\u591F\\uFF0C\\u56E0\\u4E3AHTTP\\u8BF7\\u6C42\\u5E76\\u4E0D\\u4F1A\\u81EA\\u52A8\\u6807\\u660E\\u201C\\u8FD9\\u662FJabinGP\\u53D1\\u8D77\\u7684\\u8BF7\\u6C42\\u201D\\uFF0C\\u6240\\u4EE5\\u6211\\u4EEC\\u8FD8\\u8981\\u505A\\u70B9\\u5DE5\\u4F5C\\u8BA9\\u670D\\u52A1\\u5668\\u80FD\\u77E5\\u9053\\u201C\\u8FD9\\u662FJabinGP\\u53D1\\u8D77\\u7684\\u8BF7\\u6C42\\u201D\\uFF0C\\u7136\\u540E\\u670D\\u52A1\\u5668\\u624D\\u597D\\u53BB\\u5B58\\u50A8\\u4E0B\\u6765\\u7684\\u767B\\u5F55\\u72B6\\u6001\\u91CC\\u9762\\u627E\\u201CJabinGP\\u767B\\u5F55\\u6210\\u529F\\u201D\\u8FD9\\u4E2A\\u6807\\u5FD7\\u3002\\u600E\\u4E48\\u505A\\uFF1F\\u6211\\u4EEC\\u53EF\\u4EE5\\u5728\\u8C03\\u7528\\u8BF7\\u6C42\\u7684\\u65F6\\u5019\\u628A\\u81EA\\u5DF1\\u7684\\u7528\\u6237\\u540D\\u52A0\\u8FDB\\u8BF7\\u6C42\\u7684\\u53C2\\u6570\\u4E2D\\uFF0C\\u6BD4\\u5982Get\\u8BF7\\u6C42\\u7684URl\\u53C2\\u6570\\u3001Post\\u8BF7\\u6C42\\u7684\\u8BF7\\u6C42Body\\u4E2D\\uFF0C\\u8FD9\\u6837\\u670D\\u52A1\\u5668\\u5C31\\u53EF\\u4EE5\\u6839\\u636E\\u6211\\u4EEC\\u7684\\u7528\\u6237\\u540D\\u5224\\u65AD\\u6211\\u4EEC\\u6709\\u6CA1\\u6709\\u767B\\u5F55\\u8FC7\\u4E86\\u3002\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\u8FD9\\u6837\\u6211\\u4EEC\\u5C31\\u521D\\u6B65\\u7684\\u628A\\u767B\\u5F55\\u72B6\\u6001\\u4FDD\\u5B58\\u4E86\\u4E0B\\u6765\\uFF0C\\u5176\\u5B9E\\u8FD9\\u6837\\u7684\\u9A8C\\u8BC1\\u975E\\u5E38\\u7C97\\u7CD9\\uFF0C\\u6240\\u4EE5\\u57FA\\u4E8E\\u8FD9\\u4E2A\\u601D\\u60F3\\uFF0C\\u4EA7\\u751F\\u4E86\\u4E0B\\u9762\\u7684\\u6280\\u672F\\u3002\")), mdx(\"h3\", null, \"\\u4EC0\\u4E48\\u662FCookie\\uFF1F\"), mdx(\"p\", null, \"\\u6709\\u5F88\\u591A\\u54C1\\u724C\\u7684Cookie\\uFF0C\\u6BD4\\u5982\\u8BF4\\u84DD\\u7F50\\uFF0C\\u5E7F\\u5DDE\\u9152\\u5BB6......\\u4EC0\\u4E48\\uFF1F\\u54E6\\u54E6\\u4E0D\\u597D\\u610F\\u601D\\u6211\\u641E\\u9519\\u4E86\\uFF0C\\u8FD9\\u4E2A\\u624D\\u662FCookie\\uFF1ACookie\\u5C31\\u662F\\u5B58\\u50A8\\u5728\\u5BA2\\u6237\\u7AEF\\u7684\\u4E00\\u5C0F\\u6BB5\\u6570\\u636E\\uFF0C\\u5B83\\u53EF\\u4EE5\\u5B58\\u5728\\u786C\\u76D8\\u4E2D\\uFF08\\u6C38\\u4E45Cookie\\uFF09\\uFF0C\\u4E5F\\u53EF\\u4EE5\\u5B58\\u5728\\u5185\\u5B58\\u4E2D\\uFF08\\u4E34\\u65F6Cookie\\uFF09\"), mdx(\"h3\", null, \"\\u4EC0\\u4E48\\u662FSession\\uFF1F\"), mdx(\"p\", null, \"Session\\u662F\\u6307\\u670D\\u52A1\\u5668\\u4E3A\\u67D0\\u4E2A\\u4F1A\\u8BDD\\u5F00\\u542F\\u7684\\u4E00\\u6BB5\\u72EC\\u7279\\u7684\\u5B58\\u50A8\\u7A7A\\u95F4\\uFF08\\u4F1A\\u8BDD\\u662F\\u6307\\u4E00\\u4E2A\\u7EC8\\u7AEF\\u7528\\u6237\\u4E0E\\u4EA4\\u4E92\\u7CFB\\u7EDF\\u8FDB\\u884C\\u901A\\u8BAF\\u7684\\u8FC7\\u7A0B\\uFF0C\\u6BD4\\u5982\\u8BF4\\u6211\\u5148\\u767B\\u5F55\\uFF0C\\u518D\\u67E5\\u770B\\u6211\\u7684\\u90AE\\u7BB1\\u5185\\u5BB9\\uFF0C\\u8FD9\\u4E2A\\u8FC7\\u7A0B\\u5C31\\u662F\\u4E00\\u4E2A\\u4F1A\\u8BDD\\uFF09\\uFF0C\\u4E00\\u4E2ASession\\u7528\\u552F\\u4E00\\u7684SessionId\\u5BF9\\u5E94\\u4E00\\u6BB5\\u5B58\\u50A8\\u7A7A\\u95F4\\u3002\"), mdx(\"h3\", null, \"Cookie\\u548CSession\\u662F\\u600E\\u4E48\\u7528\\u7684\\uFF1F\"), mdx(\"p\", null, \"\\u9996\\u5148\\u4ECE\\u6982\\u5FF5\\u4E0A\\uFF0CCookie\\u548CSession\\u90FD\\u662F\\u7528\\u6765\\u5B58\\u4E1C\\u897F\\u7684\\uFF0C\\u95EE\\u9898\\u5728\\u4E8E\\u5B83\\u4EEC\\u90FD\\u7528\\u6765\\u5B58\\u4EC0\\u4E48\\uFF0C\\u4EE5\\u53CA\\u5B83\\u4EEC\\u90FD\\u505A\\u4E86\\u4EC0\\u4E48\\uFF1F\\n\\u7ED3\\u5408\\u524D\\u9762\\u5206\\u6790\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Cookie\\u7684\\u51FA\\u73B0\\uFF0C\\u4EE3\\u66FF\\u4E86\\u624B\\u52A8\\u8BBE\\u7F6E\\u6807\\u8BC6\\u7684\\u6B65\\u9AA4\\uFF0C\\u56E0\\u4E3A\\u6211\\u4EEC\\u53EF\\u4EE5\\u628A\\u6807\\u8BC6\\u8BBE\\u7F6E\\u5728Cookie\\u91CC\\u9762\\uFF0C\\u8BBE\\u7F6E\\u4E86Cookie\\u540E\\uFF0CCookie\\u5C31\\u5B58\\u5728\\u4E86\\uFF0C\\u4E0B\\u6B21\\u8BF7\\u6C42Cookie\\u5C31\\u4F1A\\u81EA\\u52A8\\u53D1\\u9001\\u7ED9\\u670D\\u52A1\\u5668\\uFF0C\\u8FD9\\u6837\\u6211\\u4EEC\\u5C31\\u4E0D\\u7528\\u7ED9\\u6BCF\\u4E2A\\u8BF7\\u6C42\\u90FD\\u5F88\\u9EBB\\u70E6\\u5730\\u624B\\u52A8\\u8BBE\\u7F6E\\u4E00\\u4E2A\\u6807\\u8BC6\\uFF08\\u6BD4\\u5982\\u524D\\u9762\\u5206\\u6790\\u4E2D\\u7684\\u7528\\u6237\\u540D\\uFF09\\u3002\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Session\\u5176\\u5B9E\\u5C31\\u662F\\u4EE3\\u66FF\\u4E86\\u5728\\u670D\\u52A1\\u5668\\u5B58\\u50A8\\u72B6\\u6001\\u7684\\u6B65\\u9AA4\\uFF0CSessionId\\u53EF\\u4EE5\\u5BF9\\u5E94\\u4E00\\u6BB5\\u5B58\\u50A8\\u7A7A\\u95F4\\uFF0C\\u8FD9\\u6BB5\\u7A7A\\u95F4\\u5BF9\\u6BCF\\u4E2A\\u4F1A\\u8BDD\\u90FD\\u662F\\u552F\\u4E00\\u7684\\uFF08\\u6BD4\\u5982\\u6211\\u767B\\u5F55\\u540E\\uFF0C\\u5C31\\u4EA7\\u751F\\u4E86\\u4E00\\u4E2A\\u4F1A\\u8BDD\\uFF0C\\u4E5F\\u4EA7\\u751F\\u4E86\\u4E00\\u6BB5\\u5B58\\u50A8\\u7A7A\\u95F4\\uFF0C\\u8FD9\\u6BB5\\u5B58\\u50A8\\u7A7A\\u95F4\\u53EA\\u88AB\\u6211\\u5F53\\u524D\\u7684\\u767B\\u5F55\\u72B6\\u6001\\u4E0B\\u7684\\u6D3B\\u52A8\\u6240\\u4F7F\\u7528\\uFF0C\\u522B\\u4EBA\\u662F\\u7528\\u4E0D\\u5230\\u7684\\uFF09\\uFF0C\\u8FD9\\u6837\\u5C31\\u53EF\\u4EE5\\u786E\\u4FDD\\u6BCF\\u4E2A\\u767B\\u5F55\\u72B6\\u6001\\u90FD\\u6709\\u5BF9\\u5E94\\u7684\\u4E00\\u5C0F\\u6BB5\\u5B58\\u50A8\\u7A7A\\u95F4\\u6765\\u5199\\u5165\\u4E00\\u4E9B\\u4E2D\\u95F4\\u8FC7\\u7A0B\\u7684\\u6570\\u636E\\u3002\")), mdx(\"h3\", null, \"Cookie\\u548CSession\\u7684\\u5173\\u7CFB\\uFF1F\"), mdx(\"p\", null, \"\\u770B\\u4E86\\u4E0A\\u9762\\u7684Cookie\\u548CSession\\u7684\\u89E3\\u91CA\\uFF0C\\u4EE5\\u53CACookie\\u548CSession\\u7684\\u4F7F\\u7528\\uFF0C\\u5C31\\u53EF\\u4EE5\\u53D1\\u73B0\\u5B83\\u4EEC\\u4E24\\u4E2A\\u5176\\u5B9E\\u5B8C\\u5168\\u4E0D\\u51B2\\u7A81\\uFF0C\\u751A\\u81F3\\u8FD9\\u4E24\\u8005\\u662F\\u9700\\u8981\\u76F8\\u4E92\\u914D\\u5408\\u7684\\uFF0C\\u56E0\\u4E3ACookie\\u662F\\u5728\\u5BA2\\u6237\\u7AEF\\u7684\\u5B58\\u50A8\\uFF0CSession\\u662F\\u5728\\u670D\\u52A1\\u7AEF\\u7684\\u5B58\\u50A8\\uFF0CSession\\u7684\\u5B58\\u50A8\\u9700\\u8981SessionId\\u6765\\u4E00\\u4E00\\u5BF9\\u5E94\\uFF0C\\u8FD9\\u6837\\u624D\\u4E0D\\u4F1A\\u51FA\\u73B0xxx\\u83B7\\u5F97\\u4E86JabinGP\\u7684\\u767B\\u5F55\\u72B6\\u6001\\u7136\\u540E\\u7528JabinGP\\u7684\\u94B1\\u4E70\\u4E1C\\u897F\\u8FD9\\u6837\\u7684\\u60C5\\u51B5\\uFF0CSessionId\\u5219\\u9700\\u8981\\u901A\\u8FC7Cookie\\u4FDD\\u5B58\\u5728\\u7528\\u6237\\u5BA2\\u6237\\u7AEF\\u4E2D\\uFF0C\\u5BA2\\u6237\\u7AEF\\u901A\\u8FC7\\u4FDD\\u5B58\\u5728Cookie\\u7684SessionId\\u6765\\u6807\\u8BC6\\u81EA\\u5DF1\\uFF0C\\u8868\\u660E\\u201C\\u6211\\u5C31\\u662FJabinGP\\u201D\\u3002\"), mdx(\"p\", null, \"\\u5230\\u8FD9\\u91CC\\u5DEE\\u4E0D\\u591A\\u5C31\\u7B80\\u5355\\u4ECB\\u7ECD\\u5B8CCookie\\u548CSession\\u4EE5\\u53CA\\u767B\\u5F55\\u72B6\\u6001\\u7684\\u4FDD\\u6301\\u4E86\\uFF0C\\u4EE5\\u4E0A\\u90FD\\u662F\\u4E2A\\u4EBA\\u7406\\u89E3\\uFF0C\\u7528\\u4E8E\\u4E2A\\u4EBA\\u5B66\\u4E60\\u8BB0\\u5F55\\uFF0C\\u5982\\u6709\\u9519\\u8BEF\\uFF0C\\u8BF7\\u8BC4\\u8BBA\\u6307\\u6B63\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"无论是web应用还是原生app应用，只要涉及网络连接，基本就离不开登录注册，我们注册完成后登录，这个状态就被保持下来了，我们下次打开app…","frontmatter":{"date":"2020-12-08 13:05","title":"Cookie、Session是如何保持登录状态的？","draft":false}},{"id":"8c5bc91f-023b-5b77-a833-1a40add72ca1","slug":"posts/code/docker-install-mongo","rawBody":"---\ntitle: \"Docker安装MongoDB\"\ndate: 2020-12-12T17:28:11+08:00\ncategories: [\"code\"]\ntags: [\"docker\", \"mongodb\"]\ndraft: false\n---\n\n## 拉取镜像\n\n```cmd\ndocker pull mongo:latest\n```\n\n## 运行镜像\n\n```cmd\ndocker run -itd --name mongo -p 27017:27017 mongo --auth\n```\n\n- --auth：Enables authorization to control user’s access to database resources and operations. When authorization is enabled, MongoDB requires all clients to authenticate themselves first in order to determine the access for the client.\nConfigure users via the mongo shell. If no users exist, the localhost interface will continue to have access to the database until you create the first user。\n\n## 进入容器添加用户\n\n进入容器并且直接运行mongo-shell，选择数据库为`admin`\n\n```cmd\ndocker exec -it mongo mongo admin\n```\n\n创建用户并尝试连接\n\n```cmd\ndb.createUser({ user:'admin',pwd:'123456',roles:[ { role:'userAdminAnyDatabase', db: 'admin'},\"readWriteAnyDatabase\"]});\ndb.auth('admin', '123456')\n```\n\n## 验证账户权限\n\n运行一些简单的指令来验证账户的有效性\n\n```cmd\n> show dbs\nadmin   0.000GB\nconfig  0.000GB\nlocal   0.000GB\n> show users\n{\n        \"_id\" : \"admin.admin\",\n        \"userId\" : UUID(\"dc5760ea-c8c1-4f40-af5b-7d9d53779842\"),\n        \"user\" : \"admin\",\n        \"db\" : \"admin\",\n        \"roles\" : [\n                {\n                        \"role\" : \"userAdminAnyDatabase\",\n                        \"db\" : \"admin\"\n                }\n        ],\n        \"mechanisms\" : [\n                \"SCRAM-SHA-1\",\n                \"SCRAM-SHA-256\"\n        ]\n}\n```\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Docker安装MongoDB\",\n  \"date\": \"2020-12-12T09:28:11.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"docker\", \"mongodb\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"\\u62C9\\u53D6\\u955C\\u50CF\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker pull mongo:latest\\n\")), mdx(\"h2\", null, \"\\u8FD0\\u884C\\u955C\\u50CF\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker run -itd --name mongo -p 27017:27017 mongo --auth\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"--auth\\uFF1AEnables authorization to control user\\u2019s access to database resources and operations. When authorization is enabled, MongoDB requires all clients to authenticate themselves first in order to determine the access for the client.\\nConfigure users via the mongo shell. If no users exist, the localhost interface will continue to have access to the database until you create the first user\\u3002\")), mdx(\"h2\", null, \"\\u8FDB\\u5165\\u5BB9\\u5668\\u6DFB\\u52A0\\u7528\\u6237\"), mdx(\"p\", null, \"\\u8FDB\\u5165\\u5BB9\\u5668\\u5E76\\u4E14\\u76F4\\u63A5\\u8FD0\\u884Cmongo-shell\\uFF0C\\u9009\\u62E9\\u6570\\u636E\\u5E93\\u4E3A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"admin\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker exec -it mongo mongo admin\\n\")), mdx(\"p\", null, \"\\u521B\\u5EFA\\u7528\\u6237\\u5E76\\u5C1D\\u8BD5\\u8FDE\\u63A5\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"db.createUser({ user:'admin',pwd:'123456',roles:[ { role:'userAdminAnyDatabase', db: 'admin'},\\\"readWriteAnyDatabase\\\"]});\\ndb.auth('admin', '123456')\\n\")), mdx(\"h2\", null, \"\\u9A8C\\u8BC1\\u8D26\\u6237\\u6743\\u9650\"), mdx(\"p\", null, \"\\u8FD0\\u884C\\u4E00\\u4E9B\\u7B80\\u5355\\u7684\\u6307\\u4EE4\\u6765\\u9A8C\\u8BC1\\u8D26\\u6237\\u7684\\u6709\\u6548\\u6027\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"> show dbs\\nadmin   0.000GB\\nconfig  0.000GB\\nlocal   0.000GB\\n> show users\\n{\\n        \\\"_id\\\" : \\\"admin.admin\\\",\\n        \\\"userId\\\" : UUID(\\\"dc5760ea-c8c1-4f40-af5b-7d9d53779842\\\"),\\n        \\\"user\\\" : \\\"admin\\\",\\n        \\\"db\\\" : \\\"admin\\\",\\n        \\\"roles\\\" : [\\n                {\\n                        \\\"role\\\" : \\\"userAdminAnyDatabase\\\",\\n                        \\\"db\\\" : \\\"admin\\\"\\n                }\\n        ],\\n        \\\"mechanisms\\\" : [\\n                \\\"SCRAM-SHA-1\\\",\\n                \\\"SCRAM-SHA-256\\\"\\n        ]\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"拉取镜像 运行镜像 --auth：Enables authorization to control user’s access to database resources and operations. When authorization is enabled, MongoDB requires all…","frontmatter":{"date":"2020-12-12 09:28","title":"Docker安装MongoDB","draft":false}},{"id":"837ba069-1052-53cf-8836-92aeb93562fc","slug":"posts/code/docker-install-redis","rawBody":"---\ntitle: \"docker安装redis、redis-cli测试连接、python api测试连接。\"\ndate: 2020-12-08T21:41:35+08:00\ncategories: [\"code\"]\ntags: [\"docker\", \"redis\", \"python\", \"redis-cli\"]\ndraft: false\n---\n\n## 拉取镜像、启动\n\n拉取镜像\n\n```cmd\ndocker pull redis\n```\n\n查看已有镜像\n\n```cmd\ndocker images\n```\n\n启动 docker\n\n```cmd\ndocker run -itd --name redis -p 6379:6379 redis\n```\n\n查看 docker 运行的容器状态\n\n```cmd\ndocker ps\n```\n\n## 测试使用\n\n### 在容器内部测试连接\n\n```cmd\ndocker exec -it redis /bin/bash\n```\n\n进入容器内部后\n\n```bash\nroot@2ff6e2c47742:/data# redis-cli\n127.0.0.1:6379> set username jabin\nOK\n127.0.0.1:6379> get username\n\"jabin\"\n127.0.0.1:6379>\n```\n\n### 在容器外部测试连接\n\nredis 容器绑定到了宿主主机的**6379**端口，因此可以认为 redis 跑在了本机的**6379**端口。\n\n#### 使用 redis-cli 连接\n\n如果本机（宿主机）安装了**redis-cli**，可以使用本机的**redis-cli**测试。\n\n```bash\n➜  Desktop redis-cli -h 127.0.0.1 -p 6379\n127.0.0.1:6379> get username\n\"jabin\"\n127.0.0.1:6379>\n```\n\n#### 使用 python 的 api 连接\n\n```py\nimport redis\n\nr = redis.StrictRedis(host='127.0.0.1', port=6379)\n\nprint(str(r.get(\"username\"), encoding=\"utf-8\"))\n```\n\n输出\n\n```cmd\njabin\n```\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"docker安装redis、redis-cli测试连接、python api测试连接。\",\n  \"date\": \"2020-12-08T13:41:35.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"docker\", \"redis\", \"python\", \"redis-cli\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"\\u62C9\\u53D6\\u955C\\u50CF\\u3001\\u542F\\u52A8\"), mdx(\"p\", null, \"\\u62C9\\u53D6\\u955C\\u50CF\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker pull redis\\n\")), mdx(\"p\", null, \"\\u67E5\\u770B\\u5DF2\\u6709\\u955C\\u50CF\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker images\\n\")), mdx(\"p\", null, \"\\u542F\\u52A8 docker\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker run -itd --name redis -p 6379:6379 redis\\n\")), mdx(\"p\", null, \"\\u67E5\\u770B docker \\u8FD0\\u884C\\u7684\\u5BB9\\u5668\\u72B6\\u6001\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker ps\\n\")), mdx(\"h2\", null, \"\\u6D4B\\u8BD5\\u4F7F\\u7528\"), mdx(\"h3\", null, \"\\u5728\\u5BB9\\u5668\\u5185\\u90E8\\u6D4B\\u8BD5\\u8FDE\\u63A5\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker exec -it redis /bin/bash\\n\")), mdx(\"p\", null, \"\\u8FDB\\u5165\\u5BB9\\u5668\\u5185\\u90E8\\u540E\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"root@2ff6e2c47742:/data# redis-cli\\n127.0.0.1:6379> set username jabin\\nOK\\n127.0.0.1:6379> get username\\n\\\"jabin\\\"\\n127.0.0.1:6379>\\n\")), mdx(\"h3\", null, \"\\u5728\\u5BB9\\u5668\\u5916\\u90E8\\u6D4B\\u8BD5\\u8FDE\\u63A5\"), mdx(\"p\", null, \"redis \\u5BB9\\u5668\\u7ED1\\u5B9A\\u5230\\u4E86\\u5BBF\\u4E3B\\u4E3B\\u673A\\u7684\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"6379\"), \"\\u7AEF\\u53E3\\uFF0C\\u56E0\\u6B64\\u53EF\\u4EE5\\u8BA4\\u4E3A redis \\u8DD1\\u5728\\u4E86\\u672C\\u673A\\u7684\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"6379\"), \"\\u7AEF\\u53E3\\u3002\"), mdx(\"h4\", null, \"\\u4F7F\\u7528 redis-cli \\u8FDE\\u63A5\"), mdx(\"p\", null, \"\\u5982\\u679C\\u672C\\u673A\\uFF08\\u5BBF\\u4E3B\\u673A\\uFF09\\u5B89\\u88C5\\u4E86\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"redis-cli\"), \"\\uFF0C\\u53EF\\u4EE5\\u4F7F\\u7528\\u672C\\u673A\\u7684\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"redis-cli\"), \"\\u6D4B\\u8BD5\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"\\u279C  Desktop redis-cli -h 127.0.0.1 -p 6379\\n127.0.0.1:6379> get username\\n\\\"jabin\\\"\\n127.0.0.1:6379>\\n\")), mdx(\"h4\", null, \"\\u4F7F\\u7528 python \\u7684 api \\u8FDE\\u63A5\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-py\"\n  }, \"import redis\\n\\nr = redis.StrictRedis(host='127.0.0.1', port=6379)\\n\\nprint(str(r.get(\\\"username\\\"), encoding=\\\"utf-8\\\"))\\n\")), mdx(\"p\", null, \"\\u8F93\\u51FA\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"jabin\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"拉取镜像、启动 拉取镜像 查看已有镜像 启动 docker 查看 docker 运行的容器状态 测试使用 在容器内部测试连接 进入容器内部后 在容器外部测试连接 redis 容器绑定到了宿主主机的 6379 端口，因此可以认为 redis 跑在了本机的 6379 端口。 使用 redis-cli…","frontmatter":{"date":"2020-12-08 13:41","title":"docker安装redis、redis-cli测试连接、python api测试连接。","draft":false}},{"id":"e9eb6b86-efaa-52d6-b243-99b23870715c","slug":"posts/code/go-orm-demo","rawBody":"---\ntitle: \"Go语言ORM框架快速上手，ORM操作Mysql数据库示例\"\ndate: 2020-12-08T21:38:19+08:00\ncategories: [\"code\"]\ntags: [\"mysql\", \"orm\", \"gorm\", \"xorm\", \"database\"]\ndraft: false\n---\n\n> 直接上Github[https://github.com/JabinGP/demo-gomysql](https://github.com/JabinGP/demo-gomysql)\n\n## 说明\n\n代码有master和gorm两个分支，master分支用的是xorm，gorm不言而喻。\n\n两个分支都是简单的单表查询，比较便于理解学习框架。\n\n两个分支都是只需要补齐mysql的配置文件，提前建好对应库，不需要建表就可以直接跑起来的，便于快速看到效果，具体的启动方式在README中有解释。\n\n## 使用感受\n\n> 具体的就不多说了，都在代码里面，也有详细的注释，主要讲讲体验。\n> 如果你没有决定用哪个，信我就选`xorm` 。\n\n### 单表\n\n两个框架大同小异，但是个人感觉xorm的文档，以及api的逻辑性上比较顺应我的想法（大概就是我猜它会怎么去暴露api给我用，然后用了之后发现确实是这样的）。\n\nGorm有几点我觉得不太好用：\n\n1. 为了实现软删除，Gorm自带一个model，官方推荐组合使用struct，但是实际上使用了这个以后，结构体字面量就无法直接指定id了。。{ID:xxx}会报语法错误，如果要嵌套使用{{ID:xx}}就会爆参数不完整的错误，这样在使用结构体指定字段查询的时候不能直接指定id就非常麻烦，必须先初始化一个结构体，在xxx.ID=xxx指定。\n2. select找不到记录的时候竟然返回了err，这个我觉得不太合理，找不到值怎么能是错误呢。\n\n### 多表\n\n#### Gorm\n\nGorm在我的一个简易demo[iris项目实战简易聊天室](https://github.com/JabinGP/demo-chatroom)中使用到，\n其中Gorm在另一个简单的demo中尝试使用，Gorm在项目中用到级联查询的时候非常难受，翻看了很多遍官方文档，官方文档在这一块说得不是很清楚，也没有什么示例，最后是自己不断尝试组合实现的。\n\n#### Xorm\n\n由于还没有使用过Xorm做项目，只是写了简单的单表示例，Xorm似乎也支持级联查询，但我更看重的是Xorm在文档中提供了直接执行SQL的方法，我更倾向于使用原生SQL加传入结构体指针扫描的形式完成级联查询，接下来打算将[iris项目实战简易聊天室](https://github.com/JabinGP/demo-chatroom)用xorm重构，看看效果后再对本文进行更新，不过个人感觉xorm应该是会更好用的。\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Go语言ORM框架快速上手，ORM操作Mysql数据库示例\",\n  \"date\": \"2020-12-08T13:38:19.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"mysql\", \"orm\", \"gorm\", \"xorm\", \"database\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u76F4\\u63A5\\u4E0AGithub\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/JabinGP/demo-gomysql\"\n  }, \"https://github.com/JabinGP/demo-gomysql\"))), mdx(\"h2\", null, \"\\u8BF4\\u660E\"), mdx(\"p\", null, \"\\u4EE3\\u7801\\u6709master\\u548Cgorm\\u4E24\\u4E2A\\u5206\\u652F\\uFF0Cmaster\\u5206\\u652F\\u7528\\u7684\\u662Fxorm\\uFF0Cgorm\\u4E0D\\u8A00\\u800C\\u55BB\\u3002\"), mdx(\"p\", null, \"\\u4E24\\u4E2A\\u5206\\u652F\\u90FD\\u662F\\u7B80\\u5355\\u7684\\u5355\\u8868\\u67E5\\u8BE2\\uFF0C\\u6BD4\\u8F83\\u4FBF\\u4E8E\\u7406\\u89E3\\u5B66\\u4E60\\u6846\\u67B6\\u3002\"), mdx(\"p\", null, \"\\u4E24\\u4E2A\\u5206\\u652F\\u90FD\\u662F\\u53EA\\u9700\\u8981\\u8865\\u9F50mysql\\u7684\\u914D\\u7F6E\\u6587\\u4EF6\\uFF0C\\u63D0\\u524D\\u5EFA\\u597D\\u5BF9\\u5E94\\u5E93\\uFF0C\\u4E0D\\u9700\\u8981\\u5EFA\\u8868\\u5C31\\u53EF\\u4EE5\\u76F4\\u63A5\\u8DD1\\u8D77\\u6765\\u7684\\uFF0C\\u4FBF\\u4E8E\\u5FEB\\u901F\\u770B\\u5230\\u6548\\u679C\\uFF0C\\u5177\\u4F53\\u7684\\u542F\\u52A8\\u65B9\\u5F0F\\u5728README\\u4E2D\\u6709\\u89E3\\u91CA\\u3002\"), mdx(\"h2\", null, \"\\u4F7F\\u7528\\u611F\\u53D7\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u5177\\u4F53\\u7684\\u5C31\\u4E0D\\u591A\\u8BF4\\u4E86\\uFF0C\\u90FD\\u5728\\u4EE3\\u7801\\u91CC\\u9762\\uFF0C\\u4E5F\\u6709\\u8BE6\\u7EC6\\u7684\\u6CE8\\u91CA\\uFF0C\\u4E3B\\u8981\\u8BB2\\u8BB2\\u4F53\\u9A8C\\u3002\\n\\u5982\\u679C\\u4F60\\u6CA1\\u6709\\u51B3\\u5B9A\\u7528\\u54EA\\u4E2A\\uFF0C\\u4FE1\\u6211\\u5C31\\u9009\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"xorm\"), \" \\u3002\")), mdx(\"h3\", null, \"\\u5355\\u8868\"), mdx(\"p\", null, \"\\u4E24\\u4E2A\\u6846\\u67B6\\u5927\\u540C\\u5C0F\\u5F02\\uFF0C\\u4F46\\u662F\\u4E2A\\u4EBA\\u611F\\u89C9xorm\\u7684\\u6587\\u6863\\uFF0C\\u4EE5\\u53CAapi\\u7684\\u903B\\u8F91\\u6027\\u4E0A\\u6BD4\\u8F83\\u987A\\u5E94\\u6211\\u7684\\u60F3\\u6CD5\\uFF08\\u5927\\u6982\\u5C31\\u662F\\u6211\\u731C\\u5B83\\u4F1A\\u600E\\u4E48\\u53BB\\u66B4\\u9732api\\u7ED9\\u6211\\u7528\\uFF0C\\u7136\\u540E\\u7528\\u4E86\\u4E4B\\u540E\\u53D1\\u73B0\\u786E\\u5B9E\\u662F\\u8FD9\\u6837\\u7684\\uFF09\\u3002\"), mdx(\"p\", null, \"Gorm\\u6709\\u51E0\\u70B9\\u6211\\u89C9\\u5F97\\u4E0D\\u592A\\u597D\\u7528\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u4E3A\\u4E86\\u5B9E\\u73B0\\u8F6F\\u5220\\u9664\\uFF0CGorm\\u81EA\\u5E26\\u4E00\\u4E2Amodel\\uFF0C\\u5B98\\u65B9\\u63A8\\u8350\\u7EC4\\u5408\\u4F7F\\u7528struct\\uFF0C\\u4F46\\u662F\\u5B9E\\u9645\\u4E0A\\u4F7F\\u7528\\u4E86\\u8FD9\\u4E2A\\u4EE5\\u540E\\uFF0C\\u7ED3\\u6784\\u4F53\\u5B57\\u9762\\u91CF\\u5C31\\u65E0\\u6CD5\\u76F4\\u63A5\\u6307\\u5B9Aid\\u4E86\\u3002\\u3002{ID:xxx}\\u4F1A\\u62A5\\u8BED\\u6CD5\\u9519\\u8BEF\\uFF0C\\u5982\\u679C\\u8981\\u5D4C\\u5957\\u4F7F\\u7528{{ID:xx}}\\u5C31\\u4F1A\\u7206\\u53C2\\u6570\\u4E0D\\u5B8C\\u6574\\u7684\\u9519\\u8BEF\\uFF0C\\u8FD9\\u6837\\u5728\\u4F7F\\u7528\\u7ED3\\u6784\\u4F53\\u6307\\u5B9A\\u5B57\\u6BB5\\u67E5\\u8BE2\\u7684\\u65F6\\u5019\\u4E0D\\u80FD\\u76F4\\u63A5\\u6307\\u5B9Aid\\u5C31\\u975E\\u5E38\\u9EBB\\u70E6\\uFF0C\\u5FC5\\u987B\\u5148\\u521D\\u59CB\\u5316\\u4E00\\u4E2A\\u7ED3\\u6784\\u4F53\\uFF0C\\u5728xxx.ID=xxx\\u6307\\u5B9A\\u3002\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"select\\u627E\\u4E0D\\u5230\\u8BB0\\u5F55\\u7684\\u65F6\\u5019\\u7ADF\\u7136\\u8FD4\\u56DE\\u4E86err\\uFF0C\\u8FD9\\u4E2A\\u6211\\u89C9\\u5F97\\u4E0D\\u592A\\u5408\\u7406\\uFF0C\\u627E\\u4E0D\\u5230\\u503C\\u600E\\u4E48\\u80FD\\u662F\\u9519\\u8BEF\\u5462\\u3002\")), mdx(\"h3\", null, \"\\u591A\\u8868\"), mdx(\"h4\", null, \"Gorm\"), mdx(\"p\", null, \"Gorm\\u5728\\u6211\\u7684\\u4E00\\u4E2A\\u7B80\\u6613demo\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/JabinGP/demo-chatroom\"\n  }, \"iris\\u9879\\u76EE\\u5B9E\\u6218\\u7B80\\u6613\\u804A\\u5929\\u5BA4\"), \"\\u4E2D\\u4F7F\\u7528\\u5230\\uFF0C\\n\\u5176\\u4E2DGorm\\u5728\\u53E6\\u4E00\\u4E2A\\u7B80\\u5355\\u7684demo\\u4E2D\\u5C1D\\u8BD5\\u4F7F\\u7528\\uFF0CGorm\\u5728\\u9879\\u76EE\\u4E2D\\u7528\\u5230\\u7EA7\\u8054\\u67E5\\u8BE2\\u7684\\u65F6\\u5019\\u975E\\u5E38\\u96BE\\u53D7\\uFF0C\\u7FFB\\u770B\\u4E86\\u5F88\\u591A\\u904D\\u5B98\\u65B9\\u6587\\u6863\\uFF0C\\u5B98\\u65B9\\u6587\\u6863\\u5728\\u8FD9\\u4E00\\u5757\\u8BF4\\u5F97\\u4E0D\\u662F\\u5F88\\u6E05\\u695A\\uFF0C\\u4E5F\\u6CA1\\u6709\\u4EC0\\u4E48\\u793A\\u4F8B\\uFF0C\\u6700\\u540E\\u662F\\u81EA\\u5DF1\\u4E0D\\u65AD\\u5C1D\\u8BD5\\u7EC4\\u5408\\u5B9E\\u73B0\\u7684\\u3002\"), mdx(\"h4\", null, \"Xorm\"), mdx(\"p\", null, \"\\u7531\\u4E8E\\u8FD8\\u6CA1\\u6709\\u4F7F\\u7528\\u8FC7Xorm\\u505A\\u9879\\u76EE\\uFF0C\\u53EA\\u662F\\u5199\\u4E86\\u7B80\\u5355\\u7684\\u5355\\u8868\\u793A\\u4F8B\\uFF0CXorm\\u4F3C\\u4E4E\\u4E5F\\u652F\\u6301\\u7EA7\\u8054\\u67E5\\u8BE2\\uFF0C\\u4F46\\u6211\\u66F4\\u770B\\u91CD\\u7684\\u662FXorm\\u5728\\u6587\\u6863\\u4E2D\\u63D0\\u4F9B\\u4E86\\u76F4\\u63A5\\u6267\\u884CSQL\\u7684\\u65B9\\u6CD5\\uFF0C\\u6211\\u66F4\\u503E\\u5411\\u4E8E\\u4F7F\\u7528\\u539F\\u751FSQL\\u52A0\\u4F20\\u5165\\u7ED3\\u6784\\u4F53\\u6307\\u9488\\u626B\\u63CF\\u7684\\u5F62\\u5F0F\\u5B8C\\u6210\\u7EA7\\u8054\\u67E5\\u8BE2\\uFF0C\\u63A5\\u4E0B\\u6765\\u6253\\u7B97\\u5C06\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/JabinGP/demo-chatroom\"\n  }, \"iris\\u9879\\u76EE\\u5B9E\\u6218\\u7B80\\u6613\\u804A\\u5929\\u5BA4\"), \"\\u7528xorm\\u91CD\\u6784\\uFF0C\\u770B\\u770B\\u6548\\u679C\\u540E\\u518D\\u5BF9\\u672C\\u6587\\u8FDB\\u884C\\u66F4\\u65B0\\uFF0C\\u4E0D\\u8FC7\\u4E2A\\u4EBA\\u611F\\u89C9xorm\\u5E94\\u8BE5\\u662F\\u4F1A\\u66F4\\u597D\\u7528\\u7684\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"直接上Github https://github.com/JabinGP/demo-gomysql 说明 代码有master和gorm两个分支，master分支用的是xorm，gorm不言而喻。 两个分支都是简单的单表查询，比较便于理解学习框架。 两个分支都是只需要补齐mysql…","frontmatter":{"date":"2020-12-08 13:38","title":"Go语言ORM框架快速上手，ORM操作Mysql数据库示例","draft":false}},{"id":"9d15983b-4fc0-52dc-987e-fbec915e6b5b","slug":"posts/code/goget-goinstall-hugo","rawBody":"---\ntitle: \"记一次go get安装hugo的坑、go module、goinstall、gobuild。\"\ndate: 2020-12-08T21:44:29+08:00\ncategories: [\"code\"]\ntags: [\"golang\", \"hugo\"]\ndraft: false\n---\n\n> 该文章的golang版本为`go version go1.14.5 darwin/amd64`\n\n## 心路历程\n\n### 1. 报错\n\n晚上本来想装个hugo玩玩，hugo提供了挺多安装方法比如最直接的二进制包安装、homebrew等包管理安装、docker，正好电脑里也有golang的环境，平时装go写的软件也很方便`go get`就解决了，自然而然想到`go get -v github.com/gohugoio/hugo`，看着控制台Download了半天最后竟然给我报了个错：\n\n```cmd\npackage github.com/jdkato/prose/transform: cannot find package \"github.com/jdkato/prose/transform\" in any of:\n        /usr/local/Cellar/go/1.14.5/libexec/src/github.com/jdkato/prose/transform (from $GOROOT)\n        /Users/jabin/go/src/github.com/jdkato/prose/transform (from $GOPATH)\n```\n\n大概意思就是找不到`github.com/jdkato/prose/transform`这个包，我下意识点开[https://github.com/jdkato/prose/transform](https://github.com/jdkato/prose/transform)一探究竟，发现github确实报了404错误，说明这个包确实有点问题。\n\n### 2. 尝试\n\n然后我寻思着不对劲怎么装都装不上，打开[hugo的github仓库](https://github.com/gohugoio/hugo)看到了这样的向导：\n\n```cmd\nmkdir $HOME/src\ncd $HOME/src\ngit clone https://github.com/gohugoio/hugo.git\ncd hugo\ngo install\n```\n\n我不信邪，就试了一下先`clone`再`go install`会怎么样，然后发现竟然成功了，在golang的bin目录（在我的电脑下是`~/go/bin`）下生成了一个名为`hugo`的可执行文件。\n\n### 3. 排错\n\n我寻思着`go get`是把项目先拉下来然后编译放在`~/go/bin`下，`go install`是自己手动进入了某个项目目录下执行编译输出到`~/go/bin`，二者应该只有**自己把项目拉下来然后进入该项目**的区别，怎么会出现这样奇怪的错误。\n\n#### 3.1 灵异事件\n\n一遍思考一遍手上又执行了一遍`go get -v github.com/gohugoio/hugo`，这一遍竟然什么报错也没有，我赶紧删掉`~/go/bin`下的编译产物`hugo`，检验是否真的`go get`能够正常编译出可执行文件了，结果是**确实没有报错且正常编译出结果了**。\n\n我百思不得其解，但是回想一开始得到的错误，似乎错误中提到了两个路径：\n\n- `/usr/local/Cellar/go/1.14.5/libexec/src/github.com/jdkato/prose/transform (from $GOROOT)`\n- `/Users/jabin/go/src/github.com/jdkato/prose/transform`\n我逐一检查后发现确实两个地址都无法找到需要的这个包，于是我开始想这个项目是不是有什么问题，熟悉go包和github地址的人应该清楚，这个地址说明这个包的作者是`jdkato`，项目名是`prose`，`transform`应该是项目下的一个文件夹。\n\n#### 3.2 计算机不会耍赖皮\n\n> 写文章时[https://github.com/jdkato/prose](https://github.com/jdkato/prose)的最新commit是`c2b2f78b870e41bec89843648b04b1716a0fb9c6`\n> [hugo的github仓库](https://github.com/gohugoio/hugo)的最新commit是`c84ad8db821c10225c0e603c6ec920c67b6ce36f`\n\n于是我开始在github搜jdkato这个名字，发现了这个作者确实有prose这个项目[https://github.com/jdkato/prose](https://github.com/jdkato/prose)，点进去一看发现这个项目也的的确确没有`transform`这个文件夹。\n\n再翻看[hugo的github仓库](https://github.com/gohugoio/hugo)发现最新的release是三天前，说明hugo的代码本身没有什么问题。\n\n这时候我得出一种推论，hugo可能用了prose这个项目的老版本，老版本里存在transform这个文件夹，hugo可能是自己的golang环境里缓存了prose这个项目的老版本之类的。但是很快这种想法就被我自己推翻了，因为我的的确确在自己的电脑上`go install`成功了hugo的最新源码，并且在`go install`成功之前我还处于`package github.com/jdkato/prose/transform: cannot find`的错误中，根本不存在缓存了老版本项目代码的可能。\n\n#### 3.3 真相只有一个\n\n推测到这里，我想起来一个重要的东西，`go.mod`正是那个**可以缓存旧版本的**关键人物啊！我赶紧再翻看[hugo的github仓库](https://github.com/gohugoio/hugo)，果然发现了`go.mod`这个文件，里面也有这样一段记录：\n\n```go\nmodule github.com/gohugoio/hugo\n\nrequire (\n    ...省略\n    github.com/jdkato/prose v1.2.0\n    ...省略\n)\n\nreplace github.com/markbates/inflect => github.com/markbates/inflect v0.0.0-20171215194931-a12c3aec81a6\n\ngo 1.12\n```\n\n可以看到`require`中指出了对项目`github.com/jdkato/prose`的版本要求为`v1.2.0`，我啪的一下就打开了[https://github.com/jdkato/prose/tree/v1.2.0](https://github.com/jdkato/prose/tree/v1.2.0)，果然在`v1.2.0`这个旧版本的`tag`下有我们想要的`transform`文件夹。\n\n那么`go get`报错的真相就只有一个，`go get`获取了最新版本的`github.com/jdkato/prose`，正好最新版本的`github.com/jdkato/prose`重构了，项目结构发生了改变。而`go install`成功后`go get`也能成功的灵异事件也能说的过去了，就是因为`go install`获取到了对的版本的项目，导致`go get`也能够找到需要的文件了。\n\n#### 3.4 案件远没有结束\n\n尽管得出了一个看起来说的过去的解释，但是问题又来了：**为什么`go install`就能获取到对应的版本的项目？**\n\n我自然而然想到了`go.mod`这个关键人物，我同样得出一个大胆的推论：`go get`不会理会`go.mod`中的限制，而`go install`则会在意。\n\n#### 3.5 口说无凭，怎么证明\n\n粗略了翻阅了有关`go get`和`go install`的一些说明，发现没什么和我这个问题相关的，只好来点硬核的了，正好go也是自举的，go语言的go语言源码还是可以看看的。\n\n#### 3.6 源码中的线索\n\n```cmd\ngit clone https://github.com/golang/go.git\ncd go\ncode .\n```\n\n上来直接一个闪电三连码，用命令行打开我习惯的vscode开始看。\n\n通过搜索找到了`go get`和`go install`的源码，分别位于\n\n|命令|源码位置|\n|-|-|\n|go get|./go/internal/get/get.go|\n|go install|./go/internal/work/build.go|\n\n**为什么`go install`不是在install.go里？**根据我的观察，因为go install和go build的功能和实现都很接近，所以这两个命令的源码都在/go/internal/work/build.go。\n\n主要看看`get.go`的源码，里面有一个`runGet`方法，这是执行`go get`的入口方法，该方法中存在这样的调用链：\n`load.PackagesForBuild`->`PackagesAndErrors`->`ImportPaths`\n\n|方法名|源码位置|\n|-|-|\n|load.PackagesForBuild|.go/internal/load/pkg.go|\n|PackagesAndErrors|.go/internal/load/pkg.go|\n|ImportPaths|.go/internal/load/pkg.go|\n\n这个`ImportPaths`方法完整如下：\n\n```go\nfunc ImportPaths(args []string) []*search.Match {\n    if ModInit(); cfg.ModulesEnabled {\n        return ModImportPaths(args)\n    }\n    return search.ImportPaths(args)\n}\n```\n\n可一看到源码中关于`ModInit(); cfg.ModulesEnabled`是否成立有两种处理模式。\n\n#### 3.7 关键信息\n\n因为源码里对于`ModInit()`只是简单的`var ModInit func()`，没有方法体可以看到，也许是再别的地方进行了实现，我也没有深究。主要是看到了`cfg.ModulesEnabled`这个变量，直接想到了go module是否生效的问题，于是百度了`go module`并且看到了这篇文章`[go module 基本使用](https://www.cnblogs.com/chnmig/p/11806609.html)`，里面有这样一段话：\n\n> go在1.13版本默认是auto,~~代表 当项目在 GOPATH/src 外且项目根目录有 go.mod 文件时，开启 go module.也就是说,如果你不把代码放置在 GOPATH/src 下则默认使用 MODULE 管理.~~\n不好意思看错了,1.13+的版本判断开不开启MODULE的依据是根目录下有没有go.mod文件\n我们也可手动更改为 on(全部开启)/off(全部不开启)\n\n我恍然大悟，因为我`go get`的地方正好就是随便一个地方->没有在项目里->自然没有`go.mod`->也就没有开启`module`->`ModInit(); cfg.ModulesEnabled`不成立->`go get`源码进入了另一种处理方式->hugo源码中的`go.mod`没有生效，一切都解释的通了。\n\n#### 3.8 验证\n\n验证的方法也很简单，根据前文的判断关键，新建一个有`go.mod`的环境再执行一次`go get`就可以了。\n\n```cmd\nmkdir testgo\ncd testgo \ngo mod init xxx\ngo: creating new go.mod: module xxx\ngo get -v github.com/gohugoio/hugo\n```\n\n在有`go.mod`存在的环境下是可以安装成功的，也证明了前面的说法，至此一切都解决了。\n\n### 4. 结尾\n\n这次的问题也花了一整个下午的时间去排查，先是花了一些时间思考可能的原因，又花了很长时间去看源码，读源码真的花了很长很长的时间，一连看了几个小时直到头都有些晕了在起身去吃饭，吃完饭回来有精神了继续看了一会就发现问题了，可能在文章中就是简单的调用链路和几行关键代码，但是怎么在上千行的源码中找到这些关键信息远没有文章中的那么简单，首先是要看懂，然后是顺着调用链往下继续看懂，有时候还会误解然后找错方向找了很久……\n\n但结果还是非常好的，解决了自己的疑惑，更难能的是在源码里学到了几个很有意思很妙的写法，比如这两个：\n\n```go\n// 这个else if的顺序和作用域利用的很充分\nfunc CleanPatterns(patterns []string) []string {\n    // 省略\n    var out []string\n    for _, a := range patterns {\n        var p, v string\n        if build.IsLocalImport(a) || filepath.IsAbs(a) {\n            p = a\n        } else if i := strings.IndexByte(a, '@'); i < 0 {\n            p = a\n        } else {\n            p = a[:i]\n            v = a[i:]\n        }\n        // 省略\n    }\n    // 省略\n}\n```\n\n```go\n// 匿名函数+函数变量+递归+闭包的妙用\nfunc PackageList(roots []*Package) []*Package {\n    seen := map[*Package]bool{}\n    all := []*Package{}\n    var walk func(*Package)\n    walk = func(p *Package) {\n        if seen[p] {\n            return\n        }\n        seen[p] = true\n        for _, p1 := range p.Internal.Imports {\n            walk(p1)\n        }\n        all = append(all, p)\n    }\n    for _, root := range roots {\n        walk(root)\n    }\n    return all\n}\n```\n\n写的有点长了，但还是想完整的记录一下心路历程，折腾的过程还是很有意思的。\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"记一次go get安装hugo的坑、go module、goinstall、gobuild。\",\n  \"date\": \"2020-12-08T13:44:29.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"golang\", \"hugo\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u8BE5\\u6587\\u7AE0\\u7684golang\\u7248\\u672C\\u4E3A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go version go1.14.5 darwin/amd64\"))), mdx(\"h2\", null, \"\\u5FC3\\u8DEF\\u5386\\u7A0B\"), mdx(\"h3\", null, \"1. \\u62A5\\u9519\"), mdx(\"p\", null, \"\\u665A\\u4E0A\\u672C\\u6765\\u60F3\\u88C5\\u4E2Ahugo\\u73A9\\u73A9\\uFF0Chugo\\u63D0\\u4F9B\\u4E86\\u633A\\u591A\\u5B89\\u88C5\\u65B9\\u6CD5\\u6BD4\\u5982\\u6700\\u76F4\\u63A5\\u7684\\u4E8C\\u8FDB\\u5236\\u5305\\u5B89\\u88C5\\u3001homebrew\\u7B49\\u5305\\u7BA1\\u7406\\u5B89\\u88C5\\u3001docker\\uFF0C\\u6B63\\u597D\\u7535\\u8111\\u91CC\\u4E5F\\u6709golang\\u7684\\u73AF\\u5883\\uFF0C\\u5E73\\u65F6\\u88C5go\\u5199\\u7684\\u8F6F\\u4EF6\\u4E5F\\u5F88\\u65B9\\u4FBF\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u5C31\\u89E3\\u51B3\\u4E86\\uFF0C\\u81EA\\u7136\\u800C\\u7136\\u60F3\\u5230\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get -v github.com/gohugoio/hugo\"), \"\\uFF0C\\u770B\\u7740\\u63A7\\u5236\\u53F0Download\\u4E86\\u534A\\u5929\\u6700\\u540E\\u7ADF\\u7136\\u7ED9\\u6211\\u62A5\\u4E86\\u4E2A\\u9519\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"package github.com/jdkato/prose/transform: cannot find package \\\"github.com/jdkato/prose/transform\\\" in any of:\\n        /usr/local/Cellar/go/1.14.5/libexec/src/github.com/jdkato/prose/transform (from $GOROOT)\\n        /Users/jabin/go/src/github.com/jdkato/prose/transform (from $GOPATH)\\n\")), mdx(\"p\", null, \"\\u5927\\u6982\\u610F\\u601D\\u5C31\\u662F\\u627E\\u4E0D\\u5230\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"github.com/jdkato/prose/transform\"), \"\\u8FD9\\u4E2A\\u5305\\uFF0C\\u6211\\u4E0B\\u610F\\u8BC6\\u70B9\\u5F00\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/jdkato/prose/transform\"\n  }, \"https://github.com/jdkato/prose/transform\"), \"\\u4E00\\u63A2\\u7A76\\u7ADF\\uFF0C\\u53D1\\u73B0github\\u786E\\u5B9E\\u62A5\\u4E86404\\u9519\\u8BEF\\uFF0C\\u8BF4\\u660E\\u8FD9\\u4E2A\\u5305\\u786E\\u5B9E\\u6709\\u70B9\\u95EE\\u9898\\u3002\"), mdx(\"h3\", null, \"2. \\u5C1D\\u8BD5\"), mdx(\"p\", null, \"\\u7136\\u540E\\u6211\\u5BFB\\u601D\\u7740\\u4E0D\\u5BF9\\u52B2\\u600E\\u4E48\\u88C5\\u90FD\\u88C5\\u4E0D\\u4E0A\\uFF0C\\u6253\\u5F00\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/gohugoio/hugo\"\n  }, \"hugo\\u7684github\\u4ED3\\u5E93\"), \"\\u770B\\u5230\\u4E86\\u8FD9\\u6837\\u7684\\u5411\\u5BFC\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"mkdir $HOME/src\\ncd $HOME/src\\ngit clone https://github.com/gohugoio/hugo.git\\ncd hugo\\ngo install\\n\")), mdx(\"p\", null, \"\\u6211\\u4E0D\\u4FE1\\u90AA\\uFF0C\\u5C31\\u8BD5\\u4E86\\u4E00\\u4E0B\\u5148\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"clone\"), \"\\u518D\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u4F1A\\u600E\\u4E48\\u6837\\uFF0C\\u7136\\u540E\\u53D1\\u73B0\\u7ADF\\u7136\\u6210\\u529F\\u4E86\\uFF0C\\u5728golang\\u7684bin\\u76EE\\u5F55\\uFF08\\u5728\\u6211\\u7684\\u7535\\u8111\\u4E0B\\u662F\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/go/bin\"), \"\\uFF09\\u4E0B\\u751F\\u6210\\u4E86\\u4E00\\u4E2A\\u540D\\u4E3A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hugo\"), \"\\u7684\\u53EF\\u6267\\u884C\\u6587\\u4EF6\\u3002\"), mdx(\"h3\", null, \"3. \\u6392\\u9519\"), mdx(\"p\", null, \"\\u6211\\u5BFB\\u601D\\u7740\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u662F\\u628A\\u9879\\u76EE\\u5148\\u62C9\\u4E0B\\u6765\\u7136\\u540E\\u7F16\\u8BD1\\u653E\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/go/bin\"), \"\\u4E0B\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u662F\\u81EA\\u5DF1\\u624B\\u52A8\\u8FDB\\u5165\\u4E86\\u67D0\\u4E2A\\u9879\\u76EE\\u76EE\\u5F55\\u4E0B\\u6267\\u884C\\u7F16\\u8BD1\\u8F93\\u51FA\\u5230\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/go/bin\"), \"\\uFF0C\\u4E8C\\u8005\\u5E94\\u8BE5\\u53EA\\u6709\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u81EA\\u5DF1\\u628A\\u9879\\u76EE\\u62C9\\u4E0B\\u6765\\u7136\\u540E\\u8FDB\\u5165\\u8BE5\\u9879\\u76EE\"), \"\\u7684\\u533A\\u522B\\uFF0C\\u600E\\u4E48\\u4F1A\\u51FA\\u73B0\\u8FD9\\u6837\\u5947\\u602A\\u7684\\u9519\\u8BEF\\u3002\"), mdx(\"h4\", null, \"3.1 \\u7075\\u5F02\\u4E8B\\u4EF6\"), mdx(\"p\", null, \"\\u4E00\\u904D\\u601D\\u8003\\u4E00\\u904D\\u624B\\u4E0A\\u53C8\\u6267\\u884C\\u4E86\\u4E00\\u904D\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get -v github.com/gohugoio/hugo\"), \"\\uFF0C\\u8FD9\\u4E00\\u904D\\u7ADF\\u7136\\u4EC0\\u4E48\\u62A5\\u9519\\u4E5F\\u6CA1\\u6709\\uFF0C\\u6211\\u8D76\\u7D27\\u5220\\u6389\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/go/bin\"), \"\\u4E0B\\u7684\\u7F16\\u8BD1\\u4EA7\\u7269\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"hugo\"), \"\\uFF0C\\u68C0\\u9A8C\\u662F\\u5426\\u771F\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u80FD\\u591F\\u6B63\\u5E38\\u7F16\\u8BD1\\u51FA\\u53EF\\u6267\\u884C\\u6587\\u4EF6\\u4E86\\uFF0C\\u7ED3\\u679C\\u662F\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u786E\\u5B9E\\u6CA1\\u6709\\u62A5\\u9519\\u4E14\\u6B63\\u5E38\\u7F16\\u8BD1\\u51FA\\u7ED3\\u679C\\u4E86\"), \"\\u3002\"), mdx(\"p\", null, \"\\u6211\\u767E\\u601D\\u4E0D\\u5F97\\u5176\\u89E3\\uFF0C\\u4F46\\u662F\\u56DE\\u60F3\\u4E00\\u5F00\\u59CB\\u5F97\\u5230\\u7684\\u9519\\u8BEF\\uFF0C\\u4F3C\\u4E4E\\u9519\\u8BEF\\u4E2D\\u63D0\\u5230\\u4E86\\u4E24\\u4E2A\\u8DEF\\u5F84\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/usr/local/Cellar/go/1.14.5/libexec/src/github.com/jdkato/prose/transform (from $GOROOT)\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/Users/jabin/go/src/github.com/jdkato/prose/transform\"), \"\\n\\u6211\\u9010\\u4E00\\u68C0\\u67E5\\u540E\\u53D1\\u73B0\\u786E\\u5B9E\\u4E24\\u4E2A\\u5730\\u5740\\u90FD\\u65E0\\u6CD5\\u627E\\u5230\\u9700\\u8981\\u7684\\u8FD9\\u4E2A\\u5305\\uFF0C\\u4E8E\\u662F\\u6211\\u5F00\\u59CB\\u60F3\\u8FD9\\u4E2A\\u9879\\u76EE\\u662F\\u4E0D\\u662F\\u6709\\u4EC0\\u4E48\\u95EE\\u9898\\uFF0C\\u719F\\u6089go\\u5305\\u548Cgithub\\u5730\\u5740\\u7684\\u4EBA\\u5E94\\u8BE5\\u6E05\\u695A\\uFF0C\\u8FD9\\u4E2A\\u5730\\u5740\\u8BF4\\u660E\\u8FD9\\u4E2A\\u5305\\u7684\\u4F5C\\u8005\\u662F\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"jdkato\"), \"\\uFF0C\\u9879\\u76EE\\u540D\\u662F\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"prose\"), \"\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"transform\"), \"\\u5E94\\u8BE5\\u662F\\u9879\\u76EE\\u4E0B\\u7684\\u4E00\\u4E2A\\u6587\\u4EF6\\u5939\\u3002\")), mdx(\"h4\", null, \"3.2 \\u8BA1\\u7B97\\u673A\\u4E0D\\u4F1A\\u800D\\u8D56\\u76AE\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u5199\\u6587\\u7AE0\\u65F6\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/jdkato/prose\"\n  }, \"https://github.com/jdkato/prose\"), \"\\u7684\\u6700\\u65B0commit\\u662F\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"c2b2f78b870e41bec89843648b04b1716a0fb9c6\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/gohugoio/hugo\"\n  }, \"hugo\\u7684github\\u4ED3\\u5E93\"), \"\\u7684\\u6700\\u65B0commit\\u662F\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"c84ad8db821c10225c0e603c6ec920c67b6ce36f\"))), mdx(\"p\", null, \"\\u4E8E\\u662F\\u6211\\u5F00\\u59CB\\u5728github\\u641Cjdkato\\u8FD9\\u4E2A\\u540D\\u5B57\\uFF0C\\u53D1\\u73B0\\u4E86\\u8FD9\\u4E2A\\u4F5C\\u8005\\u786E\\u5B9E\\u6709prose\\u8FD9\\u4E2A\\u9879\\u76EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/jdkato/prose\"\n  }, \"https://github.com/jdkato/prose\"), \"\\uFF0C\\u70B9\\u8FDB\\u53BB\\u4E00\\u770B\\u53D1\\u73B0\\u8FD9\\u4E2A\\u9879\\u76EE\\u4E5F\\u7684\\u7684\\u786E\\u786E\\u6CA1\\u6709\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"transform\"), \"\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5939\\u3002\"), mdx(\"p\", null, \"\\u518D\\u7FFB\\u770B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/gohugoio/hugo\"\n  }, \"hugo\\u7684github\\u4ED3\\u5E93\"), \"\\u53D1\\u73B0\\u6700\\u65B0\\u7684release\\u662F\\u4E09\\u5929\\u524D\\uFF0C\\u8BF4\\u660Ehugo\\u7684\\u4EE3\\u7801\\u672C\\u8EAB\\u6CA1\\u6709\\u4EC0\\u4E48\\u95EE\\u9898\\u3002\"), mdx(\"p\", null, \"\\u8FD9\\u65F6\\u5019\\u6211\\u5F97\\u51FA\\u4E00\\u79CD\\u63A8\\u8BBA\\uFF0Chugo\\u53EF\\u80FD\\u7528\\u4E86prose\\u8FD9\\u4E2A\\u9879\\u76EE\\u7684\\u8001\\u7248\\u672C\\uFF0C\\u8001\\u7248\\u672C\\u91CC\\u5B58\\u5728transform\\u8FD9\\u4E2A\\u6587\\u4EF6\\u5939\\uFF0Chugo\\u53EF\\u80FD\\u662F\\u81EA\\u5DF1\\u7684golang\\u73AF\\u5883\\u91CC\\u7F13\\u5B58\\u4E86prose\\u8FD9\\u4E2A\\u9879\\u76EE\\u7684\\u8001\\u7248\\u672C\\u4E4B\\u7C7B\\u7684\\u3002\\u4F46\\u662F\\u5F88\\u5FEB\\u8FD9\\u79CD\\u60F3\\u6CD5\\u5C31\\u88AB\\u6211\\u81EA\\u5DF1\\u63A8\\u7FFB\\u4E86\\uFF0C\\u56E0\\u4E3A\\u6211\\u7684\\u7684\\u786E\\u786E\\u5728\\u81EA\\u5DF1\\u7684\\u7535\\u8111\\u4E0A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u6210\\u529F\\u4E86hugo\\u7684\\u6700\\u65B0\\u6E90\\u7801\\uFF0C\\u5E76\\u4E14\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u6210\\u529F\\u4E4B\\u524D\\u6211\\u8FD8\\u5904\\u4E8E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"package github.com/jdkato/prose/transform: cannot find\"), \"\\u7684\\u9519\\u8BEF\\u4E2D\\uFF0C\\u6839\\u672C\\u4E0D\\u5B58\\u5728\\u7F13\\u5B58\\u4E86\\u8001\\u7248\\u672C\\u9879\\u76EE\\u4EE3\\u7801\\u7684\\u53EF\\u80FD\\u3002\"), mdx(\"h4\", null, \"3.3 \\u771F\\u76F8\\u53EA\\u6709\\u4E00\\u4E2A\"), mdx(\"p\", null, \"\\u63A8\\u6D4B\\u5230\\u8FD9\\u91CC\\uFF0C\\u6211\\u60F3\\u8D77\\u6765\\u4E00\\u4E2A\\u91CD\\u8981\\u7684\\u4E1C\\u897F\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"\\u6B63\\u662F\\u90A3\\u4E2A\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u53EF\\u4EE5\\u7F13\\u5B58\\u65E7\\u7248\\u672C\\u7684\"), \"\\u5173\\u952E\\u4EBA\\u7269\\u554A\\uFF01\\u6211\\u8D76\\u7D27\\u518D\\u7FFB\\u770B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/gohugoio/hugo\"\n  }, \"hugo\\u7684github\\u4ED3\\u5E93\"), \"\\uFF0C\\u679C\\u7136\\u53D1\\u73B0\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"\\u8FD9\\u4E2A\\u6587\\u4EF6\\uFF0C\\u91CC\\u9762\\u4E5F\\u6709\\u8FD9\\u6837\\u4E00\\u6BB5\\u8BB0\\u5F55\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"module github.com/gohugoio/hugo\\n\\nrequire (\\n    ...\\u7701\\u7565\\n    github.com/jdkato/prose v1.2.0\\n    ...\\u7701\\u7565\\n)\\n\\nreplace github.com/markbates/inflect => github.com/markbates/inflect v0.0.0-20171215194931-a12c3aec81a6\\n\\ngo 1.12\\n\")), mdx(\"p\", null, \"\\u53EF\\u4EE5\\u770B\\u5230\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"require\"), \"\\u4E2D\\u6307\\u51FA\\u4E86\\u5BF9\\u9879\\u76EE\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"github.com/jdkato/prose\"), \"\\u7684\\u7248\\u672C\\u8981\\u6C42\\u4E3A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"v1.2.0\"), \"\\uFF0C\\u6211\\u556A\\u7684\\u4E00\\u4E0B\\u5C31\\u6253\\u5F00\\u4E86\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/jdkato/prose/tree/v1.2.0\"\n  }, \"https://github.com/jdkato/prose/tree/v1.2.0\"), \"\\uFF0C\\u679C\\u7136\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"v1.2.0\"), \"\\u8FD9\\u4E2A\\u65E7\\u7248\\u672C\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"tag\"), \"\\u4E0B\\u6709\\u6211\\u4EEC\\u60F3\\u8981\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"transform\"), \"\\u6587\\u4EF6\\u5939\\u3002\"), mdx(\"p\", null, \"\\u90A3\\u4E48\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u62A5\\u9519\\u7684\\u771F\\u76F8\\u5C31\\u53EA\\u6709\\u4E00\\u4E2A\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u83B7\\u53D6\\u4E86\\u6700\\u65B0\\u7248\\u672C\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"github.com/jdkato/prose\"), \"\\uFF0C\\u6B63\\u597D\\u6700\\u65B0\\u7248\\u672C\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"github.com/jdkato/prose\"), \"\\u91CD\\u6784\\u4E86\\uFF0C\\u9879\\u76EE\\u7ED3\\u6784\\u53D1\\u751F\\u4E86\\u6539\\u53D8\\u3002\\u800C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u6210\\u529F\\u540E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u4E5F\\u80FD\\u6210\\u529F\\u7684\\u7075\\u5F02\\u4E8B\\u4EF6\\u4E5F\\u80FD\\u8BF4\\u7684\\u8FC7\\u53BB\\u4E86\\uFF0C\\u5C31\\u662F\\u56E0\\u4E3A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u83B7\\u53D6\\u5230\\u4E86\\u5BF9\\u7684\\u7248\\u672C\\u7684\\u9879\\u76EE\\uFF0C\\u5BFC\\u81F4\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u4E5F\\u80FD\\u591F\\u627E\\u5230\\u9700\\u8981\\u7684\\u6587\\u4EF6\\u4E86\\u3002\"), mdx(\"h4\", null, \"3.4 \\u6848\\u4EF6\\u8FDC\\u6CA1\\u6709\\u7ED3\\u675F\"), mdx(\"p\", null, \"\\u5C3D\\u7BA1\\u5F97\\u51FA\\u4E86\\u4E00\\u4E2A\\u770B\\u8D77\\u6765\\u8BF4\\u7684\\u8FC7\\u53BB\\u7684\\u89E3\\u91CA\\uFF0C\\u4F46\\u662F\\u95EE\\u9898\\u53C8\\u6765\\u4E86\\uFF1A\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4E3A\\u4EC0\\u4E48\", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"go install\"), \"\\u5C31\\u80FD\\u83B7\\u53D6\\u5230\\u5BF9\\u5E94\\u7684\\u7248\\u672C\\u7684\\u9879\\u76EE\\uFF1F\")), mdx(\"p\", null, \"\\u6211\\u81EA\\u7136\\u800C\\u7136\\u60F3\\u5230\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"\\u8FD9\\u4E2A\\u5173\\u952E\\u4EBA\\u7269\\uFF0C\\u6211\\u540C\\u6837\\u5F97\\u51FA\\u4E00\\u4E2A\\u5927\\u80C6\\u7684\\u63A8\\u8BBA\\uFF1A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u4E0D\\u4F1A\\u7406\\u4F1A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"\\u4E2D\\u7684\\u9650\\u5236\\uFF0C\\u800C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u5219\\u4F1A\\u5728\\u610F\\u3002\"), mdx(\"h4\", null, \"3.5 \\u53E3\\u8BF4\\u65E0\\u51ED\\uFF0C\\u600E\\u4E48\\u8BC1\\u660E\"), mdx(\"p\", null, \"\\u7C97\\u7565\\u4E86\\u7FFB\\u9605\\u4E86\\u6709\\u5173\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u548C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u7684\\u4E00\\u4E9B\\u8BF4\\u660E\\uFF0C\\u53D1\\u73B0\\u6CA1\\u4EC0\\u4E48\\u548C\\u6211\\u8FD9\\u4E2A\\u95EE\\u9898\\u76F8\\u5173\\u7684\\uFF0C\\u53EA\\u597D\\u6765\\u70B9\\u786C\\u6838\\u7684\\u4E86\\uFF0C\\u6B63\\u597Dgo\\u4E5F\\u662F\\u81EA\\u4E3E\\u7684\\uFF0Cgo\\u8BED\\u8A00\\u7684go\\u8BED\\u8A00\\u6E90\\u7801\\u8FD8\\u662F\\u53EF\\u4EE5\\u770B\\u770B\\u7684\\u3002\"), mdx(\"h4\", null, \"3.6 \\u6E90\\u7801\\u4E2D\\u7684\\u7EBF\\u7D22\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"git clone https://github.com/golang/go.git\\ncd go\\ncode .\\n\")), mdx(\"p\", null, \"\\u4E0A\\u6765\\u76F4\\u63A5\\u4E00\\u4E2A\\u95EA\\u7535\\u4E09\\u8FDE\\u7801\\uFF0C\\u7528\\u547D\\u4EE4\\u884C\\u6253\\u5F00\\u6211\\u4E60\\u60EF\\u7684vscode\\u5F00\\u59CB\\u770B\\u3002\"), mdx(\"p\", null, \"\\u901A\\u8FC7\\u641C\\u7D22\\u627E\\u5230\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u548C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go install\"), \"\\u7684\\u6E90\\u7801\\uFF0C\\u5206\\u522B\\u4F4D\\u4E8E\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u547D\\u4EE4\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u6E90\\u7801\\u4F4D\\u7F6E\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"go get\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"./go/internal/get/get.go\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"go install\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"./go/internal/work/build.go\")))), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"\\u4E3A\\u4EC0\\u4E48\", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"go install\"), \"\\u4E0D\\u662F\\u5728install.go\\u91CC\\uFF1F\"), \"\\u6839\\u636E\\u6211\\u7684\\u89C2\\u5BDF\\uFF0C\\u56E0\\u4E3Ago install\\u548Cgo build\\u7684\\u529F\\u80FD\\u548C\\u5B9E\\u73B0\\u90FD\\u5F88\\u63A5\\u8FD1\\uFF0C\\u6240\\u4EE5\\u8FD9\\u4E24\\u4E2A\\u547D\\u4EE4\\u7684\\u6E90\\u7801\\u90FD\\u5728/go/internal/work/build.go\\u3002\"), mdx(\"p\", null, \"\\u4E3B\\u8981\\u770B\\u770B\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"get.go\"), \"\\u7684\\u6E90\\u7801\\uFF0C\\u91CC\\u9762\\u6709\\u4E00\\u4E2A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"runGet\"), \"\\u65B9\\u6CD5\\uFF0C\\u8FD9\\u662F\\u6267\\u884C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u7684\\u5165\\u53E3\\u65B9\\u6CD5\\uFF0C\\u8BE5\\u65B9\\u6CD5\\u4E2D\\u5B58\\u5728\\u8FD9\\u6837\\u7684\\u8C03\\u7528\\u94FE\\uFF1A\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"load.PackagesForBuild\"), \"->\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"PackagesAndErrors\"), \"->\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ImportPaths\")), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u65B9\\u6CD5\\u540D\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u6E90\\u7801\\u4F4D\\u7F6E\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"load.PackagesForBuild\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \".go/internal/load/pkg.go\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"PackagesAndErrors\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \".go/internal/load/pkg.go\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"ImportPaths\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \".go/internal/load/pkg.go\")))), mdx(\"p\", null, \"\\u8FD9\\u4E2A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ImportPaths\"), \"\\u65B9\\u6CD5\\u5B8C\\u6574\\u5982\\u4E0B\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"func ImportPaths(args []string) []*search.Match {\\n    if ModInit(); cfg.ModulesEnabled {\\n        return ModImportPaths(args)\\n    }\\n    return search.ImportPaths(args)\\n}\\n\")), mdx(\"p\", null, \"\\u53EF\\u4E00\\u770B\\u5230\\u6E90\\u7801\\u4E2D\\u5173\\u4E8E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ModInit(); cfg.ModulesEnabled\"), \"\\u662F\\u5426\\u6210\\u7ACB\\u6709\\u4E24\\u79CD\\u5904\\u7406\\u6A21\\u5F0F\\u3002\"), mdx(\"h4\", null, \"3.7 \\u5173\\u952E\\u4FE1\\u606F\"), mdx(\"p\", null, \"\\u56E0\\u4E3A\\u6E90\\u7801\\u91CC\\u5BF9\\u4E8E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ModInit()\"), \"\\u53EA\\u662F\\u7B80\\u5355\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"var ModInit func()\"), \"\\uFF0C\\u6CA1\\u6709\\u65B9\\u6CD5\\u4F53\\u53EF\\u4EE5\\u770B\\u5230\\uFF0C\\u4E5F\\u8BB8\\u662F\\u518D\\u522B\\u7684\\u5730\\u65B9\\u8FDB\\u884C\\u4E86\\u5B9E\\u73B0\\uFF0C\\u6211\\u4E5F\\u6CA1\\u6709\\u6DF1\\u7A76\\u3002\\u4E3B\\u8981\\u662F\\u770B\\u5230\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cfg.ModulesEnabled\"), \"\\u8FD9\\u4E2A\\u53D8\\u91CF\\uFF0C\\u76F4\\u63A5\\u60F3\\u5230\\u4E86go module\\u662F\\u5426\\u751F\\u6548\\u7684\\u95EE\\u9898\\uFF0C\\u4E8E\\u662F\\u767E\\u5EA6\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go module\"), \"\\u5E76\\u4E14\\u770B\\u5230\\u4E86\\u8FD9\\u7BC7\\u6587\\u7AE0\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[go module \\u57FA\\u672C\\u4F7F\\u7528](https://www.cnblogs.com/chnmig/p/11806609.html)\"), \"\\uFF0C\\u91CC\\u9762\\u6709\\u8FD9\\u6837\\u4E00\\u6BB5\\u8BDD\\uFF1A\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"go\\u57281.13\\u7248\\u672C\\u9ED8\\u8BA4\\u662Fauto,\", mdx(\"del\", {\n    parentName: \"p\"\n  }, \"\\u4EE3\\u8868\\xA0\\u5F53\\u9879\\u76EE\\u5728 GOPATH/src \\u5916\\u4E14\\u9879\\u76EE\\u6839\\u76EE\\u5F55\\u6709 go.mod \\u6587\\u4EF6\\u65F6\\uFF0C\\u5F00\\u542F go module.\\u4E5F\\u5C31\\u662F\\u8BF4,\\u5982\\u679C\\u4F60\\u4E0D\\u628A\\u4EE3\\u7801\\u653E\\u7F6E\\u5728 GOPATH/src \\u4E0B\\u5219\\u9ED8\\u8BA4\\u4F7F\\u7528 MODULE \\u7BA1\\u7406.\"), \"\\n\\u4E0D\\u597D\\u610F\\u601D\\u770B\\u9519\\u4E86,1.13+\\u7684\\u7248\\u672C\\u5224\\u65AD\\u5F00\\u4E0D\\u5F00\\u542FMODULE\\u7684\\u4F9D\\u636E\\u662F\\u6839\\u76EE\\u5F55\\u4E0B\\u6709\\u6CA1\\u6709go.mod\\u6587\\u4EF6\\n\\u6211\\u4EEC\\u4E5F\\u53EF\\u624B\\u52A8\\u66F4\\u6539\\u4E3A on(\\u5168\\u90E8\\u5F00\\u542F)/off(\\u5168\\u90E8\\u4E0D\\u5F00\\u542F)\")), mdx(\"p\", null, \"\\u6211\\u604D\\u7136\\u5927\\u609F\\uFF0C\\u56E0\\u4E3A\\u6211\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u7684\\u5730\\u65B9\\u6B63\\u597D\\u5C31\\u662F\\u968F\\u4FBF\\u4E00\\u4E2A\\u5730\\u65B9->\\u6CA1\\u6709\\u5728\\u9879\\u76EE\\u91CC->\\u81EA\\u7136\\u6CA1\\u6709\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"->\\u4E5F\\u5C31\\u6CA1\\u6709\\u5F00\\u542F\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"module\"), \"->\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ModInit(); cfg.ModulesEnabled\"), \"\\u4E0D\\u6210\\u7ACB->\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u6E90\\u7801\\u8FDB\\u5165\\u4E86\\u53E6\\u4E00\\u79CD\\u5904\\u7406\\u65B9\\u5F0F->hugo\\u6E90\\u7801\\u4E2D\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"\\u6CA1\\u6709\\u751F\\u6548\\uFF0C\\u4E00\\u5207\\u90FD\\u89E3\\u91CA\\u7684\\u901A\\u4E86\\u3002\"), mdx(\"h4\", null, \"3.8 \\u9A8C\\u8BC1\"), mdx(\"p\", null, \"\\u9A8C\\u8BC1\\u7684\\u65B9\\u6CD5\\u4E5F\\u5F88\\u7B80\\u5355\\uFF0C\\u6839\\u636E\\u524D\\u6587\\u7684\\u5224\\u65AD\\u5173\\u952E\\uFF0C\\u65B0\\u5EFA\\u4E00\\u4E2A\\u6709\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"\\u7684\\u73AF\\u5883\\u518D\\u6267\\u884C\\u4E00\\u6B21\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go get\"), \"\\u5C31\\u53EF\\u4EE5\\u4E86\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"mkdir testgo\\ncd testgo \\ngo mod init xxx\\ngo: creating new go.mod: module xxx\\ngo get -v github.com/gohugoio/hugo\\n\")), mdx(\"p\", null, \"\\u5728\\u6709\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"go.mod\"), \"\\u5B58\\u5728\\u7684\\u73AF\\u5883\\u4E0B\\u662F\\u53EF\\u4EE5\\u5B89\\u88C5\\u6210\\u529F\\u7684\\uFF0C\\u4E5F\\u8BC1\\u660E\\u4E86\\u524D\\u9762\\u7684\\u8BF4\\u6CD5\\uFF0C\\u81F3\\u6B64\\u4E00\\u5207\\u90FD\\u89E3\\u51B3\\u4E86\\u3002\"), mdx(\"h3\", null, \"4. \\u7ED3\\u5C3E\"), mdx(\"p\", null, \"\\u8FD9\\u6B21\\u7684\\u95EE\\u9898\\u4E5F\\u82B1\\u4E86\\u4E00\\u6574\\u4E2A\\u4E0B\\u5348\\u7684\\u65F6\\u95F4\\u53BB\\u6392\\u67E5\\uFF0C\\u5148\\u662F\\u82B1\\u4E86\\u4E00\\u4E9B\\u65F6\\u95F4\\u601D\\u8003\\u53EF\\u80FD\\u7684\\u539F\\u56E0\\uFF0C\\u53C8\\u82B1\\u4E86\\u5F88\\u957F\\u65F6\\u95F4\\u53BB\\u770B\\u6E90\\u7801\\uFF0C\\u8BFB\\u6E90\\u7801\\u771F\\u7684\\u82B1\\u4E86\\u5F88\\u957F\\u5F88\\u957F\\u7684\\u65F6\\u95F4\\uFF0C\\u4E00\\u8FDE\\u770B\\u4E86\\u51E0\\u4E2A\\u5C0F\\u65F6\\u76F4\\u5230\\u5934\\u90FD\\u6709\\u4E9B\\u6655\\u4E86\\u5728\\u8D77\\u8EAB\\u53BB\\u5403\\u996D\\uFF0C\\u5403\\u5B8C\\u996D\\u56DE\\u6765\\u6709\\u7CBE\\u795E\\u4E86\\u7EE7\\u7EED\\u770B\\u4E86\\u4E00\\u4F1A\\u5C31\\u53D1\\u73B0\\u95EE\\u9898\\u4E86\\uFF0C\\u53EF\\u80FD\\u5728\\u6587\\u7AE0\\u4E2D\\u5C31\\u662F\\u7B80\\u5355\\u7684\\u8C03\\u7528\\u94FE\\u8DEF\\u548C\\u51E0\\u884C\\u5173\\u952E\\u4EE3\\u7801\\uFF0C\\u4F46\\u662F\\u600E\\u4E48\\u5728\\u4E0A\\u5343\\u884C\\u7684\\u6E90\\u7801\\u4E2D\\u627E\\u5230\\u8FD9\\u4E9B\\u5173\\u952E\\u4FE1\\u606F\\u8FDC\\u6CA1\\u6709\\u6587\\u7AE0\\u4E2D\\u7684\\u90A3\\u4E48\\u7B80\\u5355\\uFF0C\\u9996\\u5148\\u662F\\u8981\\u770B\\u61C2\\uFF0C\\u7136\\u540E\\u662F\\u987A\\u7740\\u8C03\\u7528\\u94FE\\u5F80\\u4E0B\\u7EE7\\u7EED\\u770B\\u61C2\\uFF0C\\u6709\\u65F6\\u5019\\u8FD8\\u4F1A\\u8BEF\\u89E3\\u7136\\u540E\\u627E\\u9519\\u65B9\\u5411\\u627E\\u4E86\\u5F88\\u4E45\\u2026\\u2026\"), mdx(\"p\", null, \"\\u4F46\\u7ED3\\u679C\\u8FD8\\u662F\\u975E\\u5E38\\u597D\\u7684\\uFF0C\\u89E3\\u51B3\\u4E86\\u81EA\\u5DF1\\u7684\\u7591\\u60D1\\uFF0C\\u66F4\\u96BE\\u80FD\\u7684\\u662F\\u5728\\u6E90\\u7801\\u91CC\\u5B66\\u5230\\u4E86\\u51E0\\u4E2A\\u5F88\\u6709\\u610F\\u601D\\u5F88\\u5999\\u7684\\u5199\\u6CD5\\uFF0C\\u6BD4\\u5982\\u8FD9\\u4E24\\u4E2A\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"// \\u8FD9\\u4E2Aelse if\\u7684\\u987A\\u5E8F\\u548C\\u4F5C\\u7528\\u57DF\\u5229\\u7528\\u7684\\u5F88\\u5145\\u5206\\nfunc CleanPatterns(patterns []string) []string {\\n    // \\u7701\\u7565\\n    var out []string\\n    for _, a := range patterns {\\n        var p, v string\\n        if build.IsLocalImport(a) || filepath.IsAbs(a) {\\n            p = a\\n        } else if i := strings.IndexByte(a, '@'); i < 0 {\\n            p = a\\n        } else {\\n            p = a[:i]\\n            v = a[i:]\\n        }\\n        // \\u7701\\u7565\\n    }\\n    // \\u7701\\u7565\\n}\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"// \\u533F\\u540D\\u51FD\\u6570+\\u51FD\\u6570\\u53D8\\u91CF+\\u9012\\u5F52+\\u95ED\\u5305\\u7684\\u5999\\u7528\\nfunc PackageList(roots []*Package) []*Package {\\n    seen := map[*Package]bool{}\\n    all := []*Package{}\\n    var walk func(*Package)\\n    walk = func(p *Package) {\\n        if seen[p] {\\n            return\\n        }\\n        seen[p] = true\\n        for _, p1 := range p.Internal.Imports {\\n            walk(p1)\\n        }\\n        all = append(all, p)\\n    }\\n    for _, root := range roots {\\n        walk(root)\\n    }\\n    return all\\n}\\n\")), mdx(\"p\", null, \"\\u5199\\u7684\\u6709\\u70B9\\u957F\\u4E86\\uFF0C\\u4F46\\u8FD8\\u662F\\u60F3\\u5B8C\\u6574\\u7684\\u8BB0\\u5F55\\u4E00\\u4E0B\\u5FC3\\u8DEF\\u5386\\u7A0B\\uFF0C\\u6298\\u817E\\u7684\\u8FC7\\u7A0B\\u8FD8\\u662F\\u5F88\\u6709\\u610F\\u601D\\u7684\\u3002\"));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"该文章的golang版本为 go version go1.14.5 darwin/amd64 心路历程 1. 报错 晚上本来想装个hugo玩玩，hugo提供了挺多安装方法比如最直接的二进制包安装、homebrew等包管理安装、docker，正好电脑里也有golang的环境，平时装go写的软件也很方便 go get…","frontmatter":{"date":"2020-12-08 13:44","title":"记一次go get安装hugo的坑、go module、goinstall、gobuild。","draft":false}},{"id":"b2f21a73-6ec7-597f-93b6-f98af8391283","slug":"posts/code/homebrew-install","rawBody":"---\ntitle: \"使用homebrew安装你电脑上的所有软件吧\"\ndate: 2020-12-08T21:42:54+08:00\ncategories: [\"code\"]\ntags: [\"homebrew\", \"macbook\", \"macos\"]\ndraft: false\n---\n\n最近需要重装 mac，想着能不能用 homebrew 统一安装所有软件，本来以为有些软件应该会缺失的，结果竟然几乎完全可以用 brew install，简单记录供日后参考。\n\n## 已尝试可安装软件\n\natom、datagrip、deno、discord、docker、emacs、golang、chrome、idea、网易邮箱大师（mailmaster）、网易云音乐、有道词典、micro、mos、mumble、nginx、node、openjdk8、openjdk11、postman、qq、qqmusic、rust-up、sogouinput、ssr、telegram、telnet、腾讯会议（tencent-meeting）、terminus、tree、unrar、vscode、wechat、wget、aliwangwang\n\n安装命令可以拉倒最底下查看\n\n## 已尝试失败软件\n\n随着尝试软件的增加，已经出现一些不能使用brew安装的软件了\n\n- 百度网盘，brew安装的是一个很老的叫百度同步盘的东西\n- wps，brew安装的是英文版，难用\n- zoom会议，brew没有\n\n## 安装 homebrew\n\n访问[homebrew 官网](https://brew.sh/)，复制脚本执行命令即可，这里给出命令，不过还是以官网为准。\n\n```bash\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\"\n```\n\n## 用 homebrew 安装所有软件\n\n### Chrome\n\n不多解释了，程序员必备浏览器\n\n```bash\nbrew cask install google-chrome\n```\n\n### 音乐播放器\n\n网易云音乐\n\n```bash\nbrew cask install neteasemusic\n```\n\nQQ 音乐\n\n```bash\nbrew cask install qqmusic\n```\n\n### 通讯工具\n\n微信\n\n```bash\nbrew cask install wechat\n```\n\nQQ\n\n```bash\nbrew cask install qq\n```\n\nmumble，这是一个开源的游戏语音工具，可以在自己的云服务器部署。\n\n```bash\nbrew cask install mumble\n```\n\n### 终端相关\n\nterminus，一个很漂亮的终端。\n\n```bash\nbrew cask install terminus\n```\n\noh-my-zsh，最好访问[官网](https://ohmyz.sh/)获取最新安装命令。\n\n```bash\nsh -c \"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n```\n\n### 网络相关\n\n测试 socket 代理必备客户端。\n\n```bash\nbrew cask install shadowsocksx-ng-r\n```\n\nNginx，高性能 Web 服务器。\n\n```bash\nbrew install nginx\n// 通过brew安装的nginx可以通过brew services管理\nbrew services start nginx\n```\n\n### 编程应用\n\nVSCode\n\n```bash\nbrew cask install visual-studio-code\n```\n\nPostman\n\n```bash\nbrew cask install postman\n```\n\nIDEA\n\n```bash\nbrew cask install intellij-idea\n```\n\n### 开发环境\n\nPython\n\n```bash\nmacOS自带python，无需安装。\n```\n\nJava，因为最新版 JDK8 需要付费，这里选择 AdoptOpenJDK。\n\n```bash\nbrew cask install adoptopenjdk8\n```\n\nGolang\n\n```bash\nbrew install golang\n```\n\nNode.js\n\n```bash\nbrew install node\n```\n\nDeno\n\n```bash\nbrew install deno\n```\n\nRust，根据官网的教程，需要先安装 rustup，再通过 rustup 安装 rust 工具链。\n\n```bash\nbrew install rustup-init\n// 安装完通过rustup-init命令执行安装脚本\nrustup-init\n```\n\nDocker，有了 Docker 就不用装 Mysql、Redis、MongoDB、Kafka、ZooKeeper 等服务了，直接起 Docker 容器。\n\n```bash\nbrew cask install docker\n```\n\n## 安装命令集合\n\n```bash\nbrew cask install atom\nbrew cask install datagrip\nbrew install deno\nbrew cask install discord\nbrew cask install docker\nbrew install emacs\nbrew install golang\nbrew cask install google-chrome\nbrew cask install intellij-idea\nbrew cask install mailmaster\nbrew install micro\nbrew cask install mos\nbrew cask install mumble\nbrew cask install neteasemusic\nbrew install nginx\nbrew services start nginx\nbrew install node\nbrew cask install adoptopenjdk8\nbrew install openjdk@11\nbrew cask install popo\nbrew cask install postman\nbrew cask install QQ\nbrew cask install qqmusic\nbrew install rustup-init\nbrew cask install sogouinput\nbrew cask install shadowsocksx-ng-r\nbrew cask install telegram\nbrew install telnet\nbrew cask install tencent-meeting\nbrew cask install terminus\nbrew install tree\nbrew install unrar\nbrew cask install visual-studio-code\nbrew cask install wechat\nbrew install wget\nbrew cask install youdaodict\nbrew cask install aliwangwang\n```\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"使用homebrew安装你电脑上的所有软件吧\",\n  \"date\": \"2020-12-08T13:42:54.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"homebrew\", \"macbook\", \"macos\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u6700\\u8FD1\\u9700\\u8981\\u91CD\\u88C5 mac\\uFF0C\\u60F3\\u7740\\u80FD\\u4E0D\\u80FD\\u7528 homebrew \\u7EDF\\u4E00\\u5B89\\u88C5\\u6240\\u6709\\u8F6F\\u4EF6\\uFF0C\\u672C\\u6765\\u4EE5\\u4E3A\\u6709\\u4E9B\\u8F6F\\u4EF6\\u5E94\\u8BE5\\u4F1A\\u7F3A\\u5931\\u7684\\uFF0C\\u7ED3\\u679C\\u7ADF\\u7136\\u51E0\\u4E4E\\u5B8C\\u5168\\u53EF\\u4EE5\\u7528 brew install\\uFF0C\\u7B80\\u5355\\u8BB0\\u5F55\\u4F9B\\u65E5\\u540E\\u53C2\\u8003\\u3002\"), mdx(\"h2\", null, \"\\u5DF2\\u5C1D\\u8BD5\\u53EF\\u5B89\\u88C5\\u8F6F\\u4EF6\"), mdx(\"p\", null, \"atom\\u3001datagrip\\u3001deno\\u3001discord\\u3001docker\\u3001emacs\\u3001golang\\u3001chrome\\u3001idea\\u3001\\u7F51\\u6613\\u90AE\\u7BB1\\u5927\\u5E08\\uFF08mailmaster\\uFF09\\u3001\\u7F51\\u6613\\u4E91\\u97F3\\u4E50\\u3001\\u6709\\u9053\\u8BCD\\u5178\\u3001micro\\u3001mos\\u3001mumble\\u3001nginx\\u3001node\\u3001openjdk8\\u3001openjdk11\\u3001postman\\u3001qq\\u3001qqmusic\\u3001rust-up\\u3001sogouinput\\u3001ssr\\u3001telegram\\u3001telnet\\u3001\\u817E\\u8BAF\\u4F1A\\u8BAE\\uFF08tencent-meeting\\uFF09\\u3001terminus\\u3001tree\\u3001unrar\\u3001vscode\\u3001wechat\\u3001wget\\u3001aliwangwang\"), mdx(\"p\", null, \"\\u5B89\\u88C5\\u547D\\u4EE4\\u53EF\\u4EE5\\u62C9\\u5012\\u6700\\u5E95\\u4E0B\\u67E5\\u770B\"), mdx(\"h2\", null, \"\\u5DF2\\u5C1D\\u8BD5\\u5931\\u8D25\\u8F6F\\u4EF6\"), mdx(\"p\", null, \"\\u968F\\u7740\\u5C1D\\u8BD5\\u8F6F\\u4EF6\\u7684\\u589E\\u52A0\\uFF0C\\u5DF2\\u7ECF\\u51FA\\u73B0\\u4E00\\u4E9B\\u4E0D\\u80FD\\u4F7F\\u7528brew\\u5B89\\u88C5\\u7684\\u8F6F\\u4EF6\\u4E86\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u767E\\u5EA6\\u7F51\\u76D8\\uFF0Cbrew\\u5B89\\u88C5\\u7684\\u662F\\u4E00\\u4E2A\\u5F88\\u8001\\u7684\\u53EB\\u767E\\u5EA6\\u540C\\u6B65\\u76D8\\u7684\\u4E1C\\u897F\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"wps\\uFF0Cbrew\\u5B89\\u88C5\\u7684\\u662F\\u82F1\\u6587\\u7248\\uFF0C\\u96BE\\u7528\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"zoom\\u4F1A\\u8BAE\\uFF0Cbrew\\u6CA1\\u6709\")), mdx(\"h2\", null, \"\\u5B89\\u88C5 homebrew\"), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://brew.sh/\"\n  }, \"homebrew \\u5B98\\u7F51\"), \"\\uFF0C\\u590D\\u5236\\u811A\\u672C\\u6267\\u884C\\u547D\\u4EE4\\u5373\\u53EF\\uFF0C\\u8FD9\\u91CC\\u7ED9\\u51FA\\u547D\\u4EE4\\uFF0C\\u4E0D\\u8FC7\\u8FD8\\u662F\\u4EE5\\u5B98\\u7F51\\u4E3A\\u51C6\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"/bin/bash -c \\\"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\\\"\\n\")), mdx(\"h2\", null, \"\\u7528 homebrew \\u5B89\\u88C5\\u6240\\u6709\\u8F6F\\u4EF6\"), mdx(\"h3\", null, \"Chrome\"), mdx(\"p\", null, \"\\u4E0D\\u591A\\u89E3\\u91CA\\u4E86\\uFF0C\\u7A0B\\u5E8F\\u5458\\u5FC5\\u5907\\u6D4F\\u89C8\\u5668\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install google-chrome\\n\")), mdx(\"h3\", null, \"\\u97F3\\u4E50\\u64AD\\u653E\\u5668\"), mdx(\"p\", null, \"\\u7F51\\u6613\\u4E91\\u97F3\\u4E50\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install neteasemusic\\n\")), mdx(\"p\", null, \"QQ \\u97F3\\u4E50\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install qqmusic\\n\")), mdx(\"h3\", null, \"\\u901A\\u8BAF\\u5DE5\\u5177\"), mdx(\"p\", null, \"\\u5FAE\\u4FE1\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install wechat\\n\")), mdx(\"p\", null, \"QQ\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install qq\\n\")), mdx(\"p\", null, \"mumble\\uFF0C\\u8FD9\\u662F\\u4E00\\u4E2A\\u5F00\\u6E90\\u7684\\u6E38\\u620F\\u8BED\\u97F3\\u5DE5\\u5177\\uFF0C\\u53EF\\u4EE5\\u5728\\u81EA\\u5DF1\\u7684\\u4E91\\u670D\\u52A1\\u5668\\u90E8\\u7F72\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install mumble\\n\")), mdx(\"h3\", null, \"\\u7EC8\\u7AEF\\u76F8\\u5173\"), mdx(\"p\", null, \"terminus\\uFF0C\\u4E00\\u4E2A\\u5F88\\u6F02\\u4EAE\\u7684\\u7EC8\\u7AEF\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install terminus\\n\")), mdx(\"p\", null, \"oh-my-zsh\\uFF0C\\u6700\\u597D\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://ohmyz.sh/\"\n  }, \"\\u5B98\\u7F51\"), \"\\u83B7\\u53D6\\u6700\\u65B0\\u5B89\\u88C5\\u547D\\u4EE4\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"sh -c \\\"$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\\\"\\n\")), mdx(\"h3\", null, \"\\u7F51\\u7EDC\\u76F8\\u5173\"), mdx(\"p\", null, \"\\u6D4B\\u8BD5 socket \\u4EE3\\u7406\\u5FC5\\u5907\\u5BA2\\u6237\\u7AEF\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install shadowsocksx-ng-r\\n\")), mdx(\"p\", null, \"Nginx\\uFF0C\\u9AD8\\u6027\\u80FD Web \\u670D\\u52A1\\u5668\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew install nginx\\n// \\u901A\\u8FC7brew\\u5B89\\u88C5\\u7684nginx\\u53EF\\u4EE5\\u901A\\u8FC7brew services\\u7BA1\\u7406\\nbrew services start nginx\\n\")), mdx(\"h3\", null, \"\\u7F16\\u7A0B\\u5E94\\u7528\"), mdx(\"p\", null, \"VSCode\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install visual-studio-code\\n\")), mdx(\"p\", null, \"Postman\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install postman\\n\")), mdx(\"p\", null, \"IDEA\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install intellij-idea\\n\")), mdx(\"h3\", null, \"\\u5F00\\u53D1\\u73AF\\u5883\"), mdx(\"p\", null, \"Python\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"macOS\\u81EA\\u5E26python\\uFF0C\\u65E0\\u9700\\u5B89\\u88C5\\u3002\\n\")), mdx(\"p\", null, \"Java\\uFF0C\\u56E0\\u4E3A\\u6700\\u65B0\\u7248 JDK8 \\u9700\\u8981\\u4ED8\\u8D39\\uFF0C\\u8FD9\\u91CC\\u9009\\u62E9 AdoptOpenJDK\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install adoptopenjdk8\\n\")), mdx(\"p\", null, \"Golang\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew install golang\\n\")), mdx(\"p\", null, \"Node.js\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew install node\\n\")), mdx(\"p\", null, \"Deno\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew install deno\\n\")), mdx(\"p\", null, \"Rust\\uFF0C\\u6839\\u636E\\u5B98\\u7F51\\u7684\\u6559\\u7A0B\\uFF0C\\u9700\\u8981\\u5148\\u5B89\\u88C5 rustup\\uFF0C\\u518D\\u901A\\u8FC7 rustup \\u5B89\\u88C5 rust \\u5DE5\\u5177\\u94FE\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew install rustup-init\\n// \\u5B89\\u88C5\\u5B8C\\u901A\\u8FC7rustup-init\\u547D\\u4EE4\\u6267\\u884C\\u5B89\\u88C5\\u811A\\u672C\\nrustup-init\\n\")), mdx(\"p\", null, \"Docker\\uFF0C\\u6709\\u4E86 Docker \\u5C31\\u4E0D\\u7528\\u88C5 Mysql\\u3001Redis\\u3001MongoDB\\u3001Kafka\\u3001ZooKeeper \\u7B49\\u670D\\u52A1\\u4E86\\uFF0C\\u76F4\\u63A5\\u8D77 Docker \\u5BB9\\u5668\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install docker\\n\")), mdx(\"h2\", null, \"\\u5B89\\u88C5\\u547D\\u4EE4\\u96C6\\u5408\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"brew cask install atom\\nbrew cask install datagrip\\nbrew install deno\\nbrew cask install discord\\nbrew cask install docker\\nbrew install emacs\\nbrew install golang\\nbrew cask install google-chrome\\nbrew cask install intellij-idea\\nbrew cask install mailmaster\\nbrew install micro\\nbrew cask install mos\\nbrew cask install mumble\\nbrew cask install neteasemusic\\nbrew install nginx\\nbrew services start nginx\\nbrew install node\\nbrew cask install adoptopenjdk8\\nbrew install openjdk@11\\nbrew cask install popo\\nbrew cask install postman\\nbrew cask install QQ\\nbrew cask install qqmusic\\nbrew install rustup-init\\nbrew cask install sogouinput\\nbrew cask install shadowsocksx-ng-r\\nbrew cask install telegram\\nbrew install telnet\\nbrew cask install tencent-meeting\\nbrew cask install terminus\\nbrew install tree\\nbrew install unrar\\nbrew cask install visual-studio-code\\nbrew cask install wechat\\nbrew install wget\\nbrew cask install youdaodict\\nbrew cask install aliwangwang\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"最近需要重装 mac，想着能不能用 homebrew 统一安装所有软件，本来以为有些软件应该会缺失的，结果竟然几乎完全可以用 brew install，简单记录供日后参考。 已尝试可安装软件 atom、datagrip、deno、discord、docker、emacs、golang、chrome、idea…","frontmatter":{"date":"2020-12-08 13:42","title":"使用homebrew安装你电脑上的所有软件吧","draft":false}},{"id":"e9eb127f-876b-56e2-ab26-970136bf67ef","slug":"posts/code/iris-chatroom-demo","rawBody":"---\ntitle: \"iris项目示例，基于AJAX的简易聊天室\"\ndate: 2020-12-08T21:36:33+08:00\ncategories: [\"code\"]\ntags: [\"golang\", \"ajax\", \"chatroom\"]\ndraft: false\n---\n\n> 项目地址[https://github.com/JabinGP/demo-chatroom](https://github.com/JabinGP/demo-chatroom)，对你有帮助的话请多多star\n\ngo+iris+jwt+mysql+gorm+viper，iris项目实战简易聊天室，登录、注册、私聊、群聊。\n\n## 项目启动\n\n```cmd\ngit clone https://github.com/JabinGP/demo-chatroom.git\ncd demo-chatroom\n// 复制config.toml.example 为 config.toml 并填写数据库信息，或者可选修改端口号\ngo run demo-chatroom.go\n```\n\n默认为8888端口，启动后访问`http://localhost:8888`即可，或者访问演示地址`http://mike.jabingp.cn:8888`\n\n### 前端\n\n用了react，但是没用ui框架，很多的小细节上表现并不好，凑合着看吧，重点放在后端。\n\n聊天框设置了窗口自动滚动到底端，但是api是react提供的，发现在许多浏览器上并不兼容，使用chrome浏览器可以解决这个问题。\n\n注册后手动返回选择登陆，消息框里面的红色名称为公共发言，灰色名称为私聊发言、可以在红色的框里面指定接收者的名称，如果不指定的话，默认是公共发言，指定后只有对应的用户能看到信息。\n\n蓝色框内显示自己的用户名，点击即直接退出登录。\n\n### 后端\n\napi格式基于restful设计，登录功能使用jwt完成，许多接口需要登录状态，请求的时候需要携带JWT，具体请看[golang iris的jwt实践](https://segmentfault.com/a/1190000021187448)，另外便于测试，JWT签发有效时间只设置了20分钟，过期需要重新登录。\n\n|功能|请求方式|地址|\n|-|-|-|\n|获取登录token|POST|[http://localhost:8888/v1/login](http://localhost:8888/v1/login)|\n|查找用户|GET|[http://localhost:8888/v1/user](http://localhost:8888/v1/user)|\n|注册|POST|[http://localhost:8888/v1/user](http://localhost:8888/v1/user)|\n|用户自己修改信息|PUT|[http://localhost:8888/v1/user](http://localhost:8888/v1/user)|\n|用户发送信息|POST|[http://localhost:8888/v1/message](http://localhost:8888/v1/message)|\n|用户获取信息|GET|[http://localhost:8888/v1/message](http://localhost:8888/v1/message)|\n|用户获取token信息|GET|[http://localhost:8888/v1/token/info](http://localhost:8888/v1/token/info)|\n\n详细请求参数可以在[demo-chatroom的postman-api文档](https://documenter.getpostman.com/view/7019042/SWECVaGy?version=latest)里查看。\n\n或者查看源码，请求参数在`model/reqo`里面查看，响应参数可以在`model/reso`里查看\n\n## 前言\n\n聊天功能AJAX不是最好的选择，WebSocket比较好，但是被要求使用了AJAX所以没有选择后者。\n\n项目的前端比较简陋，因为只是作为demo使用。\n\n英语不是很好，代码注释用英语只是因为懒得切换输入法。\n\n第一次用go开发web项目，也是第一次用react写前端，由于前端没怎么注重项目结构（xjbx），就不放源码了，把项目编译后放在了assets文件夹下，可读性很差，但是可以和后端一起启动，不需要单独启动前端，比较方便查看效果。如果还有时间会考虑用原生写一个极简版的供大家参考原理。\n\n第一次用ORM操作数据库，感觉好难用，我还是宁愿手写sql，好多想要的效果翻半天文档都找不到解决方案，后期有机会考虑用sqlx重构。\n\n## 项目来源\n\n最近对Go比较有兴趣，又接到任务编写一个简易聊天室，发现目前iris的项目实践比较少，只有一些HelloWorld级别的示例，于是决定用Go来做，然后开源出来供大互相参考借鉴，当然项目结构如何设计完全基于我有限的开发经验，对于不合理的地方，请给出你宝贵的意见。\n\n## 项目要点\n\n这个项目有如下要求\n\n1. 基于AJAX\n2. 前端页面需要无刷新（自动更新数据）\n3. 登录功能\n4. 注册功能（要求用户有用户名、密码、性别、年龄、兴趣爱好）\n\n## 实现思路\n\n### 登陆功能\n\n登陆功能这次选用`JWT`来实现，`JWT`和`Session`各自的优劣就不再赘述。\n\n### 基于AJAX，且无刷新\n\n基于AJAX是所有前后端分离项目的必备，因此这个功能不过多讨论，这里重点在于无刷新，难点在哪？\n\n#### 用户操作需求\n\n用户的操作逻辑是，在聊天室里面发送数据，然后数据就被发出去，聊天界面要显示出自己发送的数据，以及要实时更新别人发出来的数据。\n\n#### 前端的操作逻辑\n\n前端和后端之间是通过AJAX来交流的，前端发送数据和后端发送数据可以表现为\n\n- 发送数据：前端将需要发送的数据以JSON格式携带在请求里，请求对于结构\n- 获取数据：前端请求后台获取消息的接口，获取最新消息\n\n这里有什么问题？问就在前端永远只能主动发起请求，而后端永远只能接受请求。这意味着最新的消息永远无法实时地从后端主动发送给前端，最新的消息只能先存放在后端，然后等待前端发起请求，后端才能返回数据。\n\n由于后端是没有能力主动推送消息给前端的，因此用户获取最新数据的解决方法是前端设置一个定时器`每隔一段比较短的时间就请求一次后台接口（轮询）`，这样就能不断更新数据。\n\n#### 后端的操作逻辑\n\n前端已经确定使用AJAX定时轮询后台接口来获取最新数据，为了数据实时性，轮询间隔会`小于1s`，这样又会带来另个问题，后端在如此频繁的请求下，一定不能每次都将所有数据都传输出去，一是数据大小导致的网路传输效率、流量成本问题，二是数据大小导致的前端判断新数据的效率问题，那么后端每次必须都返回前端还没有接收过的数据，而问题在于--后端怎么知道前端已经接收了哪些信息？\n\n这个就要利用到消息的`自增主键`，只需要前端每次请求的时候都携带上前端已经接收的`最后的消息的主键`，由于主键是不重复且自增的，我们可以很轻松的找出比该主键大的数据，也就是前端还没接收到的数据。\n\n## 项目技术栈\n\n- 语言\n  - Golang\n  - HTML\n  - CSS\n  - JavaScript\n\n- 框架\n  - Iris 后端框架\n  - React 前端框架\n  - Gorm 数据库ORM框架\n  - Viper 多类型配置文件读取支持\n\n- 数据存储\n  - Mysql 经典数据库\n\n- 技术\n  - JWT 签发登陆令牌\n  - AJAX 异步请求后端数据\n\n## 数据库设计结构\n\n> 由于使用了Gorm数据库ORM框架，以下表都是自动生成的，自带了`xxxxxx_at`字段\n\n基于如上的需求，设计了`users`和`messages`两个表\n\n### users\n\n关键字段\n\n- id\n- username\n- passwd\n- gender\n- age\n- interest\n\n数据库表结构\n\n| Field | Type | Null | Key | Default | Extra |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| id | int\\(10\\) unsigned | NO | PRI | NULL | auto\\_increment |\n| created\\_at | timestamp | YES |  | NULL |  |\n| updated\\_at | timestamp | YES |  | NULL |  |\n| deleted\\_at | timestamp | YES | MUL | NULL |  |\n| username | varchar\\(255\\) | YES |  | NULL |  |\n| passwd | varchar\\(255\\) | YES |  | NULL |  |\n| gender | bigint\\(20\\) | YES |  | NULL |  |\n| age | bigint\\(20\\) | YES |  | NULL |  |\n| interest | varchar\\(255\\) | YES |  | NULL |  |\n\n### messages\n\n关键字段\n\n- id\n- sender_id -> 对应消息发送者\n- receiver_id -> 对应消息接受者\n- content\n- send_time\n\n数据库表结构\n\n| Field | Type | Null | Key | Default | Extra |\n| :--- | :--- | :--- | :--- | :--- | :--- |\n| id | int\\(10\\) unsigned | NO | PRI | NULL | auto\\_increment |\n| created\\_at | timestamp | YES |  | NULL |  |\n| updated\\_at | timestamp | YES |  | NULL |  |\n| deleted\\_at | timestamp | YES | MUL | NULL |  |\n| sender\\_id | int\\(10\\) unsigned | YES |  | NULL |  |\n| receiver\\_id | int\\(10\\) unsigned | YES |  | NULL |  |\n| content | varchar\\(255\\) | YES |  | NULL |  |\n| send\\_time | timestamp | YES |  | NULL |  |\n\n## 项目结构\n\n> 以下结构出于个人经验，有不当之处请给出宝贵意见\n\n- route 路由层，负责将\"\\xxx\\xxx\"请求映射到对应的函数\n- middleware 中间件层，可以在执行函数前后进行拦截并处理，如登陆拦截\n- controller 控制层，存放与\"\\xxx\\xxx\"请求对应的函数，根据请求，调用业务层，并将数据进行格式封装返回\n- service 业务层，调用持久层完成业务逻辑\n- dao 持久层，可以理解为sql执行到函数执行的封装，由于使用了ORM，本项目没有dao层目录\n- database 提供数据库连接\n- model 定义一系列结构体\n  - pojo 业务逻辑实体，如User，Message\n  - reqo 请求数据实体，对应controller中的每个方法\n  - reso 响应数据实体，对应controller中的每个方法\n- config 读取配置，并提供单实例的配置文件实体供外访问\n- tool 工具层\n- assets 静态资源目录，存放静态资源（前端文件）\n\n### pojo、reqo、reso都是什么\n\n- pojo\n\n  很好理解，就是数据库对应的实体，但不要求与数据库字段一一对应\n\n- reqo(request object)、reso(response object)\n\n  不同接口请求的时候，可以携带的参数以及响应的数据也不同，所以为每一个接口设计一个对应的请求实体和响应实体\n\n### controller、service、dao到底有什么区别\n\n> 以下为个人理解\n\n- Controller\n\n  主要职责是，接受请求的请求参数，转换为reqo，进行简单的请求参数验证（我个人的定义与数据库无关的验证，如非空、非零），调用Service层的函数获取pojo结果，并将pojo结果转换封装为reso返回。\n\n- Service\n\n  主要职责是，对Dao层的接口进一步封装，提供通用的接口给Controller调用，返回数据可以是pojo，在Service内需要进行数据的验证，如（新增用户，校验用户名是否重复）。\n\n- Dao\n\n  这里基本上一个方法直接对应一条sql语句，不做任何的验证，认为接收到的数据是可靠的（已经经过了Controller和Service两层的参数验证了），返回数据可以是pojo。\n\n> 项目地址[https://github.com/JabinGP/demo-chatroom](https://github.com/JabinGP/demo-chatroom)，对你有帮助的话请多多star！\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"iris项目示例，基于AJAX的简易聊天室\",\n  \"date\": \"2020-12-08T13:36:33.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"golang\", \"ajax\", \"chatroom\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u9879\\u76EE\\u5730\\u5740\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/JabinGP/demo-chatroom\"\n  }, \"https://github.com/JabinGP/demo-chatroom\"), \"\\uFF0C\\u5BF9\\u4F60\\u6709\\u5E2E\\u52A9\\u7684\\u8BDD\\u8BF7\\u591A\\u591Astar\")), mdx(\"p\", null, \"go+iris+jwt+mysql+gorm+viper\\uFF0Ciris\\u9879\\u76EE\\u5B9E\\u6218\\u7B80\\u6613\\u804A\\u5929\\u5BA4\\uFF0C\\u767B\\u5F55\\u3001\\u6CE8\\u518C\\u3001\\u79C1\\u804A\\u3001\\u7FA4\\u804A\\u3002\"), mdx(\"h2\", null, \"\\u9879\\u76EE\\u542F\\u52A8\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"git clone https://github.com/JabinGP/demo-chatroom.git\\ncd demo-chatroom\\n// \\u590D\\u5236config.toml.example \\u4E3A config.toml \\u5E76\\u586B\\u5199\\u6570\\u636E\\u5E93\\u4FE1\\u606F\\uFF0C\\u6216\\u8005\\u53EF\\u9009\\u4FEE\\u6539\\u7AEF\\u53E3\\u53F7\\ngo run demo-chatroom.go\\n\")), mdx(\"p\", null, \"\\u9ED8\\u8BA4\\u4E3A8888\\u7AEF\\u53E3\\uFF0C\\u542F\\u52A8\\u540E\\u8BBF\\u95EE\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://localhost:8888\"), \"\\u5373\\u53EF\\uFF0C\\u6216\\u8005\\u8BBF\\u95EE\\u6F14\\u793A\\u5730\\u5740\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"http://mike.jabingp.cn:8888\")), mdx(\"h3\", null, \"\\u524D\\u7AEF\"), mdx(\"p\", null, \"\\u7528\\u4E86react\\uFF0C\\u4F46\\u662F\\u6CA1\\u7528ui\\u6846\\u67B6\\uFF0C\\u5F88\\u591A\\u7684\\u5C0F\\u7EC6\\u8282\\u4E0A\\u8868\\u73B0\\u5E76\\u4E0D\\u597D\\uFF0C\\u51D1\\u5408\\u7740\\u770B\\u5427\\uFF0C\\u91CD\\u70B9\\u653E\\u5728\\u540E\\u7AEF\\u3002\"), mdx(\"p\", null, \"\\u804A\\u5929\\u6846\\u8BBE\\u7F6E\\u4E86\\u7A97\\u53E3\\u81EA\\u52A8\\u6EDA\\u52A8\\u5230\\u5E95\\u7AEF\\uFF0C\\u4F46\\u662Fapi\\u662Freact\\u63D0\\u4F9B\\u7684\\uFF0C\\u53D1\\u73B0\\u5728\\u8BB8\\u591A\\u6D4F\\u89C8\\u5668\\u4E0A\\u5E76\\u4E0D\\u517C\\u5BB9\\uFF0C\\u4F7F\\u7528chrome\\u6D4F\\u89C8\\u5668\\u53EF\\u4EE5\\u89E3\\u51B3\\u8FD9\\u4E2A\\u95EE\\u9898\\u3002\"), mdx(\"p\", null, \"\\u6CE8\\u518C\\u540E\\u624B\\u52A8\\u8FD4\\u56DE\\u9009\\u62E9\\u767B\\u9646\\uFF0C\\u6D88\\u606F\\u6846\\u91CC\\u9762\\u7684\\u7EA2\\u8272\\u540D\\u79F0\\u4E3A\\u516C\\u5171\\u53D1\\u8A00\\uFF0C\\u7070\\u8272\\u540D\\u79F0\\u4E3A\\u79C1\\u804A\\u53D1\\u8A00\\u3001\\u53EF\\u4EE5\\u5728\\u7EA2\\u8272\\u7684\\u6846\\u91CC\\u9762\\u6307\\u5B9A\\u63A5\\u6536\\u8005\\u7684\\u540D\\u79F0\\uFF0C\\u5982\\u679C\\u4E0D\\u6307\\u5B9A\\u7684\\u8BDD\\uFF0C\\u9ED8\\u8BA4\\u662F\\u516C\\u5171\\u53D1\\u8A00\\uFF0C\\u6307\\u5B9A\\u540E\\u53EA\\u6709\\u5BF9\\u5E94\\u7684\\u7528\\u6237\\u80FD\\u770B\\u5230\\u4FE1\\u606F\\u3002\"), mdx(\"p\", null, \"\\u84DD\\u8272\\u6846\\u5185\\u663E\\u793A\\u81EA\\u5DF1\\u7684\\u7528\\u6237\\u540D\\uFF0C\\u70B9\\u51FB\\u5373\\u76F4\\u63A5\\u9000\\u51FA\\u767B\\u5F55\\u3002\"), mdx(\"h3\", null, \"\\u540E\\u7AEF\"), mdx(\"p\", null, \"api\\u683C\\u5F0F\\u57FA\\u4E8Erestful\\u8BBE\\u8BA1\\uFF0C\\u767B\\u5F55\\u529F\\u80FD\\u4F7F\\u7528jwt\\u5B8C\\u6210\\uFF0C\\u8BB8\\u591A\\u63A5\\u53E3\\u9700\\u8981\\u767B\\u5F55\\u72B6\\u6001\\uFF0C\\u8BF7\\u6C42\\u7684\\u65F6\\u5019\\u9700\\u8981\\u643A\\u5E26JWT\\uFF0C\\u5177\\u4F53\\u8BF7\\u770B\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://segmentfault.com/a/1190000021187448\"\n  }, \"golang iris\\u7684jwt\\u5B9E\\u8DF5\"), \"\\uFF0C\\u53E6\\u5916\\u4FBF\\u4E8E\\u6D4B\\u8BD5\\uFF0CJWT\\u7B7E\\u53D1\\u6709\\u6548\\u65F6\\u95F4\\u53EA\\u8BBE\\u7F6E\\u4E8620\\u5206\\u949F\\uFF0C\\u8FC7\\u671F\\u9700\\u8981\\u91CD\\u65B0\\u767B\\u5F55\\u3002\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u529F\\u80FD\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u8BF7\\u6C42\\u65B9\\u5F0F\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u5730\\u5740\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u83B7\\u53D6\\u767B\\u5F55token\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"POST\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"http://localhost:8888/v1/login\"\n  }, \"http://localhost:8888/v1/login\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u67E5\\u627E\\u7528\\u6237\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"GET\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"http://localhost:8888/v1/user\"\n  }, \"http://localhost:8888/v1/user\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u6CE8\\u518C\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"POST\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"http://localhost:8888/v1/user\"\n  }, \"http://localhost:8888/v1/user\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u7528\\u6237\\u81EA\\u5DF1\\u4FEE\\u6539\\u4FE1\\u606F\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"PUT\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"http://localhost:8888/v1/user\"\n  }, \"http://localhost:8888/v1/user\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u7528\\u6237\\u53D1\\u9001\\u4FE1\\u606F\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"POST\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"http://localhost:8888/v1/message\"\n  }, \"http://localhost:8888/v1/message\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u7528\\u6237\\u83B7\\u53D6\\u4FE1\\u606F\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"GET\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"http://localhost:8888/v1/message\"\n  }, \"http://localhost:8888/v1/message\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\u7528\\u6237\\u83B7\\u53D6token\\u4FE1\\u606F\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"GET\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, mdx(\"a\", {\n    parentName: \"td\",\n    \"href\": \"http://localhost:8888/v1/token/info\"\n  }, \"http://localhost:8888/v1/token/info\"))))), mdx(\"p\", null, \"\\u8BE6\\u7EC6\\u8BF7\\u6C42\\u53C2\\u6570\\u53EF\\u4EE5\\u5728\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://documenter.getpostman.com/view/7019042/SWECVaGy?version=latest\"\n  }, \"demo-chatroom\\u7684postman-api\\u6587\\u6863\"), \"\\u91CC\\u67E5\\u770B\\u3002\"), mdx(\"p\", null, \"\\u6216\\u8005\\u67E5\\u770B\\u6E90\\u7801\\uFF0C\\u8BF7\\u6C42\\u53C2\\u6570\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"model/reqo\"), \"\\u91CC\\u9762\\u67E5\\u770B\\uFF0C\\u54CD\\u5E94\\u53C2\\u6570\\u53EF\\u4EE5\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"model/reso\"), \"\\u91CC\\u67E5\\u770B\"), mdx(\"h2\", null, \"\\u524D\\u8A00\"), mdx(\"p\", null, \"\\u804A\\u5929\\u529F\\u80FDAJAX\\u4E0D\\u662F\\u6700\\u597D\\u7684\\u9009\\u62E9\\uFF0CWebSocket\\u6BD4\\u8F83\\u597D\\uFF0C\\u4F46\\u662F\\u88AB\\u8981\\u6C42\\u4F7F\\u7528\\u4E86AJAX\\u6240\\u4EE5\\u6CA1\\u6709\\u9009\\u62E9\\u540E\\u8005\\u3002\"), mdx(\"p\", null, \"\\u9879\\u76EE\\u7684\\u524D\\u7AEF\\u6BD4\\u8F83\\u7B80\\u964B\\uFF0C\\u56E0\\u4E3A\\u53EA\\u662F\\u4F5C\\u4E3Ademo\\u4F7F\\u7528\\u3002\"), mdx(\"p\", null, \"\\u82F1\\u8BED\\u4E0D\\u662F\\u5F88\\u597D\\uFF0C\\u4EE3\\u7801\\u6CE8\\u91CA\\u7528\\u82F1\\u8BED\\u53EA\\u662F\\u56E0\\u4E3A\\u61D2\\u5F97\\u5207\\u6362\\u8F93\\u5165\\u6CD5\\u3002\"), mdx(\"p\", null, \"\\u7B2C\\u4E00\\u6B21\\u7528go\\u5F00\\u53D1web\\u9879\\u76EE\\uFF0C\\u4E5F\\u662F\\u7B2C\\u4E00\\u6B21\\u7528react\\u5199\\u524D\\u7AEF\\uFF0C\\u7531\\u4E8E\\u524D\\u7AEF\\u6CA1\\u600E\\u4E48\\u6CE8\\u91CD\\u9879\\u76EE\\u7ED3\\u6784\\uFF08xjbx\\uFF09\\uFF0C\\u5C31\\u4E0D\\u653E\\u6E90\\u7801\\u4E86\\uFF0C\\u628A\\u9879\\u76EE\\u7F16\\u8BD1\\u540E\\u653E\\u5728\\u4E86assets\\u6587\\u4EF6\\u5939\\u4E0B\\uFF0C\\u53EF\\u8BFB\\u6027\\u5F88\\u5DEE\\uFF0C\\u4F46\\u662F\\u53EF\\u4EE5\\u548C\\u540E\\u7AEF\\u4E00\\u8D77\\u542F\\u52A8\\uFF0C\\u4E0D\\u9700\\u8981\\u5355\\u72EC\\u542F\\u52A8\\u524D\\u7AEF\\uFF0C\\u6BD4\\u8F83\\u65B9\\u4FBF\\u67E5\\u770B\\u6548\\u679C\\u3002\\u5982\\u679C\\u8FD8\\u6709\\u65F6\\u95F4\\u4F1A\\u8003\\u8651\\u7528\\u539F\\u751F\\u5199\\u4E00\\u4E2A\\u6781\\u7B80\\u7248\\u7684\\u4F9B\\u5927\\u5BB6\\u53C2\\u8003\\u539F\\u7406\\u3002\"), mdx(\"p\", null, \"\\u7B2C\\u4E00\\u6B21\\u7528ORM\\u64CD\\u4F5C\\u6570\\u636E\\u5E93\\uFF0C\\u611F\\u89C9\\u597D\\u96BE\\u7528\\uFF0C\\u6211\\u8FD8\\u662F\\u5B81\\u613F\\u624B\\u5199sql\\uFF0C\\u597D\\u591A\\u60F3\\u8981\\u7684\\u6548\\u679C\\u7FFB\\u534A\\u5929\\u6587\\u6863\\u90FD\\u627E\\u4E0D\\u5230\\u89E3\\u51B3\\u65B9\\u6848\\uFF0C\\u540E\\u671F\\u6709\\u673A\\u4F1A\\u8003\\u8651\\u7528sqlx\\u91CD\\u6784\\u3002\"), mdx(\"h2\", null, \"\\u9879\\u76EE\\u6765\\u6E90\"), mdx(\"p\", null, \"\\u6700\\u8FD1\\u5BF9Go\\u6BD4\\u8F83\\u6709\\u5174\\u8DA3\\uFF0C\\u53C8\\u63A5\\u5230\\u4EFB\\u52A1\\u7F16\\u5199\\u4E00\\u4E2A\\u7B80\\u6613\\u804A\\u5929\\u5BA4\\uFF0C\\u53D1\\u73B0\\u76EE\\u524Diris\\u7684\\u9879\\u76EE\\u5B9E\\u8DF5\\u6BD4\\u8F83\\u5C11\\uFF0C\\u53EA\\u6709\\u4E00\\u4E9BHelloWorld\\u7EA7\\u522B\\u7684\\u793A\\u4F8B\\uFF0C\\u4E8E\\u662F\\u51B3\\u5B9A\\u7528Go\\u6765\\u505A\\uFF0C\\u7136\\u540E\\u5F00\\u6E90\\u51FA\\u6765\\u4F9B\\u5927\\u4E92\\u76F8\\u53C2\\u8003\\u501F\\u9274\\uFF0C\\u5F53\\u7136\\u9879\\u76EE\\u7ED3\\u6784\\u5982\\u4F55\\u8BBE\\u8BA1\\u5B8C\\u5168\\u57FA\\u4E8E\\u6211\\u6709\\u9650\\u7684\\u5F00\\u53D1\\u7ECF\\u9A8C\\uFF0C\\u5BF9\\u4E8E\\u4E0D\\u5408\\u7406\\u7684\\u5730\\u65B9\\uFF0C\\u8BF7\\u7ED9\\u51FA\\u4F60\\u5B9D\\u8D35\\u7684\\u610F\\u89C1\\u3002\"), mdx(\"h2\", null, \"\\u9879\\u76EE\\u8981\\u70B9\"), mdx(\"p\", null, \"\\u8FD9\\u4E2A\\u9879\\u76EE\\u6709\\u5982\\u4E0B\\u8981\\u6C42\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u57FA\\u4E8EAJAX\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u524D\\u7AEF\\u9875\\u9762\\u9700\\u8981\\u65E0\\u5237\\u65B0\\uFF08\\u81EA\\u52A8\\u66F4\\u65B0\\u6570\\u636E\\uFF09\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u767B\\u5F55\\u529F\\u80FD\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\u6CE8\\u518C\\u529F\\u80FD\\uFF08\\u8981\\u6C42\\u7528\\u6237\\u6709\\u7528\\u6237\\u540D\\u3001\\u5BC6\\u7801\\u3001\\u6027\\u522B\\u3001\\u5E74\\u9F84\\u3001\\u5174\\u8DA3\\u7231\\u597D\\uFF09\")), mdx(\"h2\", null, \"\\u5B9E\\u73B0\\u601D\\u8DEF\"), mdx(\"h3\", null, \"\\u767B\\u9646\\u529F\\u80FD\"), mdx(\"p\", null, \"\\u767B\\u9646\\u529F\\u80FD\\u8FD9\\u6B21\\u9009\\u7528\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JWT\"), \"\\u6765\\u5B9E\\u73B0\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"JWT\"), \"\\u548C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Session\"), \"\\u5404\\u81EA\\u7684\\u4F18\\u52A3\\u5C31\\u4E0D\\u518D\\u8D58\\u8FF0\\u3002\"), mdx(\"h3\", null, \"\\u57FA\\u4E8EAJAX\\uFF0C\\u4E14\\u65E0\\u5237\\u65B0\"), mdx(\"p\", null, \"\\u57FA\\u4E8EAJAX\\u662F\\u6240\\u6709\\u524D\\u540E\\u7AEF\\u5206\\u79BB\\u9879\\u76EE\\u7684\\u5FC5\\u5907\\uFF0C\\u56E0\\u6B64\\u8FD9\\u4E2A\\u529F\\u80FD\\u4E0D\\u8FC7\\u591A\\u8BA8\\u8BBA\\uFF0C\\u8FD9\\u91CC\\u91CD\\u70B9\\u5728\\u4E8E\\u65E0\\u5237\\u65B0\\uFF0C\\u96BE\\u70B9\\u5728\\u54EA\\uFF1F\"), mdx(\"h4\", null, \"\\u7528\\u6237\\u64CD\\u4F5C\\u9700\\u6C42\"), mdx(\"p\", null, \"\\u7528\\u6237\\u7684\\u64CD\\u4F5C\\u903B\\u8F91\\u662F\\uFF0C\\u5728\\u804A\\u5929\\u5BA4\\u91CC\\u9762\\u53D1\\u9001\\u6570\\u636E\\uFF0C\\u7136\\u540E\\u6570\\u636E\\u5C31\\u88AB\\u53D1\\u51FA\\u53BB\\uFF0C\\u804A\\u5929\\u754C\\u9762\\u8981\\u663E\\u793A\\u51FA\\u81EA\\u5DF1\\u53D1\\u9001\\u7684\\u6570\\u636E\\uFF0C\\u4EE5\\u53CA\\u8981\\u5B9E\\u65F6\\u66F4\\u65B0\\u522B\\u4EBA\\u53D1\\u51FA\\u6765\\u7684\\u6570\\u636E\\u3002\"), mdx(\"h4\", null, \"\\u524D\\u7AEF\\u7684\\u64CD\\u4F5C\\u903B\\u8F91\"), mdx(\"p\", null, \"\\u524D\\u7AEF\\u548C\\u540E\\u7AEF\\u4E4B\\u95F4\\u662F\\u901A\\u8FC7AJAX\\u6765\\u4EA4\\u6D41\\u7684\\uFF0C\\u524D\\u7AEF\\u53D1\\u9001\\u6570\\u636E\\u548C\\u540E\\u7AEF\\u53D1\\u9001\\u6570\\u636E\\u53EF\\u4EE5\\u8868\\u73B0\\u4E3A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u53D1\\u9001\\u6570\\u636E\\uFF1A\\u524D\\u7AEF\\u5C06\\u9700\\u8981\\u53D1\\u9001\\u7684\\u6570\\u636E\\u4EE5JSON\\u683C\\u5F0F\\u643A\\u5E26\\u5728\\u8BF7\\u6C42\\u91CC\\uFF0C\\u8BF7\\u6C42\\u5BF9\\u4E8E\\u7ED3\\u6784\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\u83B7\\u53D6\\u6570\\u636E\\uFF1A\\u524D\\u7AEF\\u8BF7\\u6C42\\u540E\\u53F0\\u83B7\\u53D6\\u6D88\\u606F\\u7684\\u63A5\\u53E3\\uFF0C\\u83B7\\u53D6\\u6700\\u65B0\\u6D88\\u606F\")), mdx(\"p\", null, \"\\u8FD9\\u91CC\\u6709\\u4EC0\\u4E48\\u95EE\\u9898\\uFF1F\\u95EE\\u5C31\\u5728\\u524D\\u7AEF\\u6C38\\u8FDC\\u53EA\\u80FD\\u4E3B\\u52A8\\u53D1\\u8D77\\u8BF7\\u6C42\\uFF0C\\u800C\\u540E\\u7AEF\\u6C38\\u8FDC\\u53EA\\u80FD\\u63A5\\u53D7\\u8BF7\\u6C42\\u3002\\u8FD9\\u610F\\u5473\\u7740\\u6700\\u65B0\\u7684\\u6D88\\u606F\\u6C38\\u8FDC\\u65E0\\u6CD5\\u5B9E\\u65F6\\u5730\\u4ECE\\u540E\\u7AEF\\u4E3B\\u52A8\\u53D1\\u9001\\u7ED9\\u524D\\u7AEF\\uFF0C\\u6700\\u65B0\\u7684\\u6D88\\u606F\\u53EA\\u80FD\\u5148\\u5B58\\u653E\\u5728\\u540E\\u7AEF\\uFF0C\\u7136\\u540E\\u7B49\\u5F85\\u524D\\u7AEF\\u53D1\\u8D77\\u8BF7\\u6C42\\uFF0C\\u540E\\u7AEF\\u624D\\u80FD\\u8FD4\\u56DE\\u6570\\u636E\\u3002\"), mdx(\"p\", null, \"\\u7531\\u4E8E\\u540E\\u7AEF\\u662F\\u6CA1\\u6709\\u80FD\\u529B\\u4E3B\\u52A8\\u63A8\\u9001\\u6D88\\u606F\\u7ED9\\u524D\\u7AEF\\u7684\\uFF0C\\u56E0\\u6B64\\u7528\\u6237\\u83B7\\u53D6\\u6700\\u65B0\\u6570\\u636E\\u7684\\u89E3\\u51B3\\u65B9\\u6CD5\\u662F\\u524D\\u7AEF\\u8BBE\\u7F6E\\u4E00\\u4E2A\\u5B9A\\u65F6\\u5668\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\u6BCF\\u9694\\u4E00\\u6BB5\\u6BD4\\u8F83\\u77ED\\u7684\\u65F6\\u95F4\\u5C31\\u8BF7\\u6C42\\u4E00\\u6B21\\u540E\\u53F0\\u63A5\\u53E3\\uFF08\\u8F6E\\u8BE2\\uFF09\"), \"\\uFF0C\\u8FD9\\u6837\\u5C31\\u80FD\\u4E0D\\u65AD\\u66F4\\u65B0\\u6570\\u636E\\u3002\"), mdx(\"h4\", null, \"\\u540E\\u7AEF\\u7684\\u64CD\\u4F5C\\u903B\\u8F91\"), mdx(\"p\", null, \"\\u524D\\u7AEF\\u5DF2\\u7ECF\\u786E\\u5B9A\\u4F7F\\u7528AJAX\\u5B9A\\u65F6\\u8F6E\\u8BE2\\u540E\\u53F0\\u63A5\\u53E3\\u6765\\u83B7\\u53D6\\u6700\\u65B0\\u6570\\u636E\\uFF0C\\u4E3A\\u4E86\\u6570\\u636E\\u5B9E\\u65F6\\u6027\\uFF0C\\u8F6E\\u8BE2\\u95F4\\u9694\\u4F1A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\u5C0F\\u4E8E1s\"), \"\\uFF0C\\u8FD9\\u6837\\u53C8\\u4F1A\\u5E26\\u6765\\u53E6\\u4E2A\\u95EE\\u9898\\uFF0C\\u540E\\u7AEF\\u5728\\u5982\\u6B64\\u9891\\u7E41\\u7684\\u8BF7\\u6C42\\u4E0B\\uFF0C\\u4E00\\u5B9A\\u4E0D\\u80FD\\u6BCF\\u6B21\\u90FD\\u5C06\\u6240\\u6709\\u6570\\u636E\\u90FD\\u4F20\\u8F93\\u51FA\\u53BB\\uFF0C\\u4E00\\u662F\\u6570\\u636E\\u5927\\u5C0F\\u5BFC\\u81F4\\u7684\\u7F51\\u8DEF\\u4F20\\u8F93\\u6548\\u7387\\u3001\\u6D41\\u91CF\\u6210\\u672C\\u95EE\\u9898\\uFF0C\\u4E8C\\u662F\\u6570\\u636E\\u5927\\u5C0F\\u5BFC\\u81F4\\u7684\\u524D\\u7AEF\\u5224\\u65AD\\u65B0\\u6570\\u636E\\u7684\\u6548\\u7387\\u95EE\\u9898\\uFF0C\\u90A3\\u4E48\\u540E\\u7AEF\\u6BCF\\u6B21\\u5FC5\\u987B\\u90FD\\u8FD4\\u56DE\\u524D\\u7AEF\\u8FD8\\u6CA1\\u6709\\u63A5\\u6536\\u8FC7\\u7684\\u6570\\u636E\\uFF0C\\u800C\\u95EE\\u9898\\u5728\\u4E8E--\\u540E\\u7AEF\\u600E\\u4E48\\u77E5\\u9053\\u524D\\u7AEF\\u5DF2\\u7ECF\\u63A5\\u6536\\u4E86\\u54EA\\u4E9B\\u4FE1\\u606F\\uFF1F\"), mdx(\"p\", null, \"\\u8FD9\\u4E2A\\u5C31\\u8981\\u5229\\u7528\\u5230\\u6D88\\u606F\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\u81EA\\u589E\\u4E3B\\u952E\"), \"\\uFF0C\\u53EA\\u9700\\u8981\\u524D\\u7AEF\\u6BCF\\u6B21\\u8BF7\\u6C42\\u7684\\u65F6\\u5019\\u90FD\\u643A\\u5E26\\u4E0A\\u524D\\u7AEF\\u5DF2\\u7ECF\\u63A5\\u6536\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\u6700\\u540E\\u7684\\u6D88\\u606F\\u7684\\u4E3B\\u952E\"), \"\\uFF0C\\u7531\\u4E8E\\u4E3B\\u952E\\u662F\\u4E0D\\u91CD\\u590D\\u4E14\\u81EA\\u589E\\u7684\\uFF0C\\u6211\\u4EEC\\u53EF\\u4EE5\\u5F88\\u8F7B\\u677E\\u7684\\u627E\\u51FA\\u6BD4\\u8BE5\\u4E3B\\u952E\\u5927\\u7684\\u6570\\u636E\\uFF0C\\u4E5F\\u5C31\\u662F\\u524D\\u7AEF\\u8FD8\\u6CA1\\u63A5\\u6536\\u5230\\u7684\\u6570\\u636E\\u3002\"), mdx(\"h2\", null, \"\\u9879\\u76EE\\u6280\\u672F\\u6808\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u8BED\\u8A00\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Golang\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"HTML\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"CSS\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"JavaScript\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6846\\u67B6\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Iris \\u540E\\u7AEF\\u6846\\u67B6\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"React \\u524D\\u7AEF\\u6846\\u67B6\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Gorm \\u6570\\u636E\\u5E93ORM\\u6846\\u67B6\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Viper \\u591A\\u7C7B\\u578B\\u914D\\u7F6E\\u6587\\u4EF6\\u8BFB\\u53D6\\u652F\\u6301\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6570\\u636E\\u5B58\\u50A8\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Mysql \\u7ECF\\u5178\\u6570\\u636E\\u5E93\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u6280\\u672F\"), mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"JWT \\u7B7E\\u53D1\\u767B\\u9646\\u4EE4\\u724C\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"AJAX \\u5F02\\u6B65\\u8BF7\\u6C42\\u540E\\u7AEF\\u6570\\u636E\")))), mdx(\"h2\", null, \"\\u6570\\u636E\\u5E93\\u8BBE\\u8BA1\\u7ED3\\u6784\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u7531\\u4E8E\\u4F7F\\u7528\\u4E86Gorm\\u6570\\u636E\\u5E93ORM\\u6846\\u67B6\\uFF0C\\u4EE5\\u4E0B\\u8868\\u90FD\\u662F\\u81EA\\u52A8\\u751F\\u6210\\u7684\\uFF0C\\u81EA\\u5E26\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"xxxxxx_at\"), \"\\u5B57\\u6BB5\")), mdx(\"p\", null, \"\\u57FA\\u4E8E\\u5982\\u4E0A\\u7684\\u9700\\u6C42\\uFF0C\\u8BBE\\u8BA1\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"users\"), \"\\u548C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"messages\"), \"\\u4E24\\u4E2A\\u8868\"), mdx(\"h3\", null, \"users\"), mdx(\"p\", null, \"\\u5173\\u952E\\u5B57\\u6BB5\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"id\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"username\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"passwd\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"gender\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"age\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"interest\")), mdx(\"p\", null, \"\\u6570\\u636E\\u5E93\\u8868\\u7ED3\\u6784\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Field\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Type\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Null\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Key\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Default\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Extra\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"id\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"int\", \"(\", \"10\", \")\", \" unsigned\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NO\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"PRI\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"auto\", \"_\", \"increment\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"created\", \"_\", \"at\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"timestamp\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"updated\", \"_\", \"at\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"timestamp\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"deleted\", \"_\", \"at\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"timestamp\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"MUL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"username\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"varchar\", \"(\", \"255\", \")\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"passwd\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"varchar\", \"(\", \"255\", \")\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"gender\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"bigint\", \"(\", \"20\", \")\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"age\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"bigint\", \"(\", \"20\", \")\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"interest\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"varchar\", \"(\", \"255\", \")\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })))), mdx(\"h3\", null, \"messages\"), mdx(\"p\", null, \"\\u5173\\u952E\\u5B57\\u6BB5\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"id\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"sender_id -> \\u5BF9\\u5E94\\u6D88\\u606F\\u53D1\\u9001\\u8005\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"receiver_id -> \\u5BF9\\u5E94\\u6D88\\u606F\\u63A5\\u53D7\\u8005\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"content\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"send_time\")), mdx(\"p\", null, \"\\u6570\\u636E\\u5E93\\u8868\\u7ED3\\u6784\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Field\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Type\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Null\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Key\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Default\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"Extra\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"id\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"int\", \"(\", \"10\", \")\", \" unsigned\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NO\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"PRI\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"auto\", \"_\", \"increment\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"created\", \"_\", \"at\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"timestamp\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"updated\", \"_\", \"at\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"timestamp\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"deleted\", \"_\", \"at\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"timestamp\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"MUL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"sender\", \"_\", \"id\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"int\", \"(\", \"10\", \")\", \" unsigned\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"receiver\", \"_\", \"id\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"int\", \"(\", \"10\", \")\", \" unsigned\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"content\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"varchar\", \"(\", \"255\", \")\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"send\", \"_\", \"time\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"timestamp\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"YES\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  }, \"NULL\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": \"left\"\n  })))), mdx(\"h2\", null, \"\\u9879\\u76EE\\u7ED3\\u6784\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u4EE5\\u4E0B\\u7ED3\\u6784\\u51FA\\u4E8E\\u4E2A\\u4EBA\\u7ECF\\u9A8C\\uFF0C\\u6709\\u4E0D\\u5F53\\u4E4B\\u5904\\u8BF7\\u7ED9\\u51FA\\u5B9D\\u8D35\\u610F\\u89C1\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"route \\u8DEF\\u7531\\u5C42\\uFF0C\\u8D1F\\u8D23\\u5C06\\\"\\\\xxx\\\\xxx\\\"\\u8BF7\\u6C42\\u6620\\u5C04\\u5230\\u5BF9\\u5E94\\u7684\\u51FD\\u6570\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"middleware \\u4E2D\\u95F4\\u4EF6\\u5C42\\uFF0C\\u53EF\\u4EE5\\u5728\\u6267\\u884C\\u51FD\\u6570\\u524D\\u540E\\u8FDB\\u884C\\u62E6\\u622A\\u5E76\\u5904\\u7406\\uFF0C\\u5982\\u767B\\u9646\\u62E6\\u622A\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"controller \\u63A7\\u5236\\u5C42\\uFF0C\\u5B58\\u653E\\u4E0E\\\"\\\\xxx\\\\xxx\\\"\\u8BF7\\u6C42\\u5BF9\\u5E94\\u7684\\u51FD\\u6570\\uFF0C\\u6839\\u636E\\u8BF7\\u6C42\\uFF0C\\u8C03\\u7528\\u4E1A\\u52A1\\u5C42\\uFF0C\\u5E76\\u5C06\\u6570\\u636E\\u8FDB\\u884C\\u683C\\u5F0F\\u5C01\\u88C5\\u8FD4\\u56DE\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"service \\u4E1A\\u52A1\\u5C42\\uFF0C\\u8C03\\u7528\\u6301\\u4E45\\u5C42\\u5B8C\\u6210\\u4E1A\\u52A1\\u903B\\u8F91\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"dao \\u6301\\u4E45\\u5C42\\uFF0C\\u53EF\\u4EE5\\u7406\\u89E3\\u4E3Asql\\u6267\\u884C\\u5230\\u51FD\\u6570\\u6267\\u884C\\u7684\\u5C01\\u88C5\\uFF0C\\u7531\\u4E8E\\u4F7F\\u7528\\u4E86ORM\\uFF0C\\u672C\\u9879\\u76EE\\u6CA1\\u6709dao\\u5C42\\u76EE\\u5F55\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"database \\u63D0\\u4F9B\\u6570\\u636E\\u5E93\\u8FDE\\u63A5\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"model \\u5B9A\\u4E49\\u4E00\\u7CFB\\u5217\\u7ED3\\u6784\\u4F53\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"pojo \\u4E1A\\u52A1\\u903B\\u8F91\\u5B9E\\u4F53\\uFF0C\\u5982User\\uFF0CMessage\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"reqo \\u8BF7\\u6C42\\u6570\\u636E\\u5B9E\\u4F53\\uFF0C\\u5BF9\\u5E94controller\\u4E2D\\u7684\\u6BCF\\u4E2A\\u65B9\\u6CD5\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"reso \\u54CD\\u5E94\\u6570\\u636E\\u5B9E\\u4F53\\uFF0C\\u5BF9\\u5E94controller\\u4E2D\\u7684\\u6BCF\\u4E2A\\u65B9\\u6CD5\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"config \\u8BFB\\u53D6\\u914D\\u7F6E\\uFF0C\\u5E76\\u63D0\\u4F9B\\u5355\\u5B9E\\u4F8B\\u7684\\u914D\\u7F6E\\u6587\\u4EF6\\u5B9E\\u4F53\\u4F9B\\u5916\\u8BBF\\u95EE\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"tool \\u5DE5\\u5177\\u5C42\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"assets \\u9759\\u6001\\u8D44\\u6E90\\u76EE\\u5F55\\uFF0C\\u5B58\\u653E\\u9759\\u6001\\u8D44\\u6E90\\uFF08\\u524D\\u7AEF\\u6587\\u4EF6\\uFF09\")), mdx(\"h3\", null, \"pojo\\u3001reqo\\u3001reso\\u90FD\\u662F\\u4EC0\\u4E48\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"pojo\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u5F88\\u597D\\u7406\\u89E3\\uFF0C\\u5C31\\u662F\\u6570\\u636E\\u5E93\\u5BF9\\u5E94\\u7684\\u5B9E\\u4F53\\uFF0C\\u4F46\\u4E0D\\u8981\\u6C42\\u4E0E\\u6570\\u636E\\u5E93\\u5B57\\u6BB5\\u4E00\\u4E00\\u5BF9\\u5E94\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"reqo(request object)\\u3001reso(response object)\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E0D\\u540C\\u63A5\\u53E3\\u8BF7\\u6C42\\u7684\\u65F6\\u5019\\uFF0C\\u53EF\\u4EE5\\u643A\\u5E26\\u7684\\u53C2\\u6570\\u4EE5\\u53CA\\u54CD\\u5E94\\u7684\\u6570\\u636E\\u4E5F\\u4E0D\\u540C\\uFF0C\\u6240\\u4EE5\\u4E3A\\u6BCF\\u4E00\\u4E2A\\u63A5\\u53E3\\u8BBE\\u8BA1\\u4E00\\u4E2A\\u5BF9\\u5E94\\u7684\\u8BF7\\u6C42\\u5B9E\\u4F53\\u548C\\u54CD\\u5E94\\u5B9E\\u4F53\"))), mdx(\"h3\", null, \"controller\\u3001service\\u3001dao\\u5230\\u5E95\\u6709\\u4EC0\\u4E48\\u533A\\u522B\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u4EE5\\u4E0B\\u4E3A\\u4E2A\\u4EBA\\u7406\\u89E3\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Controller\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E3B\\u8981\\u804C\\u8D23\\u662F\\uFF0C\\u63A5\\u53D7\\u8BF7\\u6C42\\u7684\\u8BF7\\u6C42\\u53C2\\u6570\\uFF0C\\u8F6C\\u6362\\u4E3Areqo\\uFF0C\\u8FDB\\u884C\\u7B80\\u5355\\u7684\\u8BF7\\u6C42\\u53C2\\u6570\\u9A8C\\u8BC1\\uFF08\\u6211\\u4E2A\\u4EBA\\u7684\\u5B9A\\u4E49\\u4E0E\\u6570\\u636E\\u5E93\\u65E0\\u5173\\u7684\\u9A8C\\u8BC1\\uFF0C\\u5982\\u975E\\u7A7A\\u3001\\u975E\\u96F6\\uFF09\\uFF0C\\u8C03\\u7528Service\\u5C42\\u7684\\u51FD\\u6570\\u83B7\\u53D6pojo\\u7ED3\\u679C\\uFF0C\\u5E76\\u5C06pojo\\u7ED3\\u679C\\u8F6C\\u6362\\u5C01\\u88C5\\u4E3Areso\\u8FD4\\u56DE\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Service\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u4E3B\\u8981\\u804C\\u8D23\\u662F\\uFF0C\\u5BF9Dao\\u5C42\\u7684\\u63A5\\u53E3\\u8FDB\\u4E00\\u6B65\\u5C01\\u88C5\\uFF0C\\u63D0\\u4F9B\\u901A\\u7528\\u7684\\u63A5\\u53E3\\u7ED9Controller\\u8C03\\u7528\\uFF0C\\u8FD4\\u56DE\\u6570\\u636E\\u53EF\\u4EE5\\u662Fpojo\\uFF0C\\u5728Service\\u5185\\u9700\\u8981\\u8FDB\\u884C\\u6570\\u636E\\u7684\\u9A8C\\u8BC1\\uFF0C\\u5982\\uFF08\\u65B0\\u589E\\u7528\\u6237\\uFF0C\\u6821\\u9A8C\\u7528\\u6237\\u540D\\u662F\\u5426\\u91CD\\u590D\\uFF09\\u3002\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Dao\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"\\u8FD9\\u91CC\\u57FA\\u672C\\u4E0A\\u4E00\\u4E2A\\u65B9\\u6CD5\\u76F4\\u63A5\\u5BF9\\u5E94\\u4E00\\u6761sql\\u8BED\\u53E5\\uFF0C\\u4E0D\\u505A\\u4EFB\\u4F55\\u7684\\u9A8C\\u8BC1\\uFF0C\\u8BA4\\u4E3A\\u63A5\\u6536\\u5230\\u7684\\u6570\\u636E\\u662F\\u53EF\\u9760\\u7684\\uFF08\\u5DF2\\u7ECF\\u7ECF\\u8FC7\\u4E86Controller\\u548CService\\u4E24\\u5C42\\u7684\\u53C2\\u6570\\u9A8C\\u8BC1\\u4E86\\uFF09\\uFF0C\\u8FD4\\u56DE\\u6570\\u636E\\u53EF\\u4EE5\\u662Fpojo\\u3002\"))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u9879\\u76EE\\u5730\\u5740\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/JabinGP/demo-chatroom\"\n  }, \"https://github.com/JabinGP/demo-chatroom\"), \"\\uFF0C\\u5BF9\\u4F60\\u6709\\u5E2E\\u52A9\\u7684\\u8BDD\\u8BF7\\u591A\\u591Astar\\uFF01\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"项目地址 https://github.com/JabinGP/demo-chatroom ，对你有帮助的话请多多star go+iris+jwt+mysql+gorm+viper，iris项目实战简易聊天室，登录、注册、私聊、群聊。 项目启动 默认为8888端口，启动后访问 http://localhost:888…","frontmatter":{"date":"2020-12-08 13:36","title":"iris项目示例，基于AJAX的简易聊天室","draft":false}},{"id":"1c0aa2e2-f864-5668-a722-0c0f11c39c37","slug":"posts/code/iris-jwt","rawBody":"---\ntitle: \"iris的jwt实践，获取jwt、携带jwt、验证jwt、设置过期时间、自定义错误处理函数、格式化错误返回\"\ndate: 2020-12-08T21:21:30+08:00\ncategories: [\"code\"]\ntags: [\"golang\", \"jwt\", \"iris\"]\ndraft: false\n---\n\n> 由于jwt原理已经有很多文章提及过了，这里不再赘述，本文主要介绍jwt在iris中的实践，文章的最后会给出完整代码，可以运行起来边测试边看。\n> 如果文章对你有帮助，点个赞或者留下评论将会是对我的极大鼓励！\n\n## jwt使用方向\n\n本文将jwt用于登录功能，如果是其他功能需求其实也类似，可以触类旁通。\n\n## iris中jwt的使用思想\n\niris基于中间件思想设计，对于一些重复性的操作，可以通过注册中间件来完成。对于登录功能，我们自然不希望每个api中手动判断是否过期，是否合法等，因为我们需要一个jwt中间件来完成这些操作。\n\n## 获取jwt中间件\n\n这是一个iris官方提供的jwt中间件：\n\n```go\nimport \"github.com/iris-contrib/middleware/jwt\"\n```\n\n用法如下：\n\n```go\nj := jwt.New(jwt.Config{\n    // Extractor属性可以选择从什么地方获取jwt进行验证，默认从http请求的header中的Authorization字段提取，也可指定为请求参数中的某个字段\n\n    // 从请求参数token中提取\n    // Extractor: jwt.FromParameter(\"token\"),\n\n    // 从请求头的Authorization字段中提取，这个是默认值\n    Extractor: jwt.FromAuthHeader,\n\n    // 设置一个函数返回秘钥，关键在于return []byte(\"这里设置秘钥\")\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\n      return []byte(\"My Secret\"), nil\n    },\n\n    // 设置一个加密方法\n    SigningMethod: jwt.SigningMethodHS256,\n  })\n```\n\n`jwt.Config`中还有一些可以设置的参数，但是便于理解，以以上三个参数作为演示\n\n## 使用jwt中间件\n\n由于并非所有接口都需要设置登录拦截，所以将中间件用于路由，或者路由组是比较符合业务需求的做法\n\n先给出两个接口：\n\n1. \"/getJWT\"：生成jwt并返回\n2. \"/showHello\"：没有任何限制，访问就输出\"Hello Iris JWT\"\n\n```go\npackage main\n\nimport (\n  \"github.com/kataras/iris/v12\"\n\n  \"github.com/iris-contrib/middleware/jwt\"\n)\n\nfunc main() {\n  app := iris.New()\n\n  app.Get(\"/getJWT\", func(ctx iris.Context) {\n    // 往jwt中写入了一对值\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\n      \"foo\": \"bar\",\n    })\n\n    // 签名生成jwt字符串\n    tokenString, _ := token.SignedString([]byte(\"My Secret\"))\n\n    // 返回\n    ctx.JSON(tokenString)\n  })\n\n  app.Get(\"/showHello\", func(ctx iris.Context) {\n    ctx.JSON(\"Hello Iris JWT\")\n  })\n\n  app.Run(iris.Addr(\":8080\"))\n}\n\n```\n\n访问[http://localhost:8080/getJWT](http://localhost:8080/getJWT)返回一串类似这样的字符串\n\n```json\n\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\"\n```\n\n访问[http://localhost:8080/showHello](http://localhost:8080/showHello)返回\n\n```json\n\"Hello Iris JWT\"\n```\n\n现在我们要对`showHello`接口加上jwt验证，需要用到上一小节的jwt中间件\n\n```go\npackage main\n\nimport (\n  \"github.com/kataras/iris/v12\"\n\n  \"github.com/iris-contrib/middleware/jwt\"\n)\n\nfunc main() {\n  app := iris.New()\n\n  j := jwt.New(jwt.Config{\n    // Extractor属性可以选择从什么地方获取jwt进行验证，默认从http请求的header中的Authorization字段提取，也可指定为请求参数中的某个字段\n\n    // 从请求参数token中提取\n    // Extractor: jwt.FromParameter(\"token\"),\n\n    // 从请求头的Authorization字段中提取，这个是默认值\n    Extractor: jwt.FromAuthHeader,\n\n    // 设置一个函数返回秘钥，关键在于return []byte(\"这里设置秘钥\")\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\n      return []byte(\"My Secret\"), nil\n    },\n\n    // 设置一个加密方法\n    SigningMethod: jwt.SigningMethodHS256,\n  })\n\n  app.Get(\"/getJWT\", func(ctx iris.Context) {\n    // 往jwt中写入了一对值\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\n      \"foo\": \"bar\",\n    })\n\n    // 使用设置的秘钥，签名生成jwt字符串\n    tokenString, _ := token.SignedString([]byte(\"My Secret\"))\n\n    // 返回\n    ctx.JSON(tokenString)\n  })\n\n  // 注意这里加了j.Serve作为路由的中间件\n  app.Get(\"/showHello\", j.Serve, func(ctx iris.Context) {\n    ctx.JSON(\"Hello Iris JWT\")\n  })\n\n  app.Run(iris.Addr(\":8080\"))\n}\n```\n\n访问[http://localhost:8080/showHello](http://localhost:8080/showHello)返回\n\n```cmd\nrequired authorization token not found\n```\n\n由于开启了jwt认证，你可能会想到，给`Header`中加入一个字段`Authorization`，然后值为刚刚`getJWT`接口返回的字符串就可以成功通过这个验证了。\n\n### 测试JWT验证\n\n在`Postman`（或者其他测试工具，都一样）中请求的`Headers`中加入一对值\n\n|kEY|VALUE|\n|-|-|\n|Authorization|eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw|\n\n访问[http://localhost:8080/showHello](http://localhost:8080/showHello)返回\n\n```cmd\nAuthorization header format must be Bearer {token}\n```\n\n可能你会纳闷，这个`Authorization header format must be Bearer {token}`是什么意思？按逻辑来讲，我们的做法应该是没有错的。确实，就两次请求的变化来看，`Headers`加入的`Authorization`的的确确被识别到了，但是似乎还有些小问题，根据提示，是格式上还有些出入。\n\n在`Postman`（或者其他测试工具，都一样）中请求的`Headers`中更改`Authorization`值为\n\n|kEY|VALUE|\n|-|-|\n|Authorization|JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw|\n\n这样似乎符合`Bearer {token}`格式了，访问[http://localhost:8080/showHello](http://localhost:8080/showHello)返回\n\n```json\nAuthorization header format must be Bearer {token}\n```\n\n说明格式还是不对。\n\n继续修改`Headers`\n\n|kEY|VALUE|\n|-|-|\n|Authorization|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw|\n\n访问[http://localhost:8080/showHello](http://localhost:8080/showHello)返回\n\n```json\n\"Hello Iris JWT\"\n```\n\n这次终于返回`\"Hello Iris JWT\"`了，说实话这个格式要求和这个提示有点坑。\n\n### JWT中间件做了什么\n\n可以看到，我们的`/showHello`接口纯粹就是返回`\"Hello Iris JWT\"`，没有做任何和JWT有关的操作，但是由于我们在路由上使用了JWT中间件，我们的`/showHello`接口具有了`自动JWT验证`的功能，这是JWT中间件在执行我们的接口代码之前，自动帮我们做的。\n\n修改`Headers`中的`Authorization`的值，偷偷把最后一个字符改成其他，看看接口是否能够验证出阿里这是一个假的jwt\n\n|kEY|VALUE|\n|-|-|\n|Authorization（真）|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw|\n|Authorization（假）|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uu|\n\n访问[http://localhost:8080/showHello](http://localhost:8080/showHello)返回\n\n```json\nsignature is invalid\n```\n\n可见不合法的jwt是无法通过验证的。\n\n### 获取JWT中的值\n\nJWT中间件在验证失败的时候，接口中的代码不会被执行，请求在JWT验证的时候就被响应`signature is invalid`并结束。\n而当JWT中间件验证成功的时候，我们则可以在接口中获取到JWT的信息，我们添加一个接口`/showJWT`，来输出JWT的结构：\n\n```go\napp.Get(\"/showJWT\", j.Serve, func(ctx iris.Context) {\n  jwtInfo := ctx.Values().Get(\"jwt\").(*jwt.Token)\n  ctx.JSON(jwtInfo)\n})\n```\n\n同样需要设置`Headers`带上jwt\n\n|kEY|VALUE|\n|-|-|\n|Authorization|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw|\n\n访问[http://localhost:8080/showJWT](http://localhost:8080/showJWT)返回\n\n```json\n{\n    \"Raw\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\",\n    \"Method\": {\n        \"Name\": \"HS256\",\n        \"Hash\": 5\n    },\n    \"Header\": {\n        \"alg\": \"HS256\",\n        \"typ\": \"JWT\"\n    },\n    \"Claims\": {\n        \"foo\": \"bar\"\n    },\n    \"Signature\": \"4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\",\n    \"Valid\": true\n}\n```\n\n可以看到`Claims`里面就有我们签发jwt的时候写入的数据了，如果想要在接口中拿到：\n\n```go\napp.Get(\"/showJWTFoo\", j.Serve, func(ctx iris.Context) {\n  jwtInfo := ctx.Values().Get(\"jwt\").(*jwt.Token)\n  foo := jwtInfo.Claims.(jwt.MapClaims)[\"foo\"].(string)\n  ctx.JSON(foo)\n})\n```\n\n设置`Headers`带上jwt\n\n|kEY|VALUE|\n|-|-|\n|Authorization|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw|\n\n访问[http://localhost:8080/showJWTFoo](http://localhost:8080/showJWTFoo)返回\n\n```json\n\"bar\"\n```\n\n### 设置过期时间\n\n由于jwt签发出去之后，后端并不存储，所以相当于后端并不能管理签发出去的jwt，这种情况下后端自然不能让签发出去的jwt永久有效，需要根据需求设置一个过期时间。\n\n新增一个获取JWT的接口，这次在`Claims`中写入更多的数据：\n\n```go\napp.Get(\"/getJWTWithExp\", func(ctx iris.Context) {\n  token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\n    // 根据需求，可以存一些必要的数据\n    \"userName\": \"JabinGP\",\n    \"userId\":   \"1\",\n    \"admin\":    true,\n\n    // 签发人\n    \"iss\": \"iris\",\n    // 签发时间\n    \"iat\": time.Now().Unix(),\n    // 设定过期时间，便于测试，设置1分钟过期\n    \"exp\": time.Now().Add(1 * time.Minute * time.Duration(1)).Unix(),\n  })\n\n  // 使用设置的秘钥，签名生成jwt字符串\n  tokenString, _ := token.SignedString([]byte(\"My Secret\"))\n\n  // 返回\n  ctx.JSON(tokenString)\n})\n```\n\n请求[http://localhost:8080/getJWTWithExp](http://localhost:8080/getJWTWithExp)返回\n\n```json\n\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\"\n```\n\n设置`Headers`带上新的jwt\n\n|kEY|VALUE|\n|-|-|\n|Authorization|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg|\n\n访问[localhost:8080/showJWT](localhost:8080/showJWT)返回\n\n```json\n{\n    \"Raw\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\",\n    \"Method\": {\n        \"Name\": \"HS256\",\n        \"Hash\": 5\n    },\n    \"Header\": {\n        \"alg\": \"HS256\",\n        \"typ\": \"JWT\"\n    },\n    \"Claims\": {\n        \"admin\": true,\n        \"exp\": 1575379994,\n        \"iat\": 1575379934,\n        \"iss\": \"iris\",\n        \"userId\": \"1\",\n        \"userName\": \"JabinGP\"\n    },\n    \"Signature\": \"AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\",\n    \"Valid\": true\n}\n```\n\n隔一分钟后，再次请求[localhost:8080/showJWT](localhost:8080/showJWT)返回\n\n```json\nToken is expired\n```\n\n说明过期时间设置生效。\n\n### 设置错误返回格式\n\n由于JWT中间件在检验jwt发现不合法时，会自动响应返回错误信息并结束请求，如上所示，错误都是一句话，这样的错误对于前端来说非常不友好，前端更希望能通过一个状态码来判断请求是否顺利。\n\n首先定义一个响应数据的模板：\n\n```go\n// ResModel 返回数据模板\ntype ResModel struct {\n  Code string      `json:\"code\"`\n  Msg  string      `json:\"msg\"`\n  Data interface{} `json:\"data\"`\n}\n```\n\n获取一个新的中间件，与之前不同的是自定义了错误处理函数（扒了源码改的）:\n\n注意引入的context是iris包下的，否则无法符合错误处理函数的定义。\n\n```go\nimport \"github.com/kataras/iris/v12/context\"\n```\n\n```go\n// j2 对比 j 添加了错误处理函数\nj2 := jwt.New(jwt.Config{\n  // 注意，新增了一个错误处理函数\n  ErrorHandler: func(ctx context.Context, err error) {\n    if err == nil {\n      return\n    }\n\n    ctx.StopExecution()\n    ctx.StatusCode(iris.StatusUnauthorized)\n    ctx.JSON(ResModel{\n      Code: \"501\",\n      Msg:  err.Error(),\n    })\n  },\n  // 设置一个函数返回秘钥，关键在于return []byte(\"这里设置秘钥\")\n  ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\n    return []byte(\"My Secret\"), nil\n  },\n\n  // 设置一个加密方法\n  SigningMethod: jwt.SigningMethodHS256,\n})\n```\n\n在一个新的接口上应用新的`j2`中间件\n\n```go\napp.Get(\"/showJWTErrWithFormat\", j2.Serve, func(ctx iris.Context) {\n  jwtInfo := ctx.Values().Get(\"jwt\").(*jwt.Token)\n  ctx.JSON(jwtInfo)\n})\n```\n\n设置`Headers`带上一个过期的jwt\n\n|kEY|VALUE|\n|-|-|\n|Authorization|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg|\n\n访问[localhost:8080/showJWT](localhost:8080/showJWT)返回\n\n```json\n{\n    \"code\": \"501\",\n    \"msg\": \"Token is expired\",\n    \"data\": null\n}\n```\n\n篡改`Headers`中`Authorization`的值，把最后一个字符改成其他的：`g`->`o`\n\n|kEY|VALUE|\n|-|-|\n|Authorization|Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgo|\n\n访问[localhost:8080/showJWT](localhost:8080/showJWT)返回\n\n```json\n{\n    \"code\": \"501\",\n    \"msg\": \"signature is invalid\",\n    \"data\": null\n}\n```\n\n至此，jwt基本符合使用需求了，最后附上完整的代码。\n\n## 完整代码\n\n> 如果文章对你有帮助，点个赞或者留下评论将会是对我的极大鼓励！\n\n```go\npackage main\n\nimport (\n  \"time\"\n\n  \"github.com/kataras/iris/v12\"\n\n  \"github.com/iris-contrib/middleware/jwt\"\n  \"github.com/kataras/iris/v12/context\"\n)\n\n// ResModel 返回数据模板\ntype ResModel struct {\n  Code string      `json:\"code\"`\n  Msg  string      `json:\"msg\"`\n  Data interface{} `json:\"data\"`\n}\n\nfunc main() {\n  app := iris.New()\n\n  j := jwt.New(jwt.Config{\n    // Extractor属性可以选择从什么地方获取jwt进行验证，默认从http请求的header中的Authorization字段提取，也可指定为请求参数中的某个字段\n\n    // 从请求参数token中提取\n    // Extractor: jwt.FromParameter(\"token\"),\n\n    // 从请求头的Authorization字段中提取，这个是默认值\n    Extractor: jwt.FromAuthHeader,\n\n    // 设置一个函数返回秘钥，关键在于return []byte(\"这里设置秘钥\")\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\n      return []byte(\"My Secret\"), nil\n    },\n\n    // 设置一个加密方法\n    SigningMethod: jwt.SigningMethodHS256,\n  })\n\n  // j2 对比 j 添加了错误处理函数\n  j2 := jwt.New(jwt.Config{\n    // 注意，新增了一个错误处理函数\n    ErrorHandler: func(ctx context.Context, err error) {\n      if err == nil {\n        return\n      }\n\n      ctx.StopExecution()\n      ctx.StatusCode(iris.StatusUnauthorized)\n      ctx.JSON(ResModel{\n        Code: \"501\",\n        Msg:  err.Error(),\n      })\n    },\n    // 设置一个函数返回秘钥，关键在于return []byte(\"这里设置秘钥\")\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\n      return []byte(\"My Secret\"), nil\n    },\n\n    // 设置一个加密方法\n    SigningMethod: jwt.SigningMethodHS256,\n  })\n\n  app.Get(\"/getJWT\", func(ctx iris.Context) {\n    // 往jwt中写入了一对值\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\n      \"foo\": \"bar\",\n    })\n\n    // 使用设置的秘钥，签名生成jwt字符串\n    tokenString, _ := token.SignedString([]byte(\"My Secret\"))\n\n    // 返回\n    ctx.JSON(tokenString)\n  })\n  app.Get(\"/getJWTWithExp\", func(ctx iris.Context) {\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\n      // 根据需求，可以存一些必要的数据\n      \"userName\": \"JabinGP\",\n      \"userId\":   \"1\",\n      \"admin\":    true,\n\n      // 签发人\n      \"iss\": \"iris\",\n      // 签发时间\n      \"iat\": time.Now().Unix(),\n      // 设定过期时间，便于测试，设置1分钟过期\n      \"exp\": time.Now().Add(1 * time.Minute * time.Duration(1)).Unix(),\n    })\n\n    // 使用设置的秘钥，签名生成jwt字符串\n    tokenString, _ := token.SignedString([]byte(\"My Secret\"))\n\n    // 返回\n    ctx.JSON(tokenString)\n  })\n\n  app.Get(\"/showHello\", j.Serve, func(ctx iris.Context) {\n    ctx.JSON(\"Hello Iris JWT\")\n  })\n\n  app.Get(\"/showJWT\", j.Serve, func(ctx iris.Context) {\n    jwtInfo := ctx.Values().Get(\"jwt\").(*jwt.Token)\n    ctx.JSON(jwtInfo)\n  })\n\n  app.Get(\"/showJWTFoo\", j.Serve, func(ctx iris.Context) {\n    jwtInfo := ctx.Values().Get(\"jwt\").(*jwt.Token)\n    foo := jwtInfo.Claims.(jwt.MapClaims)[\"foo\"].(string)\n    ctx.JSON(foo)\n  })\n\n  app.Get(\"/showJWTErrWithFormat\", j2.Serve, func(ctx iris.Context) {\n    jwtInfo := ctx.Values().Get(\"jwt\").(*jwt.Token)\n    ctx.JSON(jwtInfo)\n  })\n\n  app.Run(iris.Addr(\":8080\"))\n}\n```\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"iris的jwt实践，获取jwt、携带jwt、验证jwt、设置过期时间、自定义错误处理函数、格式化错误返回\",\n  \"date\": \"2020-12-08T13:21:30.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"golang\", \"jwt\", \"iris\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u7531\\u4E8Ejwt\\u539F\\u7406\\u5DF2\\u7ECF\\u6709\\u5F88\\u591A\\u6587\\u7AE0\\u63D0\\u53CA\\u8FC7\\u4E86\\uFF0C\\u8FD9\\u91CC\\u4E0D\\u518D\\u8D58\\u8FF0\\uFF0C\\u672C\\u6587\\u4E3B\\u8981\\u4ECB\\u7ECDjwt\\u5728iris\\u4E2D\\u7684\\u5B9E\\u8DF5\\uFF0C\\u6587\\u7AE0\\u7684\\u6700\\u540E\\u4F1A\\u7ED9\\u51FA\\u5B8C\\u6574\\u4EE3\\u7801\\uFF0C\\u53EF\\u4EE5\\u8FD0\\u884C\\u8D77\\u6765\\u8FB9\\u6D4B\\u8BD5\\u8FB9\\u770B\\u3002\\n\\u5982\\u679C\\u6587\\u7AE0\\u5BF9\\u4F60\\u6709\\u5E2E\\u52A9\\uFF0C\\u70B9\\u4E2A\\u8D5E\\u6216\\u8005\\u7559\\u4E0B\\u8BC4\\u8BBA\\u5C06\\u4F1A\\u662F\\u5BF9\\u6211\\u7684\\u6781\\u5927\\u9F13\\u52B1\\uFF01\")), mdx(\"h2\", null, \"jwt\\u4F7F\\u7528\\u65B9\\u5411\"), mdx(\"p\", null, \"\\u672C\\u6587\\u5C06jwt\\u7528\\u4E8E\\u767B\\u5F55\\u529F\\u80FD\\uFF0C\\u5982\\u679C\\u662F\\u5176\\u4ED6\\u529F\\u80FD\\u9700\\u6C42\\u5176\\u5B9E\\u4E5F\\u7C7B\\u4F3C\\uFF0C\\u53EF\\u4EE5\\u89E6\\u7C7B\\u65C1\\u901A\\u3002\"), mdx(\"h2\", null, \"iris\\u4E2Djwt\\u7684\\u4F7F\\u7528\\u601D\\u60F3\"), mdx(\"p\", null, \"iris\\u57FA\\u4E8E\\u4E2D\\u95F4\\u4EF6\\u601D\\u60F3\\u8BBE\\u8BA1\\uFF0C\\u5BF9\\u4E8E\\u4E00\\u4E9B\\u91CD\\u590D\\u6027\\u7684\\u64CD\\u4F5C\\uFF0C\\u53EF\\u4EE5\\u901A\\u8FC7\\u6CE8\\u518C\\u4E2D\\u95F4\\u4EF6\\u6765\\u5B8C\\u6210\\u3002\\u5BF9\\u4E8E\\u767B\\u5F55\\u529F\\u80FD\\uFF0C\\u6211\\u4EEC\\u81EA\\u7136\\u4E0D\\u5E0C\\u671B\\u6BCF\\u4E2Aapi\\u4E2D\\u624B\\u52A8\\u5224\\u65AD\\u662F\\u5426\\u8FC7\\u671F\\uFF0C\\u662F\\u5426\\u5408\\u6CD5\\u7B49\\uFF0C\\u56E0\\u4E3A\\u6211\\u4EEC\\u9700\\u8981\\u4E00\\u4E2Ajwt\\u4E2D\\u95F4\\u4EF6\\u6765\\u5B8C\\u6210\\u8FD9\\u4E9B\\u64CD\\u4F5C\\u3002\"), mdx(\"h2\", null, \"\\u83B7\\u53D6jwt\\u4E2D\\u95F4\\u4EF6\"), mdx(\"p\", null, \"\\u8FD9\\u662F\\u4E00\\u4E2Airis\\u5B98\\u65B9\\u63D0\\u4F9B\\u7684jwt\\u4E2D\\u95F4\\u4EF6\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"import \\\"github.com/iris-contrib/middleware/jwt\\\"\\n\")), mdx(\"p\", null, \"\\u7528\\u6CD5\\u5982\\u4E0B\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"j := jwt.New(jwt.Config{\\n    // Extractor\\u5C5E\\u6027\\u53EF\\u4EE5\\u9009\\u62E9\\u4ECE\\u4EC0\\u4E48\\u5730\\u65B9\\u83B7\\u53D6jwt\\u8FDB\\u884C\\u9A8C\\u8BC1\\uFF0C\\u9ED8\\u8BA4\\u4ECEhttp\\u8BF7\\u6C42\\u7684header\\u4E2D\\u7684Authorization\\u5B57\\u6BB5\\u63D0\\u53D6\\uFF0C\\u4E5F\\u53EF\\u6307\\u5B9A\\u4E3A\\u8BF7\\u6C42\\u53C2\\u6570\\u4E2D\\u7684\\u67D0\\u4E2A\\u5B57\\u6BB5\\n\\n    // \\u4ECE\\u8BF7\\u6C42\\u53C2\\u6570token\\u4E2D\\u63D0\\u53D6\\n    // Extractor: jwt.FromParameter(\\\"token\\\"),\\n\\n    // \\u4ECE\\u8BF7\\u6C42\\u5934\\u7684Authorization\\u5B57\\u6BB5\\u4E2D\\u63D0\\u53D6\\uFF0C\\u8FD9\\u4E2A\\u662F\\u9ED8\\u8BA4\\u503C\\n    Extractor: jwt.FromAuthHeader,\\n\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u51FD\\u6570\\u8FD4\\u56DE\\u79D8\\u94A5\\uFF0C\\u5173\\u952E\\u5728\\u4E8Ereturn []byte(\\\"\\u8FD9\\u91CC\\u8BBE\\u7F6E\\u79D8\\u94A5\\\")\\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\\n      return []byte(\\\"My Secret\\\"), nil\\n    },\\n\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u52A0\\u5BC6\\u65B9\\u6CD5\\n    SigningMethod: jwt.SigningMethodHS256,\\n  })\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"jwt.Config\"), \"\\u4E2D\\u8FD8\\u6709\\u4E00\\u4E9B\\u53EF\\u4EE5\\u8BBE\\u7F6E\\u7684\\u53C2\\u6570\\uFF0C\\u4F46\\u662F\\u4FBF\\u4E8E\\u7406\\u89E3\\uFF0C\\u4EE5\\u4EE5\\u4E0A\\u4E09\\u4E2A\\u53C2\\u6570\\u4F5C\\u4E3A\\u6F14\\u793A\"), mdx(\"h2\", null, \"\\u4F7F\\u7528jwt\\u4E2D\\u95F4\\u4EF6\"), mdx(\"p\", null, \"\\u7531\\u4E8E\\u5E76\\u975E\\u6240\\u6709\\u63A5\\u53E3\\u90FD\\u9700\\u8981\\u8BBE\\u7F6E\\u767B\\u5F55\\u62E6\\u622A\\uFF0C\\u6240\\u4EE5\\u5C06\\u4E2D\\u95F4\\u4EF6\\u7528\\u4E8E\\u8DEF\\u7531\\uFF0C\\u6216\\u8005\\u8DEF\\u7531\\u7EC4\\u662F\\u6BD4\\u8F83\\u7B26\\u5408\\u4E1A\\u52A1\\u9700\\u6C42\\u7684\\u505A\\u6CD5\"), mdx(\"p\", null, \"\\u5148\\u7ED9\\u51FA\\u4E24\\u4E2A\\u63A5\\u53E3\\uFF1A\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\\"/getJWT\\\"\\uFF1A\\u751F\\u6210jwt\\u5E76\\u8FD4\\u56DE\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\\"/showHello\\\"\\uFF1A\\u6CA1\\u6709\\u4EFB\\u4F55\\u9650\\u5236\\uFF0C\\u8BBF\\u95EE\\u5C31\\u8F93\\u51FA\\\"Hello Iris JWT\\\"\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"package main\\n\\nimport (\\n  \\\"github.com/kataras/iris/v12\\\"\\n\\n  \\\"github.com/iris-contrib/middleware/jwt\\\"\\n)\\n\\nfunc main() {\\n  app := iris.New()\\n\\n  app.Get(\\\"/getJWT\\\", func(ctx iris.Context) {\\n    // \\u5F80jwt\\u4E2D\\u5199\\u5165\\u4E86\\u4E00\\u5BF9\\u503C\\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\\n      \\\"foo\\\": \\\"bar\\\",\\n    })\\n\\n    // \\u7B7E\\u540D\\u751F\\u6210jwt\\u5B57\\u7B26\\u4E32\\n    tokenString, _ := token.SignedString([]byte(\\\"My Secret\\\"))\\n\\n    // \\u8FD4\\u56DE\\n    ctx.JSON(tokenString)\\n  })\\n\\n  app.Get(\\\"/showHello\\\", func(ctx iris.Context) {\\n    ctx.JSON(\\\"Hello Iris JWT\\\")\\n  })\\n\\n  app.Run(iris.Addr(\\\":8080\\\"))\\n}\\n\\n\")), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/getJWT\"\n  }, \"http://localhost:8080/getJWT\"), \"\\u8FD4\\u56DE\\u4E00\\u4E32\\u7C7B\\u4F3C\\u8FD9\\u6837\\u7684\\u5B57\\u7B26\\u4E32\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"\\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\\\"\\n\")), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showHello\"\n  }, \"http://localhost:8080/showHello\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"\\\"Hello Iris JWT\\\"\\n\")), mdx(\"p\", null, \"\\u73B0\\u5728\\u6211\\u4EEC\\u8981\\u5BF9\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"showHello\"), \"\\u63A5\\u53E3\\u52A0\\u4E0Ajwt\\u9A8C\\u8BC1\\uFF0C\\u9700\\u8981\\u7528\\u5230\\u4E0A\\u4E00\\u5C0F\\u8282\\u7684jwt\\u4E2D\\u95F4\\u4EF6\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"package main\\n\\nimport (\\n  \\\"github.com/kataras/iris/v12\\\"\\n\\n  \\\"github.com/iris-contrib/middleware/jwt\\\"\\n)\\n\\nfunc main() {\\n  app := iris.New()\\n\\n  j := jwt.New(jwt.Config{\\n    // Extractor\\u5C5E\\u6027\\u53EF\\u4EE5\\u9009\\u62E9\\u4ECE\\u4EC0\\u4E48\\u5730\\u65B9\\u83B7\\u53D6jwt\\u8FDB\\u884C\\u9A8C\\u8BC1\\uFF0C\\u9ED8\\u8BA4\\u4ECEhttp\\u8BF7\\u6C42\\u7684header\\u4E2D\\u7684Authorization\\u5B57\\u6BB5\\u63D0\\u53D6\\uFF0C\\u4E5F\\u53EF\\u6307\\u5B9A\\u4E3A\\u8BF7\\u6C42\\u53C2\\u6570\\u4E2D\\u7684\\u67D0\\u4E2A\\u5B57\\u6BB5\\n\\n    // \\u4ECE\\u8BF7\\u6C42\\u53C2\\u6570token\\u4E2D\\u63D0\\u53D6\\n    // Extractor: jwt.FromParameter(\\\"token\\\"),\\n\\n    // \\u4ECE\\u8BF7\\u6C42\\u5934\\u7684Authorization\\u5B57\\u6BB5\\u4E2D\\u63D0\\u53D6\\uFF0C\\u8FD9\\u4E2A\\u662F\\u9ED8\\u8BA4\\u503C\\n    Extractor: jwt.FromAuthHeader,\\n\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u51FD\\u6570\\u8FD4\\u56DE\\u79D8\\u94A5\\uFF0C\\u5173\\u952E\\u5728\\u4E8Ereturn []byte(\\\"\\u8FD9\\u91CC\\u8BBE\\u7F6E\\u79D8\\u94A5\\\")\\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\\n      return []byte(\\\"My Secret\\\"), nil\\n    },\\n\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u52A0\\u5BC6\\u65B9\\u6CD5\\n    SigningMethod: jwt.SigningMethodHS256,\\n  })\\n\\n  app.Get(\\\"/getJWT\\\", func(ctx iris.Context) {\\n    // \\u5F80jwt\\u4E2D\\u5199\\u5165\\u4E86\\u4E00\\u5BF9\\u503C\\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\\n      \\\"foo\\\": \\\"bar\\\",\\n    })\\n\\n    // \\u4F7F\\u7528\\u8BBE\\u7F6E\\u7684\\u79D8\\u94A5\\uFF0C\\u7B7E\\u540D\\u751F\\u6210jwt\\u5B57\\u7B26\\u4E32\\n    tokenString, _ := token.SignedString([]byte(\\\"My Secret\\\"))\\n\\n    // \\u8FD4\\u56DE\\n    ctx.JSON(tokenString)\\n  })\\n\\n  // \\u6CE8\\u610F\\u8FD9\\u91CC\\u52A0\\u4E86j.Serve\\u4F5C\\u4E3A\\u8DEF\\u7531\\u7684\\u4E2D\\u95F4\\u4EF6\\n  app.Get(\\\"/showHello\\\", j.Serve, func(ctx iris.Context) {\\n    ctx.JSON(\\\"Hello Iris JWT\\\")\\n  })\\n\\n  app.Run(iris.Addr(\\\":8080\\\"))\\n}\\n\")), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showHello\"\n  }, \"http://localhost:8080/showHello\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"required authorization token not found\\n\")), mdx(\"p\", null, \"\\u7531\\u4E8E\\u5F00\\u542F\\u4E86jwt\\u8BA4\\u8BC1\\uFF0C\\u4F60\\u53EF\\u80FD\\u4F1A\\u60F3\\u5230\\uFF0C\\u7ED9\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Header\"), \"\\u4E2D\\u52A0\\u5165\\u4E00\\u4E2A\\u5B57\\u6BB5\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization\"), \"\\uFF0C\\u7136\\u540E\\u503C\\u4E3A\\u521A\\u521A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getJWT\"), \"\\u63A5\\u53E3\\u8FD4\\u56DE\\u7684\\u5B57\\u7B26\\u4E32\\u5C31\\u53EF\\u4EE5\\u6210\\u529F\\u901A\\u8FC7\\u8FD9\\u4E2A\\u9A8C\\u8BC1\\u4E86\\u3002\"), mdx(\"h3\", null, \"\\u6D4B\\u8BD5JWT\\u9A8C\\u8BC1\"), mdx(\"p\", null, \"\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Postman\"), \"\\uFF08\\u6216\\u8005\\u5176\\u4ED6\\u6D4B\\u8BD5\\u5DE5\\u5177\\uFF0C\\u90FD\\u4E00\\u6837\\uFF09\\u4E2D\\u8BF7\\u6C42\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u4E2D\\u52A0\\u5165\\u4E00\\u5BF9\\u503C\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showHello\"\n  }, \"http://localhost:8080/showHello\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"Authorization header format must be Bearer {token}\\n\")), mdx(\"p\", null, \"\\u53EF\\u80FD\\u4F60\\u4F1A\\u7EB3\\u95F7\\uFF0C\\u8FD9\\u4E2A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization header format must be Bearer {token}\"), \"\\u662F\\u4EC0\\u4E48\\u610F\\u601D\\uFF1F\\u6309\\u903B\\u8F91\\u6765\\u8BB2\\uFF0C\\u6211\\u4EEC\\u7684\\u505A\\u6CD5\\u5E94\\u8BE5\\u662F\\u6CA1\\u6709\\u9519\\u7684\\u3002\\u786E\\u5B9E\\uFF0C\\u5C31\\u4E24\\u6B21\\u8BF7\\u6C42\\u7684\\u53D8\\u5316\\u6765\\u770B\\uFF0C\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u52A0\\u5165\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization\"), \"\\u7684\\u7684\\u786E\\u786E\\u88AB\\u8BC6\\u522B\\u5230\\u4E86\\uFF0C\\u4F46\\u662F\\u4F3C\\u4E4E\\u8FD8\\u6709\\u4E9B\\u5C0F\\u95EE\\u9898\\uFF0C\\u6839\\u636E\\u63D0\\u793A\\uFF0C\\u662F\\u683C\\u5F0F\\u4E0A\\u8FD8\\u6709\\u4E9B\\u51FA\\u5165\\u3002\"), mdx(\"p\", null, \"\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Postman\"), \"\\uFF08\\u6216\\u8005\\u5176\\u4ED6\\u6D4B\\u8BD5\\u5DE5\\u5177\\uFF0C\\u90FD\\u4E00\\u6837\\uFF09\\u4E2D\\u8BF7\\u6C42\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u4E2D\\u66F4\\u6539\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization\"), \"\\u503C\\u4E3A\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"JWT eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\")))), mdx(\"p\", null, \"\\u8FD9\\u6837\\u4F3C\\u4E4E\\u7B26\\u5408\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Bearer {token}\"), \"\\u683C\\u5F0F\\u4E86\\uFF0C\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showHello\"\n  }, \"http://localhost:8080/showHello\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"Authorization header format must be Bearer {token}\\n\")), mdx(\"p\", null, \"\\u8BF4\\u660E\\u683C\\u5F0F\\u8FD8\\u662F\\u4E0D\\u5BF9\\u3002\"), mdx(\"p\", null, \"\\u7EE7\\u7EED\\u4FEE\\u6539\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\")), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showHello\"\n  }, \"http://localhost:8080/showHello\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"\\\"Hello Iris JWT\\\"\\n\")), mdx(\"p\", null, \"\\u8FD9\\u6B21\\u7EC8\\u4E8E\\u8FD4\\u56DE\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"Hello Iris JWT\\\"\"), \"\\u4E86\\uFF0C\\u8BF4\\u5B9E\\u8BDD\\u8FD9\\u4E2A\\u683C\\u5F0F\\u8981\\u6C42\\u548C\\u8FD9\\u4E2A\\u63D0\\u793A\\u6709\\u70B9\\u5751\\u3002\"), mdx(\"h3\", null, \"JWT\\u4E2D\\u95F4\\u4EF6\\u505A\\u4E86\\u4EC0\\u4E48\"), mdx(\"p\", null, \"\\u53EF\\u4EE5\\u770B\\u5230\\uFF0C\\u6211\\u4EEC\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/showHello\"), \"\\u63A5\\u53E3\\u7EAF\\u7CB9\\u5C31\\u662F\\u8FD4\\u56DE\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"Hello Iris JWT\\\"\"), \"\\uFF0C\\u6CA1\\u6709\\u505A\\u4EFB\\u4F55\\u548CJWT\\u6709\\u5173\\u7684\\u64CD\\u4F5C\\uFF0C\\u4F46\\u662F\\u7531\\u4E8E\\u6211\\u4EEC\\u5728\\u8DEF\\u7531\\u4E0A\\u4F7F\\u7528\\u4E86JWT\\u4E2D\\u95F4\\u4EF6\\uFF0C\\u6211\\u4EEC\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/showHello\"), \"\\u63A5\\u53E3\\u5177\\u6709\\u4E86\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\u81EA\\u52A8JWT\\u9A8C\\u8BC1\"), \"\\u7684\\u529F\\u80FD\\uFF0C\\u8FD9\\u662FJWT\\u4E2D\\u95F4\\u4EF6\\u5728\\u6267\\u884C\\u6211\\u4EEC\\u7684\\u63A5\\u53E3\\u4EE3\\u7801\\u4E4B\\u524D\\uFF0C\\u81EA\\u52A8\\u5E2E\\u6211\\u4EEC\\u505A\\u7684\\u3002\"), mdx(\"p\", null, \"\\u4FEE\\u6539\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u4E2D\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization\"), \"\\u7684\\u503C\\uFF0C\\u5077\\u5077\\u628A\\u6700\\u540E\\u4E00\\u4E2A\\u5B57\\u7B26\\u6539\\u6210\\u5176\\u4ED6\\uFF0C\\u770B\\u770B\\u63A5\\u53E3\\u662F\\u5426\\u80FD\\u591F\\u9A8C\\u8BC1\\u51FA\\u963F\\u91CC\\u8FD9\\u662F\\u4E00\\u4E2A\\u5047\\u7684jwt\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\\uFF08\\u771F\\uFF09\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\\uFF08\\u5047\\uFF09\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uu\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showHello\"\n  }, \"http://localhost:8080/showHello\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"signature is invalid\\n\")), mdx(\"p\", null, \"\\u53EF\\u89C1\\u4E0D\\u5408\\u6CD5\\u7684jwt\\u662F\\u65E0\\u6CD5\\u901A\\u8FC7\\u9A8C\\u8BC1\\u7684\\u3002\"), mdx(\"h3\", null, \"\\u83B7\\u53D6JWT\\u4E2D\\u7684\\u503C\"), mdx(\"p\", null, \"JWT\\u4E2D\\u95F4\\u4EF6\\u5728\\u9A8C\\u8BC1\\u5931\\u8D25\\u7684\\u65F6\\u5019\\uFF0C\\u63A5\\u53E3\\u4E2D\\u7684\\u4EE3\\u7801\\u4E0D\\u4F1A\\u88AB\\u6267\\u884C\\uFF0C\\u8BF7\\u6C42\\u5728JWT\\u9A8C\\u8BC1\\u7684\\u65F6\\u5019\\u5C31\\u88AB\\u54CD\\u5E94\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"signature is invalid\"), \"\\u5E76\\u7ED3\\u675F\\u3002\\n\\u800C\\u5F53JWT\\u4E2D\\u95F4\\u4EF6\\u9A8C\\u8BC1\\u6210\\u529F\\u7684\\u65F6\\u5019\\uFF0C\\u6211\\u4EEC\\u5219\\u53EF\\u4EE5\\u5728\\u63A5\\u53E3\\u4E2D\\u83B7\\u53D6\\u5230JWT\\u7684\\u4FE1\\u606F\\uFF0C\\u6211\\u4EEC\\u6DFB\\u52A0\\u4E00\\u4E2A\\u63A5\\u53E3\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/showJWT\"), \"\\uFF0C\\u6765\\u8F93\\u51FAJWT\\u7684\\u7ED3\\u6784\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"app.Get(\\\"/showJWT\\\", j.Serve, func(ctx iris.Context) {\\n  jwtInfo := ctx.Values().Get(\\\"jwt\\\").(*jwt.Token)\\n  ctx.JSON(jwtInfo)\\n})\\n\")), mdx(\"p\", null, \"\\u540C\\u6837\\u9700\\u8981\\u8BBE\\u7F6E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u5E26\\u4E0Ajwt\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showJWT\"\n  }, \"http://localhost:8080/showJWT\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"Raw\\\": \\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\\\",\\n    \\\"Method\\\": {\\n        \\\"Name\\\": \\\"HS256\\\",\\n        \\\"Hash\\\": 5\\n    },\\n    \\\"Header\\\": {\\n        \\\"alg\\\": \\\"HS256\\\",\\n        \\\"typ\\\": \\\"JWT\\\"\\n    },\\n    \\\"Claims\\\": {\\n        \\\"foo\\\": \\\"bar\\\"\\n    },\\n    \\\"Signature\\\": \\\"4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\\\",\\n    \\\"Valid\\\": true\\n}\\n\")), mdx(\"p\", null, \"\\u53EF\\u4EE5\\u770B\\u5230\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Claims\"), \"\\u91CC\\u9762\\u5C31\\u6709\\u6211\\u4EEC\\u7B7E\\u53D1jwt\\u7684\\u65F6\\u5019\\u5199\\u5165\\u7684\\u6570\\u636E\\u4E86\\uFF0C\\u5982\\u679C\\u60F3\\u8981\\u5728\\u63A5\\u53E3\\u4E2D\\u62FF\\u5230\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"app.Get(\\\"/showJWTFoo\\\", j.Serve, func(ctx iris.Context) {\\n  jwtInfo := ctx.Values().Get(\\\"jwt\\\").(*jwt.Token)\\n  foo := jwtInfo.Claims.(jwt.MapClaims)[\\\"foo\\\"].(string)\\n  ctx.JSON(foo)\\n})\\n\")), mdx(\"p\", null, \"\\u8BBE\\u7F6E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u5E26\\u4E0Ajwt\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJmb28iOiJiYXIifQ.4aQan-XvJBjDUDbCVnuh2P_xy54b2aRKKsgKcHUa8uw\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/showJWTFoo\"\n  }, \"http://localhost:8080/showJWTFoo\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"\\\"bar\\\"\\n\")), mdx(\"h3\", null, \"\\u8BBE\\u7F6E\\u8FC7\\u671F\\u65F6\\u95F4\"), mdx(\"p\", null, \"\\u7531\\u4E8Ejwt\\u7B7E\\u53D1\\u51FA\\u53BB\\u4E4B\\u540E\\uFF0C\\u540E\\u7AEF\\u5E76\\u4E0D\\u5B58\\u50A8\\uFF0C\\u6240\\u4EE5\\u76F8\\u5F53\\u4E8E\\u540E\\u7AEF\\u5E76\\u4E0D\\u80FD\\u7BA1\\u7406\\u7B7E\\u53D1\\u51FA\\u53BB\\u7684jwt\\uFF0C\\u8FD9\\u79CD\\u60C5\\u51B5\\u4E0B\\u540E\\u7AEF\\u81EA\\u7136\\u4E0D\\u80FD\\u8BA9\\u7B7E\\u53D1\\u51FA\\u53BB\\u7684jwt\\u6C38\\u4E45\\u6709\\u6548\\uFF0C\\u9700\\u8981\\u6839\\u636E\\u9700\\u6C42\\u8BBE\\u7F6E\\u4E00\\u4E2A\\u8FC7\\u671F\\u65F6\\u95F4\\u3002\"), mdx(\"p\", null, \"\\u65B0\\u589E\\u4E00\\u4E2A\\u83B7\\u53D6JWT\\u7684\\u63A5\\u53E3\\uFF0C\\u8FD9\\u6B21\\u5728\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Claims\"), \"\\u4E2D\\u5199\\u5165\\u66F4\\u591A\\u7684\\u6570\\u636E\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"app.Get(\\\"/getJWTWithExp\\\", func(ctx iris.Context) {\\n  token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\\n    // \\u6839\\u636E\\u9700\\u6C42\\uFF0C\\u53EF\\u4EE5\\u5B58\\u4E00\\u4E9B\\u5FC5\\u8981\\u7684\\u6570\\u636E\\n    \\\"userName\\\": \\\"JabinGP\\\",\\n    \\\"userId\\\":   \\\"1\\\",\\n    \\\"admin\\\":    true,\\n\\n    // \\u7B7E\\u53D1\\u4EBA\\n    \\\"iss\\\": \\\"iris\\\",\\n    // \\u7B7E\\u53D1\\u65F6\\u95F4\\n    \\\"iat\\\": time.Now().Unix(),\\n    // \\u8BBE\\u5B9A\\u8FC7\\u671F\\u65F6\\u95F4\\uFF0C\\u4FBF\\u4E8E\\u6D4B\\u8BD5\\uFF0C\\u8BBE\\u7F6E1\\u5206\\u949F\\u8FC7\\u671F\\n    \\\"exp\\\": time.Now().Add(1 * time.Minute * time.Duration(1)).Unix(),\\n  })\\n\\n  // \\u4F7F\\u7528\\u8BBE\\u7F6E\\u7684\\u79D8\\u94A5\\uFF0C\\u7B7E\\u540D\\u751F\\u6210jwt\\u5B57\\u7B26\\u4E32\\n  tokenString, _ := token.SignedString([]byte(\\\"My Secret\\\"))\\n\\n  // \\u8FD4\\u56DE\\n  ctx.JSON(tokenString)\\n})\\n\")), mdx(\"p\", null, \"\\u8BF7\\u6C42\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://localhost:8080/getJWTWithExp\"\n  }, \"http://localhost:8080/getJWTWithExp\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"\\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\\\"\\n\")), mdx(\"p\", null, \"\\u8BBE\\u7F6E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u5E26\\u4E0A\\u65B0\\u7684jwt\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"localhost:8080/showJWT\"\n  }, \"localhost:8080/showJWT\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"Raw\\\": \\\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\\\",\\n    \\\"Method\\\": {\\n        \\\"Name\\\": \\\"HS256\\\",\\n        \\\"Hash\\\": 5\\n    },\\n    \\\"Header\\\": {\\n        \\\"alg\\\": \\\"HS256\\\",\\n        \\\"typ\\\": \\\"JWT\\\"\\n    },\\n    \\\"Claims\\\": {\\n        \\\"admin\\\": true,\\n        \\\"exp\\\": 1575379994,\\n        \\\"iat\\\": 1575379934,\\n        \\\"iss\\\": \\\"iris\\\",\\n        \\\"userId\\\": \\\"1\\\",\\n        \\\"userName\\\": \\\"JabinGP\\\"\\n    },\\n    \\\"Signature\\\": \\\"AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\\\",\\n    \\\"Valid\\\": true\\n}\\n\")), mdx(\"p\", null, \"\\u9694\\u4E00\\u5206\\u949F\\u540E\\uFF0C\\u518D\\u6B21\\u8BF7\\u6C42\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"localhost:8080/showJWT\"\n  }, \"localhost:8080/showJWT\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"Token is expired\\n\")), mdx(\"p\", null, \"\\u8BF4\\u660E\\u8FC7\\u671F\\u65F6\\u95F4\\u8BBE\\u7F6E\\u751F\\u6548\\u3002\"), mdx(\"h3\", null, \"\\u8BBE\\u7F6E\\u9519\\u8BEF\\u8FD4\\u56DE\\u683C\\u5F0F\"), mdx(\"p\", null, \"\\u7531\\u4E8EJWT\\u4E2D\\u95F4\\u4EF6\\u5728\\u68C0\\u9A8Cjwt\\u53D1\\u73B0\\u4E0D\\u5408\\u6CD5\\u65F6\\uFF0C\\u4F1A\\u81EA\\u52A8\\u54CD\\u5E94\\u8FD4\\u56DE\\u9519\\u8BEF\\u4FE1\\u606F\\u5E76\\u7ED3\\u675F\\u8BF7\\u6C42\\uFF0C\\u5982\\u4E0A\\u6240\\u793A\\uFF0C\\u9519\\u8BEF\\u90FD\\u662F\\u4E00\\u53E5\\u8BDD\\uFF0C\\u8FD9\\u6837\\u7684\\u9519\\u8BEF\\u5BF9\\u4E8E\\u524D\\u7AEF\\u6765\\u8BF4\\u975E\\u5E38\\u4E0D\\u53CB\\u597D\\uFF0C\\u524D\\u7AEF\\u66F4\\u5E0C\\u671B\\u80FD\\u901A\\u8FC7\\u4E00\\u4E2A\\u72B6\\u6001\\u7801\\u6765\\u5224\\u65AD\\u8BF7\\u6C42\\u662F\\u5426\\u987A\\u5229\\u3002\"), mdx(\"p\", null, \"\\u9996\\u5148\\u5B9A\\u4E49\\u4E00\\u4E2A\\u54CD\\u5E94\\u6570\\u636E\\u7684\\u6A21\\u677F\\uFF1A\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"// ResModel \\u8FD4\\u56DE\\u6570\\u636E\\u6A21\\u677F\\ntype ResModel struct {\\n  Code string      `json:\\\"code\\\"`\\n  Msg  string      `json:\\\"msg\\\"`\\n  Data interface{} `json:\\\"data\\\"`\\n}\\n\")), mdx(\"p\", null, \"\\u83B7\\u53D6\\u4E00\\u4E2A\\u65B0\\u7684\\u4E2D\\u95F4\\u4EF6\\uFF0C\\u4E0E\\u4E4B\\u524D\\u4E0D\\u540C\\u7684\\u662F\\u81EA\\u5B9A\\u4E49\\u4E86\\u9519\\u8BEF\\u5904\\u7406\\u51FD\\u6570\\uFF08\\u6252\\u4E86\\u6E90\\u7801\\u6539\\u7684\\uFF09:\"), mdx(\"p\", null, \"\\u6CE8\\u610F\\u5F15\\u5165\\u7684context\\u662Firis\\u5305\\u4E0B\\u7684\\uFF0C\\u5426\\u5219\\u65E0\\u6CD5\\u7B26\\u5408\\u9519\\u8BEF\\u5904\\u7406\\u51FD\\u6570\\u7684\\u5B9A\\u4E49\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"import \\\"github.com/kataras/iris/v12/context\\\"\\n\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"// j2 \\u5BF9\\u6BD4 j \\u6DFB\\u52A0\\u4E86\\u9519\\u8BEF\\u5904\\u7406\\u51FD\\u6570\\nj2 := jwt.New(jwt.Config{\\n  // \\u6CE8\\u610F\\uFF0C\\u65B0\\u589E\\u4E86\\u4E00\\u4E2A\\u9519\\u8BEF\\u5904\\u7406\\u51FD\\u6570\\n  ErrorHandler: func(ctx context.Context, err error) {\\n    if err == nil {\\n      return\\n    }\\n\\n    ctx.StopExecution()\\n    ctx.StatusCode(iris.StatusUnauthorized)\\n    ctx.JSON(ResModel{\\n      Code: \\\"501\\\",\\n      Msg:  err.Error(),\\n    })\\n  },\\n  // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u51FD\\u6570\\u8FD4\\u56DE\\u79D8\\u94A5\\uFF0C\\u5173\\u952E\\u5728\\u4E8Ereturn []byte(\\\"\\u8FD9\\u91CC\\u8BBE\\u7F6E\\u79D8\\u94A5\\\")\\n  ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\\n    return []byte(\\\"My Secret\\\"), nil\\n  },\\n\\n  // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u52A0\\u5BC6\\u65B9\\u6CD5\\n  SigningMethod: jwt.SigningMethodHS256,\\n})\\n\")), mdx(\"p\", null, \"\\u5728\\u4E00\\u4E2A\\u65B0\\u7684\\u63A5\\u53E3\\u4E0A\\u5E94\\u7528\\u65B0\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"j2\"), \"\\u4E2D\\u95F4\\u4EF6\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"app.Get(\\\"/showJWTErrWithFormat\\\", j2.Serve, func(ctx iris.Context) {\\n  jwtInfo := ctx.Values().Get(\\\"jwt\\\").(*jwt.Token)\\n  ctx.JSON(jwtInfo)\\n})\\n\")), mdx(\"p\", null, \"\\u8BBE\\u7F6E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u5E26\\u4E0A\\u4E00\\u4E2A\\u8FC7\\u671F\\u7684jwt\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgg\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"localhost:8080/showJWT\"\n  }, \"localhost:8080/showJWT\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"code\\\": \\\"501\\\",\\n    \\\"msg\\\": \\\"Token is expired\\\",\\n    \\\"data\\\": null\\n}\\n\")), mdx(\"p\", null, \"\\u7BE1\\u6539\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Headers\"), \"\\u4E2D\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Authorization\"), \"\\u7684\\u503C\\uFF0C\\u628A\\u6700\\u540E\\u4E00\\u4E2A\\u5B57\\u7B26\\u6539\\u6210\\u5176\\u4ED6\\u7684\\uFF1A\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"g\"), \"->\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"o\")), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"kEY\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"VALUE\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Authorization\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhZG1pbiI6dHJ1ZSwiZXhwIjoxNTc1Mzc5OTk0LCJpYXQiOjE1NzUzNzk5MzQsImlzcyI6ImlyaXMiLCJ1c2VySWQiOiIxIiwidXNlck5hbWUiOiJKYWJpbkdQIn0.AMFZNbtERLHzKAR9z7oF_0QeNoARKr4dkjocNbVsWgo\")))), mdx(\"p\", null, \"\\u8BBF\\u95EE\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"localhost:8080/showJWT\"\n  }, \"localhost:8080/showJWT\"), \"\\u8FD4\\u56DE\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n    \\\"code\\\": \\\"501\\\",\\n    \\\"msg\\\": \\\"signature is invalid\\\",\\n    \\\"data\\\": null\\n}\\n\")), mdx(\"p\", null, \"\\u81F3\\u6B64\\uFF0Cjwt\\u57FA\\u672C\\u7B26\\u5408\\u4F7F\\u7528\\u9700\\u6C42\\u4E86\\uFF0C\\u6700\\u540E\\u9644\\u4E0A\\u5B8C\\u6574\\u7684\\u4EE3\\u7801\\u3002\"), mdx(\"h2\", null, \"\\u5B8C\\u6574\\u4EE3\\u7801\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\u5982\\u679C\\u6587\\u7AE0\\u5BF9\\u4F60\\u6709\\u5E2E\\u52A9\\uFF0C\\u70B9\\u4E2A\\u8D5E\\u6216\\u8005\\u7559\\u4E0B\\u8BC4\\u8BBA\\u5C06\\u4F1A\\u662F\\u5BF9\\u6211\\u7684\\u6781\\u5927\\u9F13\\u52B1\\uFF01\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-go\"\n  }, \"package main\\n\\nimport (\\n  \\\"time\\\"\\n\\n  \\\"github.com/kataras/iris/v12\\\"\\n\\n  \\\"github.com/iris-contrib/middleware/jwt\\\"\\n  \\\"github.com/kataras/iris/v12/context\\\"\\n)\\n\\n// ResModel \\u8FD4\\u56DE\\u6570\\u636E\\u6A21\\u677F\\ntype ResModel struct {\\n  Code string      `json:\\\"code\\\"`\\n  Msg  string      `json:\\\"msg\\\"`\\n  Data interface{} `json:\\\"data\\\"`\\n}\\n\\nfunc main() {\\n  app := iris.New()\\n\\n  j := jwt.New(jwt.Config{\\n    // Extractor\\u5C5E\\u6027\\u53EF\\u4EE5\\u9009\\u62E9\\u4ECE\\u4EC0\\u4E48\\u5730\\u65B9\\u83B7\\u53D6jwt\\u8FDB\\u884C\\u9A8C\\u8BC1\\uFF0C\\u9ED8\\u8BA4\\u4ECEhttp\\u8BF7\\u6C42\\u7684header\\u4E2D\\u7684Authorization\\u5B57\\u6BB5\\u63D0\\u53D6\\uFF0C\\u4E5F\\u53EF\\u6307\\u5B9A\\u4E3A\\u8BF7\\u6C42\\u53C2\\u6570\\u4E2D\\u7684\\u67D0\\u4E2A\\u5B57\\u6BB5\\n\\n    // \\u4ECE\\u8BF7\\u6C42\\u53C2\\u6570token\\u4E2D\\u63D0\\u53D6\\n    // Extractor: jwt.FromParameter(\\\"token\\\"),\\n\\n    // \\u4ECE\\u8BF7\\u6C42\\u5934\\u7684Authorization\\u5B57\\u6BB5\\u4E2D\\u63D0\\u53D6\\uFF0C\\u8FD9\\u4E2A\\u662F\\u9ED8\\u8BA4\\u503C\\n    Extractor: jwt.FromAuthHeader,\\n\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u51FD\\u6570\\u8FD4\\u56DE\\u79D8\\u94A5\\uFF0C\\u5173\\u952E\\u5728\\u4E8Ereturn []byte(\\\"\\u8FD9\\u91CC\\u8BBE\\u7F6E\\u79D8\\u94A5\\\")\\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\\n      return []byte(\\\"My Secret\\\"), nil\\n    },\\n\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u52A0\\u5BC6\\u65B9\\u6CD5\\n    SigningMethod: jwt.SigningMethodHS256,\\n  })\\n\\n  // j2 \\u5BF9\\u6BD4 j \\u6DFB\\u52A0\\u4E86\\u9519\\u8BEF\\u5904\\u7406\\u51FD\\u6570\\n  j2 := jwt.New(jwt.Config{\\n    // \\u6CE8\\u610F\\uFF0C\\u65B0\\u589E\\u4E86\\u4E00\\u4E2A\\u9519\\u8BEF\\u5904\\u7406\\u51FD\\u6570\\n    ErrorHandler: func(ctx context.Context, err error) {\\n      if err == nil {\\n        return\\n      }\\n\\n      ctx.StopExecution()\\n      ctx.StatusCode(iris.StatusUnauthorized)\\n      ctx.JSON(ResModel{\\n        Code: \\\"501\\\",\\n        Msg:  err.Error(),\\n      })\\n    },\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u51FD\\u6570\\u8FD4\\u56DE\\u79D8\\u94A5\\uFF0C\\u5173\\u952E\\u5728\\u4E8Ereturn []byte(\\\"\\u8FD9\\u91CC\\u8BBE\\u7F6E\\u79D8\\u94A5\\\")\\n    ValidationKeyGetter: func(token *jwt.Token) (interface{}, error) {\\n      return []byte(\\\"My Secret\\\"), nil\\n    },\\n\\n    // \\u8BBE\\u7F6E\\u4E00\\u4E2A\\u52A0\\u5BC6\\u65B9\\u6CD5\\n    SigningMethod: jwt.SigningMethodHS256,\\n  })\\n\\n  app.Get(\\\"/getJWT\\\", func(ctx iris.Context) {\\n    // \\u5F80jwt\\u4E2D\\u5199\\u5165\\u4E86\\u4E00\\u5BF9\\u503C\\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\\n      \\\"foo\\\": \\\"bar\\\",\\n    })\\n\\n    // \\u4F7F\\u7528\\u8BBE\\u7F6E\\u7684\\u79D8\\u94A5\\uFF0C\\u7B7E\\u540D\\u751F\\u6210jwt\\u5B57\\u7B26\\u4E32\\n    tokenString, _ := token.SignedString([]byte(\\\"My Secret\\\"))\\n\\n    // \\u8FD4\\u56DE\\n    ctx.JSON(tokenString)\\n  })\\n  app.Get(\\\"/getJWTWithExp\\\", func(ctx iris.Context) {\\n    token := jwt.NewTokenWithClaims(jwt.SigningMethodHS256, jwt.MapClaims{\\n      // \\u6839\\u636E\\u9700\\u6C42\\uFF0C\\u53EF\\u4EE5\\u5B58\\u4E00\\u4E9B\\u5FC5\\u8981\\u7684\\u6570\\u636E\\n      \\\"userName\\\": \\\"JabinGP\\\",\\n      \\\"userId\\\":   \\\"1\\\",\\n      \\\"admin\\\":    true,\\n\\n      // \\u7B7E\\u53D1\\u4EBA\\n      \\\"iss\\\": \\\"iris\\\",\\n      // \\u7B7E\\u53D1\\u65F6\\u95F4\\n      \\\"iat\\\": time.Now().Unix(),\\n      // \\u8BBE\\u5B9A\\u8FC7\\u671F\\u65F6\\u95F4\\uFF0C\\u4FBF\\u4E8E\\u6D4B\\u8BD5\\uFF0C\\u8BBE\\u7F6E1\\u5206\\u949F\\u8FC7\\u671F\\n      \\\"exp\\\": time.Now().Add(1 * time.Minute * time.Duration(1)).Unix(),\\n    })\\n\\n    // \\u4F7F\\u7528\\u8BBE\\u7F6E\\u7684\\u79D8\\u94A5\\uFF0C\\u7B7E\\u540D\\u751F\\u6210jwt\\u5B57\\u7B26\\u4E32\\n    tokenString, _ := token.SignedString([]byte(\\\"My Secret\\\"))\\n\\n    // \\u8FD4\\u56DE\\n    ctx.JSON(tokenString)\\n  })\\n\\n  app.Get(\\\"/showHello\\\", j.Serve, func(ctx iris.Context) {\\n    ctx.JSON(\\\"Hello Iris JWT\\\")\\n  })\\n\\n  app.Get(\\\"/showJWT\\\", j.Serve, func(ctx iris.Context) {\\n    jwtInfo := ctx.Values().Get(\\\"jwt\\\").(*jwt.Token)\\n    ctx.JSON(jwtInfo)\\n  })\\n\\n  app.Get(\\\"/showJWTFoo\\\", j.Serve, func(ctx iris.Context) {\\n    jwtInfo := ctx.Values().Get(\\\"jwt\\\").(*jwt.Token)\\n    foo := jwtInfo.Claims.(jwt.MapClaims)[\\\"foo\\\"].(string)\\n    ctx.JSON(foo)\\n  })\\n\\n  app.Get(\\\"/showJWTErrWithFormat\\\", j2.Serve, func(ctx iris.Context) {\\n    jwtInfo := ctx.Values().Get(\\\"jwt\\\").(*jwt.Token)\\n    ctx.JSON(jwtInfo)\\n  })\\n\\n  app.Run(iris.Addr(\\\":8080\\\"))\\n}\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"由于jwt原理已经有很多文章提及过了，这里不再赘述，本文主要介绍jwt在iris中的实践，文章的最后会给出完整代码，可以运行起来边测试边看。\n如果文章对你有帮助，点个赞或者留下评论将会是对我的极大鼓励！ jwt使用方向 本文将jwt用于登录功能，如果是其他功能需求其实也类似，可以触类旁通。 iris中jwt…","frontmatter":{"date":"2020-12-08 13:21","title":"iris的jwt实践，获取jwt、携带jwt、验证jwt、设置过期时间、自定义错误处理函数、格式化错误返回","draft":false}},{"id":"9291f52a-d49b-54a7-846e-58331b64d0f3","slug":"posts/code/macos-docker-install-kafka","rawBody":"---\ntitle: \"macOS下使用docker安装kafka、遇到的坑与解决方案。\"\ndate: 2020-12-08T21:39:49+08:00\ncategories: [\"code\"]\ntags: [\"macos\", \"kafka\", \"zookeeper\", \"docker\"]\ndraft: false\n---\n\n由于`kafka`依赖`zookeeper`，因此需要使用 docker 同时安装`zookeeper`和 `kafka`。\n\n坑：由于 macOS 的 docker 底层实现的不同，网上的很多教程放在 macOS 中并不能成功运行，主要原因是 macOS 的 docker 在容器和宿主之间无法通过 ip 直接通信。因此在安装的时候需要特殊注意与 ip 相关的设置，当容器需要访问宿主ip时，需要使用`docker.for.mac.host.internal`或者`host.docker.internal`代替。\n\n## 拉取镜像\n\n```cmd\ndocker pull wurstmeister/zookeeper\ndocker pull wurstmeister/kafka\n```\n\n## 启动容器\n\n### 启动 zookeeper\n\n```cmd\ndocker run -d --name zookeeper -p 2181:2181 wurstmeister/zookeeper\n```\n\n- `-d` 参数设置后台运行\n- `--name zookeeper` 参数指定容器别名\n- `-p 2181:2181` 参数绑定容器端口到宿主端口\n\n### 启动 kafka\n\n注意，**kafka 依赖 zookeeper**，启动 kafka 前需要先启动 zookeeper。\n\n以下配置默认 kafka 端口配置在 **9092** 端口。\n\n```cmd\ndocker run -d --name kafka -p 9092:9092 -e KAFKA_BROKER_ID=0 -e KAFKA_ZOOKEEPER_CONNECT={host-ip}:{zookeeper-port}/kafka -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://{host-ip}:9092 -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 wurstmeister/kafka\n```\n\n`-d` 参数指定容器后台运行\n\n`--name kafka` 参数指定容器别名\n\n`-e` 参数可以设置 docker 容器内环境变量，每个变量的解释：\n\n- `KAFKA_BROKER_ID=0`\n  在 kafka 集群中，每个 kafka 都有一个 BROKER_ID 来区分自己\n- `KAFKA_ZOOKEEPER_CONNECT={host-ip}:{zookeeper-port}/kafka`\n  配置 zookeeper 管理 kafka 的路径\n- `KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://{host-ip}:9092`\n  把 kafka 的地址端口注册给 zookeeper\n- `KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092`\n  kafka 监听地址\n\n比如我的电脑是 mac，在 host-ip 这块就不能填本机 ip（windows 和 linux 可以），需要填`docker.for.mac.host.internal`，zookeeper 端口启动在**2181**，kafka 即将启动在**9092**，那么我的命令是这样的`docker run -d --name kafka -p 9092:9092 -e KAFKA_BROKER_ID=0 -e KAFKA_ZOOKEEPER_CONNECT=docker.for.mac.host.internal:2181/kafka -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://docker.for.mac.host.internal:9092 -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 wurstmeister/kafka`\n\n## 测试功能是否正常\n\n### 测试 kafka 生产与消费\n\n#### 进入 kafka 容器\n\n```cmd\ndocker exec -it kafka bash\n```\n\n#### 进入 kafka 容器中的脚本目录\n\n注意，此时应该已经进入到了容器中的`bash`。\n\n进入 kafka 的脚本目录，其中`kafka_2.12-2.5.0`可能会随着版本而变化数字。\n\n```cmd\ncd /opt/kafka_2.12-2.5.0/bin\n```\n\n通过 ls 可以看到许多的.sh 脚本\n\n```cmd\nbash-4.4# ls\nconnect-distributed.sh               kafka-delete-records.sh              kafka-server-stop.sh\nconnect-mirror-maker.sh              kafka-dump-log.sh                    kafka-streams-application-reset.sh\nconnect-standalone.sh                kafka-leader-election.sh             kafka-topics.sh\nkafka-acls.sh                        kafka-log-dirs.sh                    kafka-verifiable-consumer.sh\nkafka-broker-api-versions.sh         kafka-mirror-maker.sh                kafka-verifiable-producer.sh\nkafka-configs.sh                     kafka-preferred-replica-election.sh  trogdor.sh\nkafka-console-consumer.sh            kafka-producer-perf-test.sh          windows\nkafka-console-producer.sh            kafka-reassign-partitions.sh         zookeeper-security-migration.sh\nkafka-consumer-groups.sh             kafka-replica-verification.sh        zookeeper-server-start.sh\nkafka-consumer-perf-test.sh          kafka-run-class.sh                   zookeeper-server-stop.sh\nkafka-delegation-tokens.sh           kafka-server-start.sh                zookeeper-shell.sh\nbash-4.4#\n```\n\n#### 测试 kafka 生产者和消费者\n\n##### 启动 kafka 生产者\n\n运行 kafka 生产者发送消息\n\n```cmd\n./kafka-console-producer.sh --broker-list localhost:9092 --topic first-topic\n```\n\n看到出现了个对话提示的小`>`就可以发送消息了，不过不要着急，先把消费者启动了。\n\n##### 启动 kafka 消费者\n\n另起一个终端，进入 kafka 容器，进入`/opt/kafka_2.12-2.5.0/bin`目录，运行 kafka 消费者接收消息\n\n```cmd\n./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic first-topic --from-beginning\n```\n\n##### 测试发送和接收消息\n\n在生产者中发送`Hello`，消费者中应该能够收到`Hello`。\n\n生产者\n\n```cmd\njabin@jabindeiMac ~/code/tmp » docker exec -it kafka bash\nbash-4.4# cd /opt/kafka_2.12-2.5.0/bin/\nbash-4.4# ./kafka-console-producer.sh --broker-list localhost:9092 --topic first-topic\n>Hello\n>\n```\n\n消费者\n\n```cmd\njabin@jabindeiMac ~/code/tmp » docker exec -it kafka bash\nbash-4.4# cd /opt/kafka_2.12-2.5.0/bin/\nbash-4.4# ./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic first-topic --from-beginning\nHello\n```\n\n## 参考文章\n\n[https://www.jianshu.com/p/e8c29cba9fae](https://www.jianshu.com/p/e8c29cba9fae)\n[https://docs.docker.com/docker-for-mac/networking/](https://docs.docker.com/docker-for-mac/networking/)\n[https://yuanmomo.net/2019/06/13/docker-network/](https://yuanmomo.net/2019/06/13/docker-network/)\n[https://www.jianshu.com/p/052f9c6ca664](https://www.jianshu.com/p/052f9c6ca664)\n","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"macOS下使用docker安装kafka、遇到的坑与解决方案。\",\n  \"date\": \"2020-12-08T13:39:49.000Z\",\n  \"categories\": [\"code\"],\n  \"tags\": [\"macos\", \"kafka\", \"zookeeper\", \"docker\"],\n  \"draft\": false\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"\\u7531\\u4E8E\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kafka\"), \"\\u4F9D\\u8D56\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"zookeeper\"), \"\\uFF0C\\u56E0\\u6B64\\u9700\\u8981\\u4F7F\\u7528 docker \\u540C\\u65F6\\u5B89\\u88C5\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"zookeeper\"), \"\\u548C \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kafka\"), \"\\u3002\"), mdx(\"p\", null, \"\\u5751\\uFF1A\\u7531\\u4E8E macOS \\u7684 docker \\u5E95\\u5C42\\u5B9E\\u73B0\\u7684\\u4E0D\\u540C\\uFF0C\\u7F51\\u4E0A\\u7684\\u5F88\\u591A\\u6559\\u7A0B\\u653E\\u5728 macOS \\u4E2D\\u5E76\\u4E0D\\u80FD\\u6210\\u529F\\u8FD0\\u884C\\uFF0C\\u4E3B\\u8981\\u539F\\u56E0\\u662F macOS \\u7684 docker \\u5728\\u5BB9\\u5668\\u548C\\u5BBF\\u4E3B\\u4E4B\\u95F4\\u65E0\\u6CD5\\u901A\\u8FC7 ip \\u76F4\\u63A5\\u901A\\u4FE1\\u3002\\u56E0\\u6B64\\u5728\\u5B89\\u88C5\\u7684\\u65F6\\u5019\\u9700\\u8981\\u7279\\u6B8A\\u6CE8\\u610F\\u4E0E ip \\u76F8\\u5173\\u7684\\u8BBE\\u7F6E\\uFF0C\\u5F53\\u5BB9\\u5668\\u9700\\u8981\\u8BBF\\u95EE\\u5BBF\\u4E3Bip\\u65F6\\uFF0C\\u9700\\u8981\\u4F7F\\u7528\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker.for.mac.host.internal\"), \"\\u6216\\u8005\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"host.docker.internal\"), \"\\u4EE3\\u66FF\\u3002\"), mdx(\"h2\", null, \"\\u62C9\\u53D6\\u955C\\u50CF\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker pull wurstmeister/zookeeper\\ndocker pull wurstmeister/kafka\\n\")), mdx(\"h2\", null, \"\\u542F\\u52A8\\u5BB9\\u5668\"), mdx(\"h3\", null, \"\\u542F\\u52A8 zookeeper\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker run -d --name zookeeper -p 2181:2181 wurstmeister/zookeeper\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-d\"), \" \\u53C2\\u6570\\u8BBE\\u7F6E\\u540E\\u53F0\\u8FD0\\u884C\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"--name zookeeper\"), \" \\u53C2\\u6570\\u6307\\u5B9A\\u5BB9\\u5668\\u522B\\u540D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"-p 2181:2181\"), \" \\u53C2\\u6570\\u7ED1\\u5B9A\\u5BB9\\u5668\\u7AEF\\u53E3\\u5230\\u5BBF\\u4E3B\\u7AEF\\u53E3\")), mdx(\"h3\", null, \"\\u542F\\u52A8 kafka\"), mdx(\"p\", null, \"\\u6CE8\\u610F\\uFF0C\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"kafka \\u4F9D\\u8D56 zookeeper\"), \"\\uFF0C\\u542F\\u52A8 kafka \\u524D\\u9700\\u8981\\u5148\\u542F\\u52A8 zookeeper\\u3002\"), mdx(\"p\", null, \"\\u4EE5\\u4E0B\\u914D\\u7F6E\\u9ED8\\u8BA4 kafka \\u7AEF\\u53E3\\u914D\\u7F6E\\u5728 \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"9092\"), \" \\u7AEF\\u53E3\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker run -d --name kafka -p 9092:9092 -e KAFKA_BROKER_ID=0 -e KAFKA_ZOOKEEPER_CONNECT={host-ip}:{zookeeper-port}/kafka -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://{host-ip}:9092 -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 wurstmeister/kafka\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-d\"), \" \\u53C2\\u6570\\u6307\\u5B9A\\u5BB9\\u5668\\u540E\\u53F0\\u8FD0\\u884C\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"--name kafka\"), \" \\u53C2\\u6570\\u6307\\u5B9A\\u5BB9\\u5668\\u522B\\u540D\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"-e\"), \" \\u53C2\\u6570\\u53EF\\u4EE5\\u8BBE\\u7F6E docker \\u5BB9\\u5668\\u5185\\u73AF\\u5883\\u53D8\\u91CF\\uFF0C\\u6BCF\\u4E2A\\u53D8\\u91CF\\u7684\\u89E3\\u91CA\\uFF1A\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"KAFKA_BROKER_ID=0\"), \"\\n\\u5728 kafka \\u96C6\\u7FA4\\u4E2D\\uFF0C\\u6BCF\\u4E2A kafka \\u90FD\\u6709\\u4E00\\u4E2A BROKER_ID \\u6765\\u533A\\u5206\\u81EA\\u5DF1\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"KAFKA_ZOOKEEPER_CONNECT={host-ip}:{zookeeper-port}/kafka\"), \"\\n\\u914D\\u7F6E zookeeper \\u7BA1\\u7406 kafka \\u7684\\u8DEF\\u5F84\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://{host-ip}:9092\"), \"\\n\\u628A kafka \\u7684\\u5730\\u5740\\u7AEF\\u53E3\\u6CE8\\u518C\\u7ED9 zookeeper\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092\"), \"\\nkafka \\u76D1\\u542C\\u5730\\u5740\")), mdx(\"p\", null, \"\\u6BD4\\u5982\\u6211\\u7684\\u7535\\u8111\\u662F mac\\uFF0C\\u5728 host-ip \\u8FD9\\u5757\\u5C31\\u4E0D\\u80FD\\u586B\\u672C\\u673A ip\\uFF08windows \\u548C linux \\u53EF\\u4EE5\\uFF09\\uFF0C\\u9700\\u8981\\u586B\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker.for.mac.host.internal\"), \"\\uFF0Czookeeper \\u7AEF\\u53E3\\u542F\\u52A8\\u5728\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"2181\"), \"\\uFF0Ckafka \\u5373\\u5C06\\u542F\\u52A8\\u5728\", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"9092\"), \"\\uFF0C\\u90A3\\u4E48\\u6211\\u7684\\u547D\\u4EE4\\u662F\\u8FD9\\u6837\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"docker run -d --name kafka -p 9092:9092 -e KAFKA_BROKER_ID=0 -e KAFKA_ZOOKEEPER_CONNECT=docker.for.mac.host.internal:2181/kafka -e KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://docker.for.mac.host.internal:9092 -e KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092 wurstmeister/kafka\")), mdx(\"h2\", null, \"\\u6D4B\\u8BD5\\u529F\\u80FD\\u662F\\u5426\\u6B63\\u5E38\"), mdx(\"h3\", null, \"\\u6D4B\\u8BD5 kafka \\u751F\\u4EA7\\u4E0E\\u6D88\\u8D39\"), mdx(\"h4\", null, \"\\u8FDB\\u5165 kafka \\u5BB9\\u5668\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"docker exec -it kafka bash\\n\")), mdx(\"h4\", null, \"\\u8FDB\\u5165 kafka \\u5BB9\\u5668\\u4E2D\\u7684\\u811A\\u672C\\u76EE\\u5F55\"), mdx(\"p\", null, \"\\u6CE8\\u610F\\uFF0C\\u6B64\\u65F6\\u5E94\\u8BE5\\u5DF2\\u7ECF\\u8FDB\\u5165\\u5230\\u4E86\\u5BB9\\u5668\\u4E2D\\u7684\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bash\"), \"\\u3002\"), mdx(\"p\", null, \"\\u8FDB\\u5165 kafka \\u7684\\u811A\\u672C\\u76EE\\u5F55\\uFF0C\\u5176\\u4E2D\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"kafka_2.12-2.5.0\"), \"\\u53EF\\u80FD\\u4F1A\\u968F\\u7740\\u7248\\u672C\\u800C\\u53D8\\u5316\\u6570\\u5B57\\u3002\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"cd /opt/kafka_2.12-2.5.0/bin\\n\")), mdx(\"p\", null, \"\\u901A\\u8FC7 ls \\u53EF\\u4EE5\\u770B\\u5230\\u8BB8\\u591A\\u7684.sh \\u811A\\u672C\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"bash-4.4# ls\\nconnect-distributed.sh               kafka-delete-records.sh              kafka-server-stop.sh\\nconnect-mirror-maker.sh              kafka-dump-log.sh                    kafka-streams-application-reset.sh\\nconnect-standalone.sh                kafka-leader-election.sh             kafka-topics.sh\\nkafka-acls.sh                        kafka-log-dirs.sh                    kafka-verifiable-consumer.sh\\nkafka-broker-api-versions.sh         kafka-mirror-maker.sh                kafka-verifiable-producer.sh\\nkafka-configs.sh                     kafka-preferred-replica-election.sh  trogdor.sh\\nkafka-console-consumer.sh            kafka-producer-perf-test.sh          windows\\nkafka-console-producer.sh            kafka-reassign-partitions.sh         zookeeper-security-migration.sh\\nkafka-consumer-groups.sh             kafka-replica-verification.sh        zookeeper-server-start.sh\\nkafka-consumer-perf-test.sh          kafka-run-class.sh                   zookeeper-server-stop.sh\\nkafka-delegation-tokens.sh           kafka-server-start.sh                zookeeper-shell.sh\\nbash-4.4#\\n\")), mdx(\"h4\", null, \"\\u6D4B\\u8BD5 kafka \\u751F\\u4EA7\\u8005\\u548C\\u6D88\\u8D39\\u8005\"), mdx(\"h5\", null, \"\\u542F\\u52A8 kafka \\u751F\\u4EA7\\u8005\"), mdx(\"p\", null, \"\\u8FD0\\u884C kafka \\u751F\\u4EA7\\u8005\\u53D1\\u9001\\u6D88\\u606F\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"./kafka-console-producer.sh --broker-list localhost:9092 --topic first-topic\\n\")), mdx(\"p\", null, \"\\u770B\\u5230\\u51FA\\u73B0\\u4E86\\u4E2A\\u5BF9\\u8BDD\\u63D0\\u793A\\u7684\\u5C0F\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \">\"), \"\\u5C31\\u53EF\\u4EE5\\u53D1\\u9001\\u6D88\\u606F\\u4E86\\uFF0C\\u4E0D\\u8FC7\\u4E0D\\u8981\\u7740\\u6025\\uFF0C\\u5148\\u628A\\u6D88\\u8D39\\u8005\\u542F\\u52A8\\u4E86\\u3002\"), mdx(\"h5\", null, \"\\u542F\\u52A8 kafka \\u6D88\\u8D39\\u8005\"), mdx(\"p\", null, \"\\u53E6\\u8D77\\u4E00\\u4E2A\\u7EC8\\u7AEF\\uFF0C\\u8FDB\\u5165 kafka \\u5BB9\\u5668\\uFF0C\\u8FDB\\u5165\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/opt/kafka_2.12-2.5.0/bin\"), \"\\u76EE\\u5F55\\uFF0C\\u8FD0\\u884C kafka \\u6D88\\u8D39\\u8005\\u63A5\\u6536\\u6D88\\u606F\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic first-topic --from-beginning\\n\")), mdx(\"h5\", null, \"\\u6D4B\\u8BD5\\u53D1\\u9001\\u548C\\u63A5\\u6536\\u6D88\\u606F\"), mdx(\"p\", null, \"\\u5728\\u751F\\u4EA7\\u8005\\u4E2D\\u53D1\\u9001\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello\"), \"\\uFF0C\\u6D88\\u8D39\\u8005\\u4E2D\\u5E94\\u8BE5\\u80FD\\u591F\\u6536\\u5230\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello\"), \"\\u3002\"), mdx(\"p\", null, \"\\u751F\\u4EA7\\u8005\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"jabin@jabindeiMac ~/code/tmp \\xBB docker exec -it kafka bash\\nbash-4.4# cd /opt/kafka_2.12-2.5.0/bin/\\nbash-4.4# ./kafka-console-producer.sh --broker-list localhost:9092 --topic first-topic\\n>Hello\\n>\\n\")), mdx(\"p\", null, \"\\u6D88\\u8D39\\u8005\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-cmd\"\n  }, \"jabin@jabindeiMac ~/code/tmp \\xBB docker exec -it kafka bash\\nbash-4.4# cd /opt/kafka_2.12-2.5.0/bin/\\nbash-4.4# ./kafka-console-consumer.sh --bootstrap-server localhost:9092 --topic first-topic --from-beginning\\nHello\\n\")), mdx(\"h2\", null, \"\\u53C2\\u8003\\u6587\\u7AE0\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.jianshu.com/p/e8c29cba9fae\"\n  }, \"https://www.jianshu.com/p/e8c29cba9fae\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.docker.com/docker-for-mac/networking/\"\n  }, \"https://docs.docker.com/docker-for-mac/networking/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://yuanmomo.net/2019/06/13/docker-network/\"\n  }, \"https://yuanmomo.net/2019/06/13/docker-network/\"), \"\\n\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.jianshu.com/p/052f9c6ca664\"\n  }, \"https://www.jianshu.com/p/052f9c6ca664\")));\n}\n;\nMDXContent.isMDXComponent = true;","excerpt":"由于 kafka 依赖 zookeeper ，因此需要使用 docker 同时安装 zookeeper 和  kafka 。 坑：由于 macOS 的 docker 底层实现的不同，网上的很多教程放在 macOS 中并不能成功运行，主要原因是 macOS 的 docker 在容器和宿主之间无法通过 ip…","frontmatter":{"date":"2020-12-08 13:39","title":"macOS下使用docker安装kafka、遇到的坑与解决方案。","draft":false}}]},"site":{"siteMetadata":{"siteUrl":"https://www.yourdomain.tld","title":"JabinGP Blog","description":"All about my life."}}},"pageContext":{"currIds":["d63399ea-7e7a-57d8-aa49-cc64f48c2f6a","1090ca10-35e7-5042-8f26-3f89086ccdfb","8c5bc91f-023b-5b77-a833-1a40add72ca1","837ba069-1052-53cf-8836-92aeb93562fc","e9eb6b86-efaa-52d6-b243-99b23870715c","9d15983b-4fc0-52dc-987e-fbec915e6b5b","b2f21a73-6ec7-597f-93b6-f98af8391283","e9eb127f-876b-56e2-ab26-970136bf67ef","1c0aa2e2-f864-5668-a722-0c0f11c39c37","9291f52a-d49b-54a7-846e-58331b64d0f3"]}},
    "staticQueryHashes": []}