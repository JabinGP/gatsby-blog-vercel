<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e12c7c9c885ec3ebdd07.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}</style><meta name="generator" content="Gatsby 4.4.0"/><link as="script" rel="preload" href="/webpack-runtime-11cdd594e1e31e070fdf.js"/><link as="script" rel="preload" href="/framework-69325bf178eabe561408.js"/><link as="script" rel="preload" href="/app-7f16de806ee299d0dd1e.js"/><link as="script" rel="preload" href="/530167de2a3213ccc45a75350c8664d897ea695d-c8985315b602b261bbc3.js"/><link as="script" rel="preload" href="/component---src-pages-post-js-300889cef02639e944c7.js"/><link as="fetch" rel="preload" href="/page-data/posts/draft/daemon-process/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><title>操作系统系列之——守护进程</title><div class="sc-dkPtRN kgstGl"><div class="sc-hKwDye cUWynP"><h1>操作系统系列之——守护进程<!-- -->（草稿）</h1><h3>2020-12-22 13:24</h3></div><div id="stylemd" class="sc-bdvvtL hlRsZa"><blockquote><p>本文要求你对进程有一定概念。如果不懂什么是进程，推荐你查看我的文章<a href="http://localhost:1313/posts/code/os-program/">操作系统系列之——程序</a>和<a href="http://localhost:1313/posts/code/os-process/">操作系统系列之——进程</a>。</p></blockquote><h2>1. 概念解释</h2><p><strong>守护进程</strong>（<em>Daemon Process</em>），是一种 <strong>不被用户直接控制的</strong> 、 <strong>运行在后台</strong> 的进程。通常而言守护进程的进程名称会以 <em>字母d</em> 结尾，用以表明该进程是一个不同于普通进程的守护进程。</p><h2>1.1. Daemon一词的起源</h2><p><em>Daemon</em>源自古典拉丁语，表示<strong>具有掌管能力的灵体</strong>。</p><p>该词曾被科学家 <strong>詹姆斯·麦克斯韦</strong> 引用于一个“思想实验”中，他想象在一个被分隔为两部分的封闭容器中间，存在一个大小仅仅够一个气体分子通过的门。这道门，由一个想象中的掌管精灵Daemon控制。这个掌管精灵Daemon根据气体的速度，只让速度快(温度高)的气体分子由A半到B半，也只让速度慢(温度低)的气体由B半到A半。最终这个封闭容器将一半冷一半热。麦克斯韦的这个想法因为脱离了热力学原理而轰动一时，但最终量子力学理论证明了其不可能性。</p><p>随后在1963年运行于<code>IBM 7094</code>系统上的<code>Project MAC</code>项目中，具有物理学背景的 <em>Jerome H. Saltzer</em> 教授用麦克斯韦实验中那个不断看管着分子的掌管精灵，来指代<strong>不懈地工作</strong>来执行系统琐事的<strong>后台进程</strong>，这是<em>Daemon</em>一词首次出现在计算机世界。</p><h2>2. 守护进程有哪些特点</h2><p>让我们通过一个实际运作着的Linux中的进程信息来得到守护进程的特点，这里选择大家都比较熟悉的 <em>Ubuntu</em> 系统，版本为 <em>14.04</em>（选这个版本是有原因的，后面再说到这个问题）。</p><p>为了便于演示，我直接用虚拟机新装了一个系统，系统起初只有装机默认的程序。</p><h3>2.1. 安装Nginx</h3><p>首先我们装一个 <em>Nginx</em> (如果你没接触过的话，简单的讲它就是一个类似 <em>Apache</em> 的 <em>HTTP</em> 服务器），通过系统的 <em>Terminal</em> 执行命令 <code>sudo apt-get install nginx</code> 即可。安装完成后，<em>apt</em> 包管理会自动配置好 <em>Nginx的守护进程</em> ，它将会被启动并且设置为开机自启。</p><p><em>Nginx</em> 会默认运行在 <em>80</em> 端口（这是使用浏览器访问网站时的默认端口），因此我们可以在本机使用浏览器访问 <em>http://localhost</em> 来测试 <em>Nginx</em> 是否已经成功启动，但是由于我装的系统是 <strong>服务器版本</strong> 没有 <strong>gui界面</strong> ，只有命令行可用，因此这里使用 <em>curl</em> 命令来代替浏览器测试。</p><p>在机器上执行<code>curl http://localhost</code>，该命令将产生类似浏览器访问 <em>http://localhost</em> 的效果，不同的是结果将以 <em>html源代码</em> 的形式输出在 <em>Terminal</em> 而不是显示 <em>html源代码</em>  <strong>渲染后的网页</strong> 。</p><p>以下是 <code>curl http://localhost</code> 执行结果，这是 <em>Nginx</em> 默认的 <strong>欢迎页</strong> ：</p><div class="gatsby-highlight" data-language="html"><pre class="prism-code language-html"><div class="token-line" style="color:#000000"><span class="token doctype punctuation" style="color:rgb(4, 81, 165)">&lt;!</span><span class="token doctype doctype-tag">DOCTYPE</span><span class="token doctype"> </span><span class="token doctype name">html</span><span class="token doctype punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">html</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">head</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">title</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">Welcome to nginx!</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">title</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">style</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token style language-css"></span></div><div class="token-line" style="color:#000000"><span class="token style language-css">    </span><span class="token style language-css selector">body</span><span class="token style language-css"> </span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token style language-css"></span></div><div class="token-line" style="color:#000000"><span class="token style language-css">        </span><span class="token style language-css property">width</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token style language-css"> </span><span class="token style language-css number" style="color:rgb(9, 134, 88)">35</span><span class="token style language-css unit">em</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token style language-css"></span></div><div class="token-line" style="color:#000000"><span class="token style language-css">        </span><span class="token style language-css property">margin</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token style language-css"> </span><span class="token style language-css number" style="color:rgb(9, 134, 88)">0</span><span class="token style language-css"> auto</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token style language-css"></span></div><div class="token-line" style="color:#000000"><span class="token style language-css">        </span><span class="token style language-css property">font-family</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">:</span><span class="token style language-css"> Tahoma</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token style language-css"> Verdana</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token style language-css"> Arial</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token style language-css"> sans-serif</span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token style language-css"></span></div><div class="token-line" style="color:#000000"><span class="token style language-css">    </span><span class="token style language-css punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token style language-css"></span></div><div class="token-line" style="color:#000000"><span class="token style language-css"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">style</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">head</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">body</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">h1</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">Welcome to nginx!</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">h1</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">p</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">If you see this page, the nginx web server is successfully installed and</span></div><div class="token-line" style="color:#000000"><span class="token plain">working. Further configuration is required.</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">p</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">p</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">For online documentation and support please refer to</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">a</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://nginx.org/</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">nginx.org</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">a</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">.</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">br</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">Commercial support is available at</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">a</span><span class="token tag" style="color:rgb(128, 0, 0)"> </span><span class="token tag attr-name" style="color:rgb(255, 0, 0)">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(4, 81, 165)">=</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag attr-value" style="color:rgb(128, 0, 0)">http://nginx.com/</span><span class="token tag attr-value punctuation" style="color:rgb(4, 81, 165)">&quot;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">nginx.com</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">a</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">.</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">p</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">p</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">em</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">Thank you for using nginx.</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">em</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">p</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">body</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">html</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span></div></pre></div><h3>2.2. 安装SSH</h3><p>因为虚拟机没有gui界面，命令的结果不好复制出来，因此希望通过本机ssh连接该电脑，执行命令并复制命令结果。</p><p>系统默认只安装了 <em>ssh</em> 的客户端 <em>openssh-client</em>，因而无法提供ssh服务让其他电脑连接，为了能够让其他电脑能够使用 <em>ssh</em> 从远程连接这台电脑，通常都会安装 <em>ssh</em> 的服务端 <em>openssh-server</em>，同样使用一行命令即可 <code>sudo apt-get install openssh-server</code>。</p><p>与 <em>Nginx</em> 安装过程一样，命令执行完成后系统中就已经配置好了 <em>ssh</em> 相关的守护进程了，通常它名为 <em>sshd</em>。验证方法也很简单，用另一台电脑通过 <em>ssh</em> 连接即可。</p><p>值的一提的是，我的虚拟机设置了 <em>网卡桥接</em> ，这使得虚拟机能够与我的本机 <strong>处于同一网段</strong> 下：</p><ul><li>本机ip：192.168.123.100</li><li>虚拟机ip：192.168.123.108</li></ul><p>以下为登陆过程：</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token plain">➜  ~ </span><span class="token function" style="color:rgb(0, 0, 255)">ssh</span><span class="token plain"> jabin@192.168.123.108</span></div><div class="token-line" style="color:#000000"><span class="token plain">The authenticity of </span><span class="token function" style="color:rgb(0, 0, 255)">host</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;192.168.123.108 (192.168.123.108)&#x27;</span><span class="token plain"> can</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;t be established.</span></div><div class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">ECDSA key fingerprint is SHA256:03HGcFD36maxOk1mMh8G2HYJ6wvWSTTEm9aJZf0ovig.</span></div><div class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">Are you sure you want to continue connecting (yes/no/[fingerprint])? yes</span></div><div class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">Warning: Permanently added &#x27;</span><span class="token number" style="color:rgb(9, 134, 88)">192.168</span><span class="token plain">.123.108</span><span class="token string" style="color:rgb(163, 21, 21)">&#x27; (ECDSA) to the list of known hosts.</span></div><div class="token-line" style="color:#000000"><span class="token string" style="color:rgb(163, 21, 21)">jabin@192.168.123.108&#x27;</span><span class="token plain">s password:</span></div><div class="token-line" style="color:#000000"><span class="token plain">Welcome to Ubuntu </span><span class="token number" style="color:rgb(9, 134, 88)">14.04</span><span class="token plain"> LTS </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">GNU/Linux </span><span class="token number" style="color:rgb(9, 134, 88)">3.13</span><span class="token plain">.0-24-generic x86_64</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain"> * Documentation:  https://help.ubuntu.com/</span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  System information as of Mon Dec </span><span class="token number" style="color:rgb(9, 134, 88)">28</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">21</span><span class="token plain">:07:16 CST </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  System load:  </span><span class="token number" style="color:rgb(9, 134, 88)">0.06</span><span class="token plain">              Processes:           </span><span class="token number" style="color:rgb(9, 134, 88)">165</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  Usage of /:   </span><span class="token number" style="color:rgb(9, 134, 88)">2.2</span><span class="token plain">% of </span><span class="token number" style="color:rgb(9, 134, 88)">60</span><span class="token plain">.90GB   Users logged in:     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">  Memory usage: </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">%                IP address </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token plain"> eth0: </span><span class="token number" style="color:rgb(9, 134, 88)">192.168</span><span class="token plain">.123.108</span></div><div class="token-line" style="color:#000000"><span class="token plain">  Swap usage:   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">%</span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">  Graph this data and manage this system at:</span></div><div class="token-line" style="color:#000000"><span class="token plain">    https://landscape.canonical.com/</span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">New release </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;16.04.7 LTS&#x27;</span><span class="token plain"> available.</span></div><div class="token-line" style="color:#000000"><span class="token plain">Run </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;do-release-upgrade&#x27;</span><span class="token plain"> to upgrade to it.</span></div><div class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#000000"><span class="token plain">Last login: Mon Dec </span><span class="token number" style="color:rgb(9, 134, 88)">28</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">21</span><span class="token plain">:07:16 </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">jabin@ubuntu-linux14:~$</span></div></pre></div><h3>2.3. 查看系统中所有的守护进程</h3><p>通过系统的 <em>Terminal</em> 执行命令 <code>ps -axj</code>，其中 <code>-axj</code> 是程序 <code>ps</code> 的参数，等同于<code>-a -x -j</code>，三个参数分别代表：</p><ul><li>-a：显示由其他用户所拥有的进程的状态。</li><li>-x：显示没有控制终端的进程状态。</li><li>-j：显示与作业相关的信息：会话ID、进程组ID、控制终端以及终端进程组ID。</li></ul><p>运行结果如下（只保留了前三行，其余省略）：</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token environment constant" style="color:rgb(129, 31, 63)">PPID</span><span class="token plain">   PID  PGID   SID TTY      TPGID STAT   </span><span class="token environment constant" style="color:rgb(129, 31, 63)">UID</span><span class="token plain">   TIME COMMAND</span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 /sbin/init</span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> ?           -1 S        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">kthreadd</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> ?           -1 S        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">ksoftirqd/0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">4</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> ?           -1 S        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">kworker/0:0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">5</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> ?           -1 S</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain">       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">kworker/0:0H</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">7</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">     </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain"> ?           -1 S        </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">rcu_sched</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">..</span><span class="token plain">.</span></div></pre></div><p>标题的意义如下：</p><ul><li><em>PPID</em> ：<em>父进程ID</em></li><li><em>PID</em> ：<em>进程ID</em></li><li><em>PGID</em> ：<em>进程组ID</em></li><li><em>SID</em> ：<em>会话ID</em></li><li><em>TTY</em> ：<em>终端名称</em></li><li><em>TPGID</em> ：<em>终端进程组ID</em></li><li><em>UID</em> ：<em>用户ID</em></li><li><em>TIME</em> ：<em>累积CPU运行时间</em></li><li><em>COMMAND</em> ：<em>命令字符串</em></li></ul><p>这里可以看到，结果中的第一行就是 <em>init</em> 进程，同时也是 <strong>1号进程</strong>。最下面四行中的进程的父进程都是 <strong>2号进程</strong> ，而 <strong>2号进程</strong> 的父进程又是 <strong>0号进程</strong> ，这些进程都属于 <strong>内核级别的进程</strong> ，暂时不过多关注它们的内容。</p><h3>2.3. 找到Nginx和SSH的守护进程</h3><p>安装 <em>nginx</em> 和 <em>openssh-server</em> 的意义在于，我们都知道（不知道的现在就知道了）这两个软件都会在系统中运行各自的 <em>守护进程</em> 在后台不断运行提供服务，不同是前者是 <strong>等待http请求</strong> ，后者是等待 <strong>ssh连接</strong>。</p><p>通过 <strong>2.2</strong> 已经可以找出所有的守护进程了，通过 <em>grep</em> 就可以很方便地提取出特定的结果行了。</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token plain">jabin@ubuntu-linux14:~$ </span><span class="token function" style="color:rgb(0, 0, 255)">ps</span><span class="token plain"> -axj </span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">grep</span><span class="token plain"> -E </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;nginx|ssh&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 nginx: master process /usr/sbin/nginx</span></div><div class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1276</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 nginx: worker process</span></div><div class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1277</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:01 nginx: worker process</span></div><div class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1278</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:01 nginx: worker process</span></div><div class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1279</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:01 nginx: worker process</span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 /usr/sbin/sshd -D</span></div><div class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 sshd: jabin </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">priv</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">  </span></div><div class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2430</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain"> ?           -1 S     </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 sshd: jabin@pts/0   </span></div><div class="token-line" style="color:#000000"><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">2431</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2451</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2450</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2431</span><span class="token plain"> pts/0     </span><span class="token number" style="color:rgb(9, 134, 88)">2450</span><span class="token plain"> S+    </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 </span><span class="token function" style="color:rgb(0, 0, 255)">grep</span><span class="token plain"> --color</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain">auto -E nginx</span><span class="token operator" style="color:rgb(0, 0, 0)">|</span><span class="token function" style="color:rgb(0, 0, 255)">ssh</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">jabin@ubuntu-linux14:~$</span></div></pre></div><p>除去最后一行不看（显然这一行只是我们当前输入命令相关的进程），其余的结果中有 <strong>5</strong> 个进程是 <em>nginx</em> 的守护进程，并且通过 <em>PID</em> 和 <em>PPID</em> 可以看出，这 <strong>5</strong> 个进程中第 <strong>1</strong> 个是 <em>主进程</em> ，其余都它的 <em>子进程</em>：</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token environment constant" style="color:rgb(129, 31, 63)">PPID</span><span class="token plain">   PID  PGID   SID TTY      TPGID STAT   </span><span class="token environment constant" style="color:rgb(129, 31, 63)">UID</span><span class="token plain">   TIME COMMAND</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 nginx: master process /usr/sbin/nginx</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1276</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 nginx: worker process</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1277</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:01 nginx: worker process</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1278</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:01 nginx: worker process</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1279</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 S       </span><span class="token number" style="color:rgb(9, 134, 88)">33</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:01 nginx: worker process</span></div></pre></div><p>有关 <em>ssh</em> 的守护进程有 <strong>3</strong> 个，同样通过 <em>PID</em> 和 <em>PPID</em> 可以看出只有第 <strong>1</strong> 个是 <em>主进程</em>：</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token environment constant" style="color:rgb(129, 31, 63)">PPID</span><span class="token plain">   PID  PGID   SID TTY      TPGID STAT   </span><span class="token environment constant" style="color:rgb(129, 31, 63)">UID</span><span class="token plain">   TIME COMMAND</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 /usr/sbin/sshd -D</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 sshd: jabin </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain">priv</span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain">  </span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2430</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2359</span><span class="token plain"> ?           -1 S     </span><span class="token number" style="color:rgb(9, 134, 88)">1000</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 sshd: jabin@pts/0</span></div></pre></div><p>可以额外注意的一点是， <em>ssh</em> 有关结果第三行中的 <code>jabin@pts/0</code> 其实指示了这个 <em>子进程</em> 其实就服务于 <strong>我的主机开启的这次ssh连接</strong>，通过<code>who am i</code>指令就可以验证这一点（留意结果中的 <code>pts/0</code> ）：</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token plain">jabin@ubuntu-linux14:~$ </span><span class="token function" style="color:rgb(0, 0, 255)">who</span><span class="token plain"> am i</span></div><div class="token-line" style="color:#000000"><span class="token plain">jabin    pts/0        </span><span class="token number" style="color:rgb(9, 134, 88)">2020</span><span class="token plain">-12-29 00:10 </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">macbook-pro-2.lan</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">jabin@ubuntu-linux14:~$</span></div></pre></div><h3>2.4. 守护进程的特点</h3><p>观察 <em>nginx</em> 和 <em>sshd</em> 的 <em>主进程</em> 的 <strong>进程信息</strong> ：</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">1275</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 nginx: master process /usr/sbin/nginx</span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain">  </span><span class="token number" style="color:rgb(9, 134, 88)">2323</span><span class="token plain"> ?           -1 Ss       </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">   </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token plain">:00 /usr/sbin/sshd -D</span></div></pre></div><p>可以发现一些共同点：</p><ul><li><em>PPID</em> 都为 <code>1</code>。</li><li><em>TTY</em> 都为 <code>?</code>。</li><li><em>TPGID</em> 都为 <code>-1</code>。</li><li><em>SID</em> 都等于 <em>PID</em>。</li><li><em>PGID</em> 都等于 <em>PID</em>。</li></ul><p>这说明：</p><ul><li>他们的 <em>父进程</em> 都是 <strong>1号进程</strong> 。</li><li>他们都没有 <em>控制终端</em> 。</li><li>他们都没有 <em>控制终端</em> 所以都为 <strong>-1</strong> 。</li><li>该进程的 <em>会话ID</em> 等于该进程的 <em>进程ID</em> ，即该进程是 <em>会话首进程（session leader）</em> 。</li><li>该进程的 <em>进程组ID</em> 等于该进程的 <em>进程ID</em> ，即该进程是 <em>进程组组长</em> 。</li></ul><h2>1.4 什么是Linux的process group</h2><h2>1.5 什么是working directory</h2><h2>1.6 什么是masks</h2><h2>3. 如何启动一个守护进程</h2><h2>4. 守护进程等于后台进程吗</h2><p>结论：守护进程不等于后台进程。</p><p><strong>后台进程</strong> 是指工作在后台的进程。而守护进程毫无疑问会工作在后台，所以它一定是一个后台进程。</p><p>但反过来说后台进程一定是守护进程却是错误的，因为后台工作只是守护进程 <strong>其中之一</strong> 的特性。</p><h2>5. 参考文章</h2><ul><li><em>Unix环境高级编程：第9章</em></li><li><em>Unix环境高级编程：第13章</em></li><li><a href="https://linuxtoy.org/archives/the-origin-of-the-word-daemon.html"><em>Daemon 起源：中文翻译</em></a></li><li><a href="http://ei.cs.vt.edu/~history/Daemon.html"><em>Daemon 起源：原文</em></a></li><li><a href="http://www.linfo.org/daemon.html"><em>Daemon Definition</em></a></li><li><a href="https://en.wikipedia.org/wiki/Daemon_(computing)"><em>WiKi：Daemon (computing)</em></a></li><li><a href="https://www.cnblogs.com/SophiaTang/archive/2011/11/25/2263654.html"><em>后台进程不等于守护进程</em></a></li><li><a href="https://unix.stackexchange.com/questions/72177/what-is-pts-0-and-0-0-in-linux-when-typing-who-am-i"><em>what is pts/0 and (:0.0) in linux when typing who am i</em></a></li><li><a href="https://blog.csdn.net/lovemdx/article/details/20529563"><em>linux 的nohup &amp; 和daemon 总结</em></a></li><li><a href="https://zhidao.baidu.com/question/429901771.html"><em>linux中创建守护进程是为什么要改变工作目录</em></a></li></ul></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/draft/daemon-process";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-71841f628f9c8d668040.js"],"app":["/app-7f16de806ee299d0dd1e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-46407eeca50ec9ed10bd.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d6938aa5e28d7000fa9e.js"],"component---src-pages-page-js":["/component---src-pages-page-js-b9cf5fd1917d6f0677cf.js"],"component---src-pages-post-js":["/component---src-pages-post-js-300889cef02639e944c7.js"],"component---src-pages-search-js":["/component---src-pages-search-js-aa816b57753a46283b1c.js"]};/*]]>*/</script><script src="/polyfill-71841f628f9c8d668040.js" nomodule=""></script><script src="/component---src-pages-post-js-300889cef02639e944c7.js" async=""></script><script src="/530167de2a3213ccc45a75350c8664d897ea695d-c8985315b602b261bbc3.js" async=""></script><script src="/app-7f16de806ee299d0dd1e.js" async=""></script><script src="/framework-69325bf178eabe561408.js" async=""></script><script src="/webpack-runtime-11cdd594e1e31e070fdf.js" async=""></script></body></html>