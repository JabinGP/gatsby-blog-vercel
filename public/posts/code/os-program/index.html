<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e12c7c9c885ec3ebdd07.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}</style><meta name="generator" content="Gatsby 4.4.0"/><link as="script" rel="preload" href="/webpack-runtime-0ebc7f2cde188703a431.js"/><link as="script" rel="preload" href="/framework-69325bf178eabe561408.js"/><link as="script" rel="preload" href="/app-3ff784bf8da428e12e35.js"/><link as="script" rel="preload" href="/46cc0ad690e07bdb83aca0e2e42f847dc2691093-a0f10e8d1673b14c59a5.js"/><link as="script" rel="preload" href="/component---src-pages-post-js-300889cef02639e944c7.js"/><link as="fetch" rel="preload" href="/page-data/posts/code/os-program/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><title>操作系统系列之——程序</title><div class="sc-dkPtRN kgstGl"><div class="sc-hKwDye cUWynP"><h1>操作系统系列之——程序</h1><h3>2020-12-21 13:24</h3></div><div id="stylemd" class="sc-bdvvtL hlRsZa"><blockquote><p>这是这个系列的第一篇文章，如果对后续感兴趣，可以不时检查<a href="https://blog.jabingp.cn/tags/os/">os</a>是否更新。</p></blockquote><h2>1. 什么是程序</h2><blockquote><p>计算机程序是<strong>一组</strong>指示电子计算机或其他具有消息处理能力设备每一步动作的<strong>指令</strong>。————《<a href="https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F">维基百科：计算机程序</a>》</p></blockquote><h2>2. 程序有啥用</h2><p>定义中也提到了<strong>程序</strong>是<em>指示每一步动作</em>的<strong>指令</strong>，简单的说，程序就是实现某个目标所需要经历的步骤。</p><p>举一个现实中的例子，当我的目标是<strong>得到一杯手冲咖啡</strong>时，那我实现这个目标的<strong>程序</strong>就是：</p><ol><li>取出一包咖啡豆、V60滤杯、V60滤纸、自己喜欢的咖啡杯、够用的电子秤、尽量贵的咖啡磨豆机、一个能倒出水的手冲壶。</li><li>用电子秤秤出15g咖啡豆。</li><li>用咖啡磨豆机研磨咖啡豆，得到咖啡粉。</li><li>将手冲壶装满水。</li><li>将手冲壶里的水加热到90°</li><li>将V60滤纸放入V60滤杯中，用热水湿润后，倒干多余的水。</li><li>将咖啡粉倒入V60滤杯，滤杯架放在咖啡杯上。</li><li>将热水倒入滤杯，用电子秤观察自己的倒入的水量到达225g时停止。</li><li>等待所有热水通过滤杯滴入咖啡杯，移开滤杯。</li></ol><blockquote><p>如果你发现你看不懂这个程序，没有关系这是正常的，你只需要知道这个复杂的一系列流程其实就相当于计算机中的一个<strong>程序</strong>，它给出了实现<strong>得到一杯手冲咖啡</strong>这个目标所需要的步骤。但如果你发现这个<strong>程序</strong>简直跟自己每天在做的一样，请留下评论让我们交个朋友！</p></blockquote><h2>3. 源代码</h2><p>前面举了一个比较抽象的例子，也许有的人已经get到了，有的人还是一脸雾水，接下来会继续用更具体的例子，不过这要求你对<strong>C语言</strong>和<strong>命令行</strong>有简单的了解。</p><p>你现在有一个很简单的目标：<strong>向屏幕输出三次&quot;HelloWorld!&quot;</strong>，你很轻易地想到了你可以利用你曾学的<strong>C语言</strong>去实现：</p><div class="gatsby-highlight" data-language="c"><pre class="prism-code language-c"><div class="token-line" style="color:#000000"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="color:rgb(0, 0, 255)">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(163, 21, 21)">&lt;stdio.h&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(0, 0, 255)">main</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(0, 0, 0)">++</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token function" style="color:rgb(0, 0, 255)">printf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;No.%d: HelloWorld!\n&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token keyword" style="color:rgb(0, 0, 255)">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span></div></pre></div><p>回顾一下这个段非常简单的源代码，除了必要的<code>include</code>、<code>main</code>、<code>return</code>等结构，核心的代码只有三行，用<code>for</code>循环<code>3</code>次，在循环内<code>printf</code>：</p><div class="gatsby-highlight" data-language="c"><pre class="prism-code language-c"><div class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">for</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token keyword" style="color:rgb(0, 0, 255)">int</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token number" style="color:rgb(9, 134, 88)">0</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(0, 0, 0)">&lt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(9, 134, 88)">3</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(0, 0, 0)">++</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token function" style="color:rgb(0, 0, 255)">printf</span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token string" style="color:rgb(163, 21, 21)">&quot;No.%d: HelloWorld!\n&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span></div></pre></div><p>除了必要的结构外，实际上我们就是用这三行代码去<strong>描述了</strong>如何实现我们需要的目标。这是<strong>C语言</strong>（或者<strong>Python</strong>、<strong>Java</strong>、<strong>JS</strong>、<strong>Golang</strong>）提供给我们的一种<strong>描述的能力</strong>。但是到目前为止，我们所编写的这几行代码还停留在<strong>文本</strong>这个阶段，这是一段你能<strong>读懂</strong>、<strong>修改</strong>的<strong>文本</strong>，但它们并不是计算机能够<strong>识别并执行</strong>的<strong>指令</strong>。</p><h2>4. 编译源代码</h2><p>让<strong>源代码</strong>成为<strong>程序</strong>也很简单，对于C语言而言，只需要用C语言的<strong>编译器</strong>去<strong>编译</strong>源代码即可。</p><h2>4.1. 编译器做了什么</h2><p>简单地说，编译器将我们写的<strong>源代码</strong>翻译成了机器能执行的<strong>二进制</strong>。</p><p>因为计算机是二进制的，在计算机的底层世界里都是<code>0</code>和<code>1</code>，但是我们直接用<code>0</code>和<code>1</code>去给计算机写程序、下指令太过<strong>反人类</strong>，为了便于<strong>我们与计算机的对话</strong>，<strong>编程语言</strong>应运而生。</p><p><strong>编程语言</strong>是更接近人能读懂的语言（尽管它依旧有不小的上手难度，但已经比更底层的指令已经好太多了），虽然人能更方便地使用编程语言编写程序了，但计算机很蠢只懂<strong>二进制</strong>，为了让<strong>计算机也能理解</strong>我们所编写的内容，就需要<strong>编译器</strong>来充当这中间的<strong>翻译官</strong>。</p><h2>4.2. 简单的编译尝试</h2><blockquote><p>以下操作在类Unix系统中进行，不同操作系统的编译工具可能会不同。</p></blockquote><p>将<code>3</code>中的源代码保存为<code>main.c</code>，<strong>打开命令行进入当前目录</strong>，利用<code>gcc</code>编译工具去编译源代码，指令如下：</p><div class="gatsby-highlight" data-language="bash"><pre class="prism-code language-bash"><div class="token-line" style="color:#000000"><span class="token builtin class-name" style="color:rgb(38, 127, 153)">cd</span><span class="token plain"> $源代码所在文件夹</span></div><div class="token-line" style="color:#000000"><span class="token plain">gcc main.c</span></div></pre></div><p>现在main.c所在文件夹包含内容如下：</p><ul><li>main.c</li><li>a.out</li></ul><p>通过gcc编译后得到了一个二进制可执行文件<code>a.out</code>。此时它被保存在硬盘的中，并且计算机也能够执行它，这时候我们才终于通过源代码获得了一个<strong>程序</strong>。</p></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/code/os-program";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-71841f628f9c8d668040.js"],"app":["/app-3ff784bf8da428e12e35.js"],"component---src-pages-404-js":["/component---src-pages-404-js-46407eeca50ec9ed10bd.js"],"component---src-pages-index-js":["/component---src-pages-index-js-475cda92fc1d8817dd82.js"],"component---src-pages-post-js":["/component---src-pages-post-js-300889cef02639e944c7.js"],"component---src-pages-search-js":["/component---src-pages-search-js-aa816b57753a46283b1c.js"]};/*]]>*/</script><script src="/polyfill-71841f628f9c8d668040.js" nomodule=""></script><script src="/component---src-pages-post-js-300889cef02639e944c7.js" async=""></script><script src="/46cc0ad690e07bdb83aca0e2e42f847dc2691093-a0f10e8d1673b14c59a5.js" async=""></script><script src="/app-3ff784bf8da428e12e35.js" async=""></script><script src="/framework-69325bf178eabe561408.js" async=""></script><script src="/webpack-runtime-0ebc7f2cde188703a431.js" async=""></script></body></html>