<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.e12c7c9c885ec3ebdd07.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}</style><meta name="generator" content="Gatsby 4.4.0"/><link as="script" rel="preload" href="/webpack-runtime-11cdd594e1e31e070fdf.js"/><link as="script" rel="preload" href="/framework-69325bf178eabe561408.js"/><link as="script" rel="preload" href="/app-7f16de806ee299d0dd1e.js"/><link as="script" rel="preload" href="/530167de2a3213ccc45a75350c8664d897ea695d-c8985315b602b261bbc3.js"/><link as="script" rel="preload" href="/component---src-pages-post-js-300889cef02639e944c7.js"/><link as="fetch" rel="preload" href="/page-data/posts/code/docker-install-mongo/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><title>Docker安装MongoDB</title><div class="sc-dkPtRN kgstGl"><div class="sc-hKwDye cUWynP"><h1>Docker安装MongoDB</h1><h3>2020-12-12 09:28</h3></div><div id="stylemd" class="sc-bdvvtL hlRsZa"><h2>拉取镜像</h2><div class="gatsby-highlight" data-language="cmd"><pre class="prism-code language-cmd"><div class="token-line" style="color:#000000"><span class="token plain">docker pull mongo:latest</span></div></pre></div><h2>运行镜像</h2><div class="gatsby-highlight" data-language="cmd"><pre class="prism-code language-cmd"><div class="token-line" style="color:#000000"><span class="token plain">docker run -itd --name mongo -p 27017:27017 mongo --auth</span></div></pre></div><ul><li>--auth：Enables authorization to control user’s access to database resources and operations. When authorization is enabled, MongoDB requires all clients to authenticate themselves first in order to determine the access for the client.
Configure users via the mongo shell. If no users exist, the localhost interface will continue to have access to the database until you create the first user。</li></ul><h2>进入容器添加用户</h2><p>进入容器并且直接运行mongo-shell，选择数据库为<code>admin</code></p><div class="gatsby-highlight" data-language="cmd"><pre class="prism-code language-cmd"><div class="token-line" style="color:#000000"><span class="token plain">docker exec -it mongo mongo admin</span></div></pre></div><p>创建用户并尝试连接</p><div class="gatsby-highlight" data-language="cmd"><pre class="prism-code language-cmd"><div class="token-line" style="color:#000000"><span class="token plain">db.createUser({ user:&#x27;admin&#x27;,pwd:&#x27;123456&#x27;,roles:[ { role:&#x27;userAdminAnyDatabase&#x27;, db: &#x27;admin&#x27;},&quot;readWriteAnyDatabase&quot;]});</span></div><div class="token-line" style="color:#000000"><span class="token plain">db.auth(&#x27;admin&#x27;, &#x27;123456&#x27;)</span></div></pre></div><h2>验证账户权限</h2><p>运行一些简单的指令来验证账户的有效性</p><div class="gatsby-highlight" data-language="cmd"><pre class="prism-code language-cmd"><div class="token-line" style="color:#000000"><span class="token plain">&gt; show dbs</span></div><div class="token-line" style="color:#000000"><span class="token plain">admin   0.000GB</span></div><div class="token-line" style="color:#000000"><span class="token plain">config  0.000GB</span></div><div class="token-line" style="color:#000000"><span class="token plain">local   0.000GB</span></div><div class="token-line" style="color:#000000"><span class="token plain">&gt; show users</span></div><div class="token-line" style="color:#000000"><span class="token plain">{</span></div><div class="token-line" style="color:#000000"><span class="token plain">        &quot;_id&quot; : &quot;admin.admin&quot;,</span></div><div class="token-line" style="color:#000000"><span class="token plain">        &quot;userId&quot; : UUID(&quot;dc5760ea-c8c1-4f40-af5b-7d9d53779842&quot;),</span></div><div class="token-line" style="color:#000000"><span class="token plain">        &quot;user&quot; : &quot;admin&quot;,</span></div><div class="token-line" style="color:#000000"><span class="token plain">        &quot;db&quot; : &quot;admin&quot;,</span></div><div class="token-line" style="color:#000000"><span class="token plain">        &quot;roles&quot; : [</span></div><div class="token-line" style="color:#000000"><span class="token plain">                {</span></div><div class="token-line" style="color:#000000"><span class="token plain">                        &quot;role&quot; : &quot;userAdminAnyDatabase&quot;,</span></div><div class="token-line" style="color:#000000"><span class="token plain">                        &quot;db&quot; : &quot;admin&quot;</span></div><div class="token-line" style="color:#000000"><span class="token plain">                }</span></div><div class="token-line" style="color:#000000"><span class="token plain">        ],</span></div><div class="token-line" style="color:#000000"><span class="token plain">        &quot;mechanisms&quot; : [</span></div><div class="token-line" style="color:#000000"><span class="token plain">                &quot;SCRAM-SHA-1&quot;,</span></div><div class="token-line" style="color:#000000"><span class="token plain">                &quot;SCRAM-SHA-256&quot;</span></div><div class="token-line" style="color:#000000"><span class="token plain">        ]</span></div><div class="token-line" style="color:#000000"><span class="token plain">}</span></div></pre></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/code/docker-install-mongo";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-71841f628f9c8d668040.js"],"app":["/app-7f16de806ee299d0dd1e.js"],"component---src-pages-404-js":["/component---src-pages-404-js-46407eeca50ec9ed10bd.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d6938aa5e28d7000fa9e.js"],"component---src-pages-page-js":["/component---src-pages-page-js-b9cf5fd1917d6f0677cf.js"],"component---src-pages-post-js":["/component---src-pages-post-js-300889cef02639e944c7.js"],"component---src-pages-search-js":["/component---src-pages-search-js-aa816b57753a46283b1c.js"]};/*]]>*/</script><script src="/polyfill-71841f628f9c8d668040.js" nomodule=""></script><script src="/component---src-pages-post-js-300889cef02639e944c7.js" async=""></script><script src="/530167de2a3213ccc45a75350c8664d897ea695d-c8985315b602b261bbc3.js" async=""></script><script src="/app-7f16de806ee299d0dd1e.js" async=""></script><script src="/framework-69325bf178eabe561408.js" async=""></script><script src="/webpack-runtime-11cdd594e1e31e070fdf.js" async=""></script></body></html>